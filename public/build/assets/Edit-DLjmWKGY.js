import{p as L,r as b,z as E,c as o,o as a,a as _,u as r,h as P,w as j,b as t,l as F,i as B,q as T,j as u,d as m,v,t as i,F as x,f as g,g as y,e as z,y as U}from"./app-BTmW7o6y.js";import{_ as O}from"./DashboardLayout-jdGcdR74.js";const $={class:"max-w-4xl mx-auto"},q={class:"mb-6"},G={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"md:col-span-2"},I={key:0,class:"text-red-600 text-sm mt-1"},W={class:"md:col-span-2"},H={key:0,class:"text-red-600 text-sm mt-1"},J=["value"],Q={key:0,class:"text-red-600 text-sm mt-1"},X=["value"],Z={key:0,class:"text-red-600 text-sm mt-1"},ee={class:"flex space-x-2"},te=["value"],se={key:0,class:"text-red-600 text-sm mt-1"},le=["value"],re={key:0,class:"text-red-600 text-sm mt-1"},oe={key:0,class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie=["max"],ne={key:0,class:"text-red-600 text-sm mt-1"},de=["value"],ue={key:0,class:"text-red-600 text-sm mt-1"},ce={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},me={class:"bg-slate-50 rounded-xl p-4 mb-6"},pe={class:"flex items-center justify-between"},be={class:"font-medium text-slate-900"},xe={class:"text-sm text-slate-500"},fe={class:"text-sm text-slate-500"},ve={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ye={key:0,class:"text-red-600 text-sm mt-1"},we={key:1,class:"mt-4"},ke=["src"],_e={key:0,class:"text-red-600 text-sm mt-1"},he={key:1,class:"mt-4"},je=["src"],Ue={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},Ve={class:"space-y-6"},Ce={class:"flex items-center space-x-3"},Fe={key:0,class:"space-y-4 p-4 bg-slate-50 rounded-xl"},Be={class:"flex items-center space-x-3"},Me={class:"flex items-center space-x-3"},Se={class:"flex items-center justify-between"},Ae=["disabled"],Ne={key:0},Re={key:1},Ee={__name:"Edit",props:{auth:Object,resource:Object,subjects:Array,types:Object,categories:Array,gradeLevels:Array,examBoards:Array},setup(c){const d=c,l=L({title:d.resource.title,description:d.resource.description||"",type:d.resource.type,category:d.resource.category||"",subject_id:d.resource.subject_id||"",grade_level:d.resource.grade_level||"",exam_board:d.resource.exam_board||"",year:d.resource.year||new Date().getFullYear(),file:null,thumbnail:null,access_permissions:d.resource.access_permissions||{roles:[],users:[]},is_protected:d.resource.is_protected||!1,protection_settings:d.resource.protection_settings||{prevent_download:!1,watermark:!1,time_limit:null}}),w=b(null),h=b(null),f=b(""),k=b(!1),M=n=>{const e=n.target.files[0];if(e)if(l.file=e,e.type.startsWith("image/")){const s=new FileReader;s.onload=p=>{w.value=p.target.result},s.readAsDataURL(e)}else w.value=null},S=n=>{const e=n.target.files[0];if(e){l.thumbnail=e;const s=new FileReader;s.onload=p=>{h.value=p.target.result},s.readAsDataURL(e)}},V=()=>{f.value.trim()&&(l.category=f.value.trim(),f.value="",k.value=!1)},A=()=>{l.put(route("admin.library.update",d.resource.id),{onSuccess:()=>{}})},C=b(d.resource.type==="past_paper"),N=b(d.resource.type==="book");E(()=>l.type,n=>{C.value=n==="past_paper",N.value=n==="book"});const R=n=>({book:"ðŸ“š",past_paper:"ðŸ“„",document:"ðŸ“‹",video:"ðŸŽ¥",audio:"ðŸŽµ",presentation:"ðŸ“Š"})[n]||"ðŸ“",D=n=>{if(!n)return"No file";const e=["B","KB","MB","GB"],s=Math.floor(Math.log(n)/Math.log(1024));return Math.round(n/Math.pow(1024,s)*100)/100+" "+e[s]};return(n,e)=>(a(),o(x,null,[_(r(P),{title:`Edit Resource: ${c.resource.title}`},null,8,["title"]),_(O,{title:`Edit: ${c.resource.title}`,subtitle:"Update resource information and files"},{default:j(()=>[t("div",$,[t("div",q,[_(r(F),{href:n.route("admin.library.show",c.resource.id),class:"inline-flex items-center text-sm text-slate-600 hover:text-slate-900 transition-colors"},{default:j(()=>[...e[14]||(e[14]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),B(" Back to Resource Details ",-1)])]),_:1},8,["href"])]),t("form",{onSubmit:T(A,["prevent"]),class:"space-y-8"},[t("div",G,[e[25]||(e[25]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ“š"),t("h3",{class:"text-lg font-semibold text-slate-900"},"Basic Information")],-1)),t("div",K,[t("div",Y,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Title *",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r(l).title=s),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource title..."},null,512),[[v,r(l).title]]),r(l).errors.title?(a(),o("div",I,i(r(l).errors.title),1)):u("",!0)]),t("div",W,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),m(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>r(l).description=s),rows:"4",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource description..."},null,512),[[v,r(l).description]]),r(l).errors.description?(a(),o("div",H,i(r(l).errors.description),1)):u("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Type *",-1)),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r(l).type=s),required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[17]||(e[17]=t("option",{value:""},"Select type...",-1)),(a(!0),o(x,null,g(c.types,(s,p)=>(a(),o("option",{key:p,value:p},i(R(p))+" "+i(s),9,J))),128))],512),[[y,r(l).type]]),r(l).errors.type?(a(),o("div",Q,i(r(l).errors.type),1)):u("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Subject",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>r(l).subject_id=s),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[19]||(e[19]=t("option",{value:""},"Select subject...",-1)),(a(!0),o(x,null,g(c.subjects,s=>(a(),o("option",{key:s.id,value:s.id},i(s.name),9,X))),128))],512),[[y,r(l).subject_id]]),r(l).errors.subject_id?(a(),o("div",Z,i(r(l).errors.subject_id),1)):u("",!0)]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Category",-1)),t("div",ee,[k.value?m((a(),o("input",{key:1,"onUpdate:modelValue":e[5]||(e[5]=s=>f.value=s),type:"text",placeholder:"New category name...",class:"flex-1 px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyup:z(V,["enter"])},null,544)),[[v,f.value]]):m((a(),o("select",{key:0,"onUpdate:modelValue":e[4]||(e[4]=s=>r(l).category=s),class:"flex-1 px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[21]||(e[21]=t("option",{value:""},"Select category...",-1)),(a(!0),o(x,null,g(c.categories,s=>(a(),o("option",{key:s,value:s},i(s),9,te))),128))],512)),[[y,r(l).category]]),k.value?(a(),o("button",{key:3,type:"button",onClick:V,class:"px-4 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700"}," Add ")):(a(),o("button",{key:2,type:"button",onClick:e[6]||(e[6]=s=>k.value=!0),class:"px-4 py-3 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200"}," New "))]),r(l).errors.category?(a(),o("div",se,i(r(l).errors.category),1)):u("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Grade Level",-1)),m(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>r(l).grade_level=s),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[23]||(e[23]=t("option",{value:""},"Select grade level...",-1)),(a(!0),o(x,null,g(c.gradeLevels,s=>(a(),o("option",{key:s,value:s}," Grade "+i(s),9,le))),128))],512),[[y,r(l).grade_level]]),r(l).errors.grade_level?(a(),o("div",re,i(r(l).errors.grade_level),1)):u("",!0)])])]),C.value?(a(),o("div",oe,[e[29]||(e[29]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ“„"),t("h3",{class:"text-lg font-semibold text-slate-900"},"Past Paper Details")],-1)),t("div",ae,[t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Year",-1)),m(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>r(l).year=s),type:"number",min:"2000",max:new Date().getFullYear()+1,class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,ie),[[v,r(l).year]]),r(l).errors.year?(a(),o("div",ne,i(r(l).errors.year),1)):u("",!0)]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Exam Board",-1)),m(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>r(l).exam_board=s),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[27]||(e[27]=t("option",{value:""},"Select exam board...",-1)),(a(!0),o(x,null,g(c.examBoards,s=>(a(),o("option",{key:s,value:s},i(s),9,de))),128))],512),[[y,r(l).exam_board]]),r(l).errors.exam_board?(a(),o("div",ue,i(r(l).errors.exam_board),1)):u("",!0)])])])):u("",!0),t("div",ce,[e[30]||(e[30]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ“"),t("h3",{class:"text-lg font-semibold text-slate-900"},"Current File")],-1)),t("div",me,[t("div",pe,[t("div",null,[t("div",be,i(c.resource.file_path||"No file"),1),t("div",xe,i(D(c.resource.file_size)),1)]),t("div",fe,i(c.resource.file_type||"Unknown type"),1)])])]),t("div",ve,[e[35]||(e[35]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ“Ž"),t("h3",{class:"text-lg font-semibold text-slate-900"},"Replace Files (Optional)")],-1)),t("div",ge,[t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Replace Main File",-1)),t("input",{type:"file",onChange:M,accept:".pdf,.doc,.docx,.ppt,.pptx,.mp4,.mp3,.jpg,.jpeg,.png",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,32),e[32]||(e[32]=t("p",{class:"text-sm text-slate-500 mt-1"},"Leave blank to keep current file",-1)),r(l).errors.file?(a(),o("div",ye,i(r(l).errors.file),1)):u("",!0),w.value?(a(),o("div",we,[t("img",{src:w.value,alt:"File preview",class:"max-w-xs h-32 object-cover rounded-lg border border-slate-200"},null,8,ke)])):u("",!0)]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Replace Thumbnail",-1)),t("input",{type:"file",onChange:S,accept:"image/*",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,32),e[34]||(e[34]=t("p",{class:"text-sm text-slate-500 mt-1"},"Leave blank to keep current thumbnail",-1)),r(l).errors.thumbnail?(a(),o("div",_e,i(r(l).errors.thumbnail),1)):u("",!0),h.value?(a(),o("div",he,[t("img",{src:h.value,alt:"Thumbnail preview",class:"max-w-xs h-32 object-cover rounded-lg border border-slate-200"},null,8,je)])):u("",!0)])])]),t("div",Ue,[e[40]||(e[40]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ”’"),t("h3",{class:"text-lg font-semibold text-slate-900"},"Access & Protection Settings")],-1)),t("div",Ve,[t("div",Ce,[m(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>r(l).is_protected=s),type:"checkbox",id:"is_protected",class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,512),[[U,r(l).is_protected]]),e[36]||(e[36]=t("label",{for:"is_protected",class:"text-sm font-medium text-slate-700"}," Enable protection settings ",-1))]),r(l).is_protected?(a(),o("div",Fe,[t("div",Be,[m(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>r(l).protection_settings.prevent_download=s),type:"checkbox",id:"prevent_download",class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,512),[[U,r(l).protection_settings.prevent_download]]),e[37]||(e[37]=t("label",{for:"prevent_download",class:"text-sm text-slate-700"}," Prevent downloads (view only) ",-1))]),t("div",Me,[m(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>r(l).protection_settings.watermark=s),type:"checkbox",id:"watermark",class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,512),[[U,r(l).protection_settings.watermark]]),e[38]||(e[38]=t("label",{for:"watermark",class:"text-sm text-slate-700"}," Add watermark ",-1))]),t("div",null,[e[39]||(e[39]=t("label",{for:"time_limit",class:"block text-sm font-medium text-slate-700 mb-2"}," Access time limit (minutes) ",-1)),m(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>r(l).protection_settings.time_limit=s),type:"number",id:"time_limit",min:"0",placeholder:"Leave blank for unlimited",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[v,r(l).protection_settings.time_limit]])])])):u("",!0)])]),t("div",Se,[_(r(F),{href:n.route("admin.library.show",c.resource.id),class:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors"},{default:j(()=>[...e[41]||(e[41]=[B(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:r(l).processing,class:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 transition-colors"},[r(l).processing?(a(),o("span",Ne,"Updating...")):(a(),o("span",Re,"Update Resource"))],8,Ae)])],32)])]),_:1},8,["title"])],64))}};export{Ee as default};
