import{r as p,x as w,k as A,o as n,w as z,a as F,b as e,c as r,j as x,u as D,h as I,t as l,d as f,g as M,v as _,F as k,f as j,n as S,l as q,i as g,m as P}from"./app-1vYdlown.js";import{_ as O}from"./DashboardLayout-pUIs1nb4.js";const W={class:"max-w-7xl mx-auto px-4 py-8"},G={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},J={class:"bg-white rounded-lg shadow-sm p-6"},K={class:"flex items-center"},Q={class:"ml-4"},X={class:"text-2xl font-semibold text-gray-900"},Y={class:"bg-white rounded-lg shadow-sm p-6"},Z={class:"flex items-center"},ee={class:"ml-4"},te={class:"text-2xl font-semibold text-gray-900"},se={class:"bg-white rounded-lg shadow-sm p-6"},oe={class:"flex items-center"},le={class:"ml-4"},ae={class:"text-2xl font-semibold text-gray-900"},ne={class:"bg-white rounded-lg shadow-sm p-6"},re={class:"flex items-center"},ie={class:"ml-4"},de={class:"text-2xl font-semibold text-gray-900"},ue={class:"bg-white rounded-xl shadow-sm p-6 mb-8"},ce={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},pe={class:"bg-white rounded-xl shadow-sm"},xe={class:"overflow-x-auto"},ge={class:"w-full"},me={class:"divide-y divide-gray-200"},ve={class:"px-6 py-4 whitespace-nowrap"},fe={class:"flex items-center"},ye={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},be={class:"text-blue-600 font-medium text-sm"},he={class:"ml-4"},we={class:"text-sm font-medium text-gray-900"},_e={class:"text-sm text-gray-500"},ke={class:"px-6 py-4"},je={class:"text-sm font-medium text-gray-900"},Se={class:"text-sm text-gray-500"},Ce={class:"text-xs text-gray-400"},Ae={class:"px-6 py-4 whitespace-nowrap"},De={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Me={class:"px-6 py-4 whitespace-nowrap"},Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ue={key:0,class:"flex space-x-2"},Le=["onClick"],Ve=["onClick"],Re={key:1,class:"flex space-x-2"},Ne=["onClick"],Be={key:0,class:"px-6 py-4 border-t border-gray-200"},Ee={class:"flex items-center justify-between"},He={class:"text-sm text-gray-700"},$e={class:"flex space-x-1"},ze=["innerHTML"],Fe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ie={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},qe={class:"text-gray-600 mb-4"},Oe={key:0,class:"bg-red-50 border border-red-200 rounded p-3 mb-4"},We={class:"flex space-x-4"},Ge=["disabled"],Je={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ke={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},Qe={class:"text-gray-600 mb-4"},Xe={class:"flex space-x-4 mt-4"},Ye=["disabled"],tt={__name:"Index",props:{selections:Object},setup(u){const y=u,m=p(!1),v=p(""),i=p(null),c=p(""),d=p(!1),a=p({status:"",school:"",student:"",priority:""}),T=w(()=>{let o=y.selections?.data||[];return a.value.status&&(o=o.filter(t=>t.status===a.value.status)),a.value.school&&(o=o.filter(t=>t.secondary_school?.name?.toLowerCase().includes(a.value.school.toLowerCase()))),a.value.student&&(o=o.filter(t=>t.user?.name?.toLowerCase().includes(a.value.student.toLowerCase()))),a.value.priority&&(o=o.filter(t=>t.priority_order==a.value.priority)),o}),U=w(()=>(y.selections?.data||[]).filter(o=>o.status==="pending").length),L=w(()=>(y.selections?.data||[]).filter(o=>o.status==="confirmed"&&o.confirmed_at&&new Date(o.confirmed_at).toDateString()===new Date().toDateString()).length),V=w(()=>(y.selections?.data||[]).filter(o=>o.status==="rejected"&&o.rejected_at&&new Date(o.rejected_at).toDateString()===new Date().toDateString()).length),R=o=>{i.value=o,v.value="approve",m.value=!0},N=o=>{i.value=o,v.value="reject",c.value="",m.value=!0},B=o=>{console.log("Show details for:",o)},b=()=>{m.value=!1,i.value=null,c.value="",v.value=""},E=()=>{d.value=!0,P.patch(route("admin.school-selections.update",i.value.id),{status:"confirmed"},{onSuccess:()=>{b(),d.value=!1},onError:()=>{d.value=!1}})},H=()=>{c.value.trim()&&(d.value=!0,P.patch(route("admin.school-selections.update",i.value.id),{status:"rejected",rejection_reason:c.value},{onSuccess:()=>{b(),d.value=!1},onError:()=>{d.value=!1}}))},$=o=>new Date(o).toLocaleDateString(),h=()=>{};return(o,t)=>(n(),A(O,null,{default:z(()=>[F(D(I),{title:"School Selection Management"}),e("div",W,[t[21]||(t[21]=e("div",{class:"bg-white rounded-xl shadow-sm p-6 mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"School Selection Management"),e("p",{class:"text-gray-600"},"Review and approve student applications for exam centers")],-1)),e("div",G,[e("div",J,[e("div",K,[t[6]||(t[6]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center"},[e("span",{class:"text-yellow-600 font-semibold text-sm"},"â³")])],-1)),e("div",Q,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending Applications",-1)),e("p",X,l(U.value),1)])])]),e("div",Y,[e("div",Z,[t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center"},[e("span",{class:"text-green-600 font-semibold text-sm"},"âœ…")])],-1)),e("div",ee,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Approved Today",-1)),e("p",te,l(L.value),1)])])]),e("div",se,[e("div",oe,[t[10]||(t[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center"},[e("span",{class:"text-red-600 font-semibold text-sm"},"âŒ")])],-1)),e("div",le,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-500"},"Rejected Today",-1)),e("p",ae,l(V.value),1)])])]),e("div",ne,[e("div",re,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center"},[e("span",{class:"text-blue-600 font-semibold text-sm"},"ðŸ“Š")])],-1)),e("div",ie,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Applications",-1)),e("p",de,l(u.selections.data.length),1)])])])]),e("div",ue,[e("div",ce,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.status=s),onChange:h,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[13]||(t[13]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"confirmed"},"Confirmed",-1),e("option",{value:"rejected"},"Rejected",-1)])],544),[[M,a.value.status]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.school=s),onInput:h,type:"text",placeholder:"Search school name...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,544),[[_,a.value.school]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.student=s),onInput:h,type:"text",placeholder:"Search student name...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},null,544),[[_,a.value.student]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Priority",-1)),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.priority=s),onChange:h,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[17]||(t[17]=[e("option",{value:""},"All Priorities",-1),e("option",{value:"1"},"Priority 1",-1),e("option",{value:"2"},"Priority 2",-1),e("option",{value:"3"},"Priority 3",-1),e("option",{value:"4"},"Priority 4",-1),e("option",{value:"5"},"Priority 5",-1)])],544),[[M,a.value.priority]])])])]),e("div",pe,[t[20]||(t[20]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"School Applications")],-1)),e("div",xe,[e("table",ge,[t[19]||(t[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Student"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"School"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Priority"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Applied"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",me,[(n(!0),r(k,null,j(T.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ve,[e("div",fe,[e("div",ye,[e("span",be,l(s.user?.name?.charAt(0).toUpperCase()||"?"),1)]),e("div",he,[e("p",we,l(s.user?.name||"Unknown User"),1),e("p",_e,l(s.user?.email||"No email"),1)])])]),e("td",ke,[e("div",null,[e("p",je,l(s.secondary_school?.name||"Unknown School"),1),e("p",Se,l(s.secondary_school?.district||"Unknown")+", "+l(s.secondary_school?.region||"Unknown"),1),e("p",Ce,l(s.secondary_school?.available_slots||0)+" slots available",1)])]),e("td",Ae,[e("span",De," #"+l(s.priority_order),1)]),e("td",Me,[e("span",{class:S(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.status==="confirmed"?"bg-green-100 text-green-800":s.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},l(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)]),e("td",Pe,l($(s.created_at)),1),e("td",Te,[s.status==="pending"?(n(),r("div",Ue,[e("button",{onClick:C=>R(s),class:"bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700"}," Approve ",8,Le),e("button",{onClick:C=>N(s),class:"bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700"}," Reject ",8,Ve)])):(n(),r("div",Re,[e("button",{onClick:C=>B(s),class:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700"}," View Details ",8,Ne)]))])]))),128))])])]),u.selections?.links?(n(),r("div",Be,[e("div",Ee,[e("div",He," Showing "+l(u.selections?.from||0)+" to "+l(u.selections?.to||0)+" of "+l(u.selections?.total||0)+" results ",1),e("div",$e,[o.link?.url?(n(!0),r(k,{key:0},j(u.selections?.links||[],s=>(n(),A(D(q),{key:s.label,href:s.url,innerHTML:s.label,class:S(["px-3 py-2 text-sm border",s.active?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},null,8,["href","innerHTML","class"]))),128)):x("",!0),o.link?.url?x("",!0):(n(!0),r(k,{key:1},j(u.selections?.links||[],s=>(n(),r("span",{key:s.label,innerHTML:s.label,class:S(["px-3 py-2 text-sm border cursor-not-allowed","bg-gray-100 text-gray-400 border-gray-300"])},null,8,ze))),128))])])])):x("",!0)])]),m.value&&v.value==="approve"?(n(),r("div",Fe,[e("div",Ie,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Approve Application",-1)),e("p",qe,[t[22]||(t[22]=g(" Are you sure you want to approve ",-1)),e("strong",null,l(i.value?.user.name),1),t[23]||(t[23]=g("'s application for ",-1)),e("strong",null,l(i.value?.secondary_school.name),1),t[24]||(t[24]=g("? ",-1))]),i.value?.secondary_school.available_slots<=0?(n(),r("div",Oe,[...t[25]||(t[25]=[e("p",{class:"text-red-700 text-sm"},"âš ï¸ Warning: This school has no available slots remaining.",-1)])])):x("",!0),e("div",We,[e("button",{onClick:b,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{onClick:E,disabled:d.value,class:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50"},l(d.value?"Processing...":"Approve"),9,Ge)])])])):x("",!0),m.value&&v.value==="reject"?(n(),r("div",Je,[e("div",Ke,[t[30]||(t[30]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Reject Application",-1)),e("p",Qe,[t[27]||(t[27]=g(" Provide a reason for rejecting ",-1)),e("strong",null,l(i.value?.user.name),1),t[28]||(t[28]=g("'s application for ",-1)),e("strong",null,l(i.value?.secondary_school.name),1),t[29]||(t[29]=g(": ",-1))]),f(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>c.value=s),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter rejection reason...",required:""},null,512),[[_,c.value]]),e("div",Xe,[e("button",{onClick:b,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{onClick:H,disabled:d.value||!c.value.trim(),class:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50"},l(d.value?"Processing...":"Reject"),9,Ye)])])])):x("",!0)]),_:1}))}};export{tt as default};
