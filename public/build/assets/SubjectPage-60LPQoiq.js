import{x as E,r as d,A as ie,K as ae,c as n,o as l,a as N,b as e,u as b,h as re,j as v,w as P,l as F,n as x,t as a,F as C,f as I,G as O,d as g,v as M,e as de,q as W,g as ue,k as K,i as ce,L as G}from"./app-CxoIK60P.js";import{C as ve}from"./ChunkedVideoUpload-CtQc8b4b.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const xe={class:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 font-sans text-slate-800"},pe={class:"h-16 bg-white/90 backdrop-blur-xl border-b border-slate-200/50 px-4 md:px-6 flex items-center justify-between relative z-50"},me={class:"flex items-center space-x-4 flex-1 min-w-0"},he={class:"min-w-0 flex-1"},fe={class:"text-sm md:text-lg font-bold text-slate-800 truncate"},be={class:"flex items-center space-x-3 flex-shrink-0"},ge=["disabled"],we={class:"text-right hidden sm:block"},ke={class:"text-sm font-semibold text-slate-800"},ye={class:"text-xs text-slate-500"},je=["src","alt"],_e={class:"flex h-[calc(100vh-64px)]"},Ce={class:"p-4 border-b border-slate-200/50"},Me={class:"text-sm text-slate-600 mt-1"},Le={class:"p-4 border-b border-slate-200/50"},Ve={class:"flex items-center justify-between text-sm"},De={class:"text-slate-800 font-medium"},Te={class:"flex-1 overflow-y-auto"},Ae=["onClick"],Be={class:"flex items-center justify-between"},ze={class:"flex items-center space-x-3"},Ie={class:"w-6 h-6 border-2 border-slate-300 rounded-full flex items-center justify-center"},Ue={key:0,class:"w-3 h-3 bg-green-500 rounded-full"},Se={class:"text-slate-800 font-medium"},$e={class:"text-xs text-slate-500"},He={key:0,class:"bg-slate-50"},qe={class:"flex items-center space-x-3"},Ee={class:"flex-shrink-0"},Ne={key:0,class:"w-5 h-5 text-indigo-500"},Pe={key:1,class:"w-5 h-5 text-green-500"},Fe={key:2,class:"w-5 h-5 text-slate-400"},Oe={class:"flex-1 min-w-0"},We={class:"flex items-center justify-between"},Ke={class:"min-w-0 flex-1"},Ge={class:"flex items-center space-x-2 mt-1"},Qe={key:0,class:"text-xs text-slate-500"},Re={key:1,class:"text-xs text-slate-500"},Xe={key:2,class:"text-xs text-slate-500"},Ze={class:"flex-shrink-0 ml-2"},Je={key:0,class:"w-5 h-5 text-green-500"},Ye={key:1,class:"w-5 h-5 border-2 border-slate-300 rounded-full"},et={class:"flex-1 flex"},tt={class:"flex-1 flex flex-col bg-gradient-to-br from-slate-50 to-blue-50"},st={class:"bg-white/80 backdrop-blur-xl border-b border-slate-200/50 p-4"},ot={class:"flex items-center justify-between"},lt={class:"text-xl font-bold text-slate-800"},nt={class:"text-sm text-slate-600 mt-1"},it={class:"flex items-center space-x-3"},at={class:"text-right"},rt={class:"text-sm text-slate-600"},dt={class:"flex-1 bg-slate-800 relative"},ut={class:"w-full h-full flex items-center justify-center"},ct={class:"text-center text-white px-4"},vt={class:"text-6xl text-white/20 mb-4"},xt={class:"p-4 border-b border-slate-200/50 bg-gradient-to-r from-green-50 to-emerald-50"},pt={class:"flex items-center justify-between"},mt={class:"flex items-center space-x-3"},ht={class:"text-lg font-bold text-slate-800"},ft={class:"text-sm"},bt={class:"text-xs opacity-75 mt-1"},gt={class:"p-4 border-t border-slate-200/50 bg-slate-50"},wt={class:"text-xs text-slate-600 mb-2 italic"},kt={class:"flex space-x-2"},yt=["placeholder"],jt={key:2,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},_t={class:"bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-slate-200/50 max-w-md w-full mx-4"},Ct={class:"space-y-4"},Mt={key:3,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},Lt={class:"bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-slate-200/50 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Vt={class:"space-y-6"},Dt=["value"],Tt={key:0,class:"space-y-3"},At={key:2,class:"mt-3 p-4 bg-green-50 border border-green-200 rounded-xl"},Bt={class:"flex items-center justify-between"},zt={class:"flex items-center space-x-3"},It={class:"text-xs text-green-600"},Ut={key:0,class:"ml-2"},St={class:"flex justify-end space-x-4 mt-8"},$t=["disabled"],Ht={key:0},qt={key:1,class:"flex items-center space-x-2"},Ft={__name:"SubjectPage",props:{auth:Object,subject:Object},setup(c){const u=c,w=u.auth?.user||{name:"Guest",role:"guest",profile_photo_url:null},Q=E(()=>w.role==="admin"||w.role==="teacher"),D=d(!0),L=d(!1),h=d(new Set),k=d(null),y=d(u.subject?.topics?.[0]?.id||null),T=d(!1),A=d(!1),p=d({name:"",description:""}),i=d({title:"",description:"",notes:"",videoData:null}),V=d(!1),R=d(0),m=d(!1),X=E(()=>u.subject?.topics?.find(o=>o.id===y.value)),j=d(!0),U=d([{id:1,sender:"ai",message:`Hi! I'm your AI ${u.subject.name} tutor. Ask me anything about the lesson or ${u.subject.name.toLowerCase()} topics!`,timestamp:new Date},{id:2,sender:"ai",message:`Welcome to the ${u.subject.name} lesson! I'm here to help you understand any concepts. What would you like to know about ${u.subject.name.toLowerCase()} techniques or practices?`,timestamp:new Date}]),_=d(""),f=d(null),S=()=>{D.value=!D.value},$=()=>{L.value=window.innerWidth<768},Z=o=>{h.value.has(o)?h.value.delete(o):h.value.add(o)},B=o=>o.video_path?"video":o.type==="quiz"?"quiz":o.type==="text"?"text":"document",H=o=>Math.random()>.5?100:0,z=()=>{j.value=!j.value},q=()=>{_.value.trim()&&(U.value.push({id:Date.now(),sender:"user",message:_.value.trim(),timestamp:new Date}),_.value.trim(),_.value="",setTimeout(()=>{U.value.push({id:Date.now(),sender:"ai",message:J(),timestamp:new Date}),f.value&&(f.value.scrollTop=f.value.scrollHeight)},1e3))},J=o=>{const t=u.subject.name.toLowerCase(),s=[`That's a great question about ${t}! Let me help you with that concept.`,`In ${t} practices, this relates to fundamental principles and techniques.`,`This topic is fundamental to understanding ${t} concepts.`,`Let me explain how this applies to ${t} techniques and practices.`,`This concept is important for understanding ${t} fundamentals.`];return s[Math.floor(Math.random()*s.length)]},Y=async()=>{try{const o=await G.post(route("topics.store"),{subject_id:u.subject.id,name:p.value.name,description:p.value.description});o.data.success&&(u.subject.topics.push(o.data.topic),p.value={name:"",description:""},T.value=!1,y.value=o.data.topic.id,h.value.add(o.data.topic.id))}catch(o){console.error("Error adding topic:",o),alert("Error adding topic. Please try again.")}},ee=()=>{p.value={name:"",description:""},T.value=!1},te=async()=>{if(!V.value)try{V.value=!0;const o=new FormData;o.append("topic_id",y.value),o.append("title",i.value.title),o.append("description",i.value.description),o.append("notes",i.value.notes),i.value.videoData&&(o.append("video_path",i.value.videoData.filePath),o.append("video_filename",i.value.videoData.fileName||"uploaded_video.mp4"),i.value.videoData.duration&&o.append("duration_minutes",i.value.videoData.duration),i.value.videoData.storageDisk&&o.append("storage_disk",i.value.videoData.storageDisk));const t=await G.post(route("lessons.store"),o);if(t.data.success){const s=u.subject.topics.find(r=>r.id===y.value);s&&(s.lessons||(s.lessons=[]),s.lessons.push(t.data.lesson)),i.value={title:"",description:"",notes:"",videoData:null},A.value=!1,m.value=!1}}catch(o){console.error("Error adding lesson:",o),alert("Error adding lesson. Please try again.")}finally{V.value=!1,R.value=0}},se=o=>{i.value.videoData=o,m.value=!1},oe=o=>{console.error("Video upload error:",o),alert("Video upload failed. Please try again.")},le=()=>{i.value.videoData=null,m.value=!1},ne=()=>{i.value={title:"",description:"",notes:"",videoData:null},A.value=!1,m.value=!1};return ie(()=>{$(),window.addEventListener("resize",$),u.subject?.topics&&u.subject.topics.forEach(o=>{h.value.add(o.id)}),u.subject?.topics?.[0]?.lessons?.[0]&&(k.value=u.subject.topics[0].lessons[0]),ae(()=>{f.value&&(f.value.scrollTop=f.value.scrollHeight)})}),(o,t)=>(l(),n(C,null,[N(b(re),{title:c.subject.name},null,8,["title"]),e("div",xe,[e("header",pe,[e("div",me,[N(b(F),{href:o.route("subjects.index"),class:"p-2 hover:bg-slate-100 rounded-xl transition-colors duration-200 flex-shrink-0"},{default:P(()=>[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),e("button",{onClick:S,class:"p-2 hover:bg-slate-100 rounded-xl transition-colors duration-200 lg:hidden"},[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("button",{onClick:z,class:x(["p-2 rounded-xl transition-all duration-200 lg:hidden",j.value?"bg-green-100 text-green-600":"hover:bg-slate-100 text-slate-600"])},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.645C5.525 14.88 7.42 16 9 16c2.31 0 4.792-.88 6-2.5l-.5-1.5"})],-1)])],2),e("div",he,[e("h1",fe,a(c.subject?.name),1)])]),e("div",be,[Q.value?(l(),n(C,{key:0},[e("button",{onClick:t[0]||(t[0]=s=>T.value=!0),class:"hidden md:flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-medium hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg text-sm"},[...t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",null,"Add Topic",-1)])]),e("button",{onClick:t[1]||(t[1]=s=>A.value=!0),disabled:!X.value&&!(c.subject?.topics?.length>0),class:"hidden md:flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm"},[...t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),e("span",null,"Add Lesson",-1)])],8,ge)],64)):v("",!0),e("button",{onClick:z,class:x(["p-2 rounded-xl transition-all duration-200 hidden lg:block",j.value?"bg-green-100 text-green-600":"hover:bg-slate-100 text-slate-600"])},[...t[16]||(t[16]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.645C5.525 14.88 7.42 16 9 16c2.31 0 4.792-.88 6-2.5l-.5-1.5"})],-1)])],2),e("div",we,[e("p",ke,a(b(w).name),1),e("p",ye,a(b(w).role),1)]),e("img",{src:b(w).profile_photo_url||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face&facepad=2&bg=white",alt:b(w).name,class:"h-8 w-8 md:h-10 md:w-10 rounded-xl ring-2 ring-white shadow-md"},null,8,je)])]),e("div",_e,[e("div",{class:x(["bg-white/90 backdrop-blur-xl border-r border-slate-200/50 transition-all duration-300 overflow-hidden flex flex-col",D.value?"w-80":"w-0",L.value?"fixed inset-y-16 left-0 z-40 shadow-xl":""])},[e("div",Ce,[e("div",{class:"flex items-center justify-between"},[t[18]||(t[18]=e("h2",{class:"text-lg font-bold text-slate-800"},"Subject Content",-1)),e("button",{onClick:S,class:"p-1 hover:bg-slate-100 rounded-lg lg:hidden"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Me,a(c.subject.topics?.length||0)+"/"+a(c.subject.topics?.length||0),1)]),e("div",Le,[e("div",Ve,[t[19]||(t[19]=e("span",{class:"text-slate-600"},"Progress",-1)),e("span",De,"0/"+a(c.subject.topics?.reduce((s,r)=>s+(r.lessons?.length||0),0)||0)+" lessons",1)]),t[20]||(t[20]=e("div",{class:"mt-2 bg-slate-200 rounded-full h-2"},[e("div",{class:"bg-indigo-500 h-2 rounded-full",style:{width:"0%"}})],-1))]),e("div",Te,[(l(!0),n(C,null,I(c.subject?.topics||[],s=>(l(),n("div",{key:s.id,class:"border-b border-slate-200/50"},[e("button",{onClick:r=>Z(s.id),class:"w-full p-4 text-left hover:bg-slate-100 transition-colors duration-200"},[e("div",Be,[e("div",ze,[e("div",Ie,[H()===100?(l(),n("div",Ue)):v("",!0)]),e("div",null,[e("h3",Se,"Topic "+a(s.order_index+1||1),1),e("p",$e,"0/"+a(s.lessons?.length||0),1)])]),(l(),n("svg",{class:x(["w-5 h-5 text-slate-400 transform transition-transform duration-200",h.value.has(s.id)?"rotate-90":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[21]||(t[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))])],8,Ae),h.value.has(s.id)?(l(),n("div",He,[(l(!0),n(C,null,I(s.lessons||[],r=>(l(),K(b(F),{key:r.id,href:o.route("lessons.show",r.id),class:x(["block py-3 px-6 pl-12 border-l-4 transition-all duration-200 hover:bg-slate-100",k.value?.id===r.id?"border-indigo-500 bg-indigo-50":"border-transparent"])},{default:P(()=>[e("div",qe,[e("div",Ee,[B(r)==="video"?(l(),n("div",Ne,[...t[22]||(t[22]=[e("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})],-1)])])):B(r)==="quiz"?(l(),n("div",Pe,[...t[23]||(t[23]=[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])])):(l(),n("div",Fe,[...t[24]||(t[24]=[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",Oe,[e("div",We,[e("div",Ke,[e("p",{class:x(["text-sm font-medium truncate",k.value?.id===r.id?"text-indigo-600":"text-slate-800"])},a(s.order_index+1||1)+"."+a(r.order_index+1||1)+" "+a(r.title),3),e("div",Ge,[B(r)==="video"?(l(),n("span",Qe," MULTIMEDIA ")):B(r)==="quiz"?(l(),n("span",Re," QUIZ - 18 QUESTIONS ")):(l(),n("span",Xe," TEXT "))])]),e("div",Ze,[H(r)===100?(l(),n("div",Je,[...t[25]||(t[25]=[e("svg",{fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):(l(),n("div",Ye))])])])])]),_:2},1032,["href","class"]))),128))])):v("",!0)]))),128))])],2),e("div",et,[e("div",tt,[e("div",st,[e("div",ot,[e("div",null,[e("h1",lt,a(k.value?.title||"1.1 Lesson Introduction"),1),e("p",nt,a(k.value?.topic?.name||"Topic 1"),1)]),e("div",it,[e("div",at,[e("p",rt,"Lesson "+a(k.value?.order_index+1||1),1)]),t[26]||(t[26]=e("button",{class:"p-2 hover:bg-slate-100 rounded-xl transition-colors duration-200"},[e("svg",{class:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})])],-1))])])]),e("div",dt,[e("div",ut,[e("div",ct,[e("div",vt,a(c.subject.name.charAt(0)),1),t[27]||(t[27]=O('<h3 class="text-2xl font-medium mb-2 text-white/80">Topic 1</h3><h2 class="text-4xl font-bold mb-8">Lesson Introduction</h2><div class="mt-8 flex items-center justify-center space-x-4"><button class="w-14 h-14 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></button></div><div class="mt-6 flex items-center justify-between max-w-lg mx-auto"><span class="text-sm text-white/80">36:08</span><div class="flex-1 mx-4 h-1 bg-white/20 rounded-full"><div class="h-full bg-white/70 rounded-full" style="width:35%;"></div></div><div class="flex space-x-1"><div class="w-2 h-2 bg-white/60 rounded-sm"></div><div class="w-2 h-2 bg-white/60 rounded-sm"></div><div class="w-2 h-2 bg-white/60 rounded-sm"></div><div class="w-2 h-2 bg-white/60 rounded-sm"></div><div class="w-2 h-2 bg-white/60 rounded-sm"></div><div class="w-2 h-2 bg-white/60 rounded-sm"></div></div></div>',4))])])])]),e("div",{class:x(["bg-white border-l border-slate-200/50 transition-all duration-300 overflow-hidden flex flex-col",j.value?"w-96":"w-0",L.value?"fixed inset-y-16 right-0 z-40 shadow-xl":""])},[e("div",xt,[e("div",pt,[e("div",mt,[t[29]||(t[29]=e("div",{class:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),e("div",null,[e("h3",ht,"AI "+a(c.subject?.name)+" Tutor",1),t[28]||(t[28]=e("div",{class:"flex items-center space-x-1"},[e("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),e("span",{class:"text-sm text-green-600 font-medium"},"Online")],-1))])]),e("button",{onClick:z,class:"p-1 hover:bg-white/50 rounded-lg"},[...t[30]||(t[30]=[e("svg",{class:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",{ref_key:"chatContainer",ref:f,class:"flex-1 overflow-y-auto p-4 space-y-4"},[(l(!0),n(C,null,I(U.value,s=>(l(),n("div",{key:s.id,class:x(["flex",s.sender==="user"?"justify-end":"justify-start"])},[e("div",{class:x(["max-w-xs lg:max-w-md px-4 py-3 rounded-2xl",s.sender==="user"?"bg-indigo-500 text-white rounded-br-md":"bg-green-500 text-white rounded-bl-md"])},[e("p",ft,a(s.message),1),e("p",bt,a(s.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)],2)],2))),128))],512),e("div",gt,[e("p",wt," Hi! I'm your AI "+a(c.subject.name)+" tutor. Ask me anything about the lesson or "+a(c.subject.name.toLowerCase())+" topics! ",1),e("div",kt,[g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),onKeyup:de(q,["enter"]),type:"text",placeholder:`Ask me anything about ${c.subject.name.toLowerCase()}...`,class:"flex-1 px-3 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm"},null,40,yt),[[M,_.value]]),e("button",{onClick:q,class:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl transition-colors duration-200"},[...t[31]||(t[31]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])])])])],2)])]),L.value&&D.value?(l(),n("div",{key:0,onClick:S,class:"fixed inset-0 bg-black/50 z-30 lg:hidden"})):v("",!0),L.value&&j.value?(l(),n("div",{key:1,onClick:z,class:"fixed inset-0 bg-black/50 z-30 lg:hidden"})):v("",!0),T.value?(l(),n("div",jt,[e("div",_t,[t[35]||(t[35]=e("h3",{class:"text-xl font-bold text-slate-800 mb-6"},"Add New Topic",-1)),e("form",{onSubmit:W(Y,["prevent"])},[e("div",Ct,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Topic Name*",-1)),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>p.value.name=s),type:"text",required:"",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:bg-white transition-all duration-200",placeholder:"e.g. Introduction, Basic Concepts"},null,512),[[M,p.value.name]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>p.value.description=s),rows:"3",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:bg-white transition-all duration-200",placeholder:"Brief description of this topic..."},null,512),[[M,p.value.description]])])]),e("div",{class:"flex justify-end space-x-4 mt-6"},[e("button",{type:"button",onClick:ee,class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-medium transition-all duration-200"}," Cancel "),t[34]||(t[34]=e("button",{type:"submit",class:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-medium hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg"}," Add Topic ",-1))])],32)])])):v("",!0),A.value?(l(),n("div",Mt,[e("div",Lt,[t[46]||(t[46]=e("h3",{class:"text-xl font-bold text-slate-800 mb-6"},"Add New Lesson",-1)),e("form",{onSubmit:W(te,["prevent"])},[e("div",Vt,[e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Select Topic*",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>y.value=s),required:"",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200"},[(l(!0),n(C,null,I(c.subject?.topics,s=>(l(),n("option",{key:s.id,value:s.id},a(s.name),9,Dt))),128))],512),[[ue,y.value]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Lesson Title*",-1)),g(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>i.value.title=s),type:"text",required:"",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"e.g. Introduction to Algebra"},null,512),[[M,i.value.title]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>i.value.description=s),rows:"3",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"What will students learn in this lesson?"},null,512),[[M,i.value.description]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Video File",-1)),!i.value.videoData&&!m.value?(l(),n("div",Tt,[e("button",{onClick:t[8]||(t[8]=s=>m.value=!0),type:"button",class:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-dashed border-blue-300 rounded-2xl p-6 hover:border-blue-400 hover:bg-gradient-to-r hover:from-blue-100 hover:to-indigo-100 transition-all duration-200"},[...t[39]||(t[39]=[O('<div class="text-center"><svg class="mx-auto h-12 w-12 text-blue-400" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><p class="mt-2 text-sm font-medium text-slate-700">Upload Video File</p><p class="text-xs text-slate-500">Fast chunked upload with compression</p><p class="text-xs text-slate-400 mt-1">MP4, MOV, AVI, WMV, MKV up to 1GB</p></div>',1)])])])):v("",!0),m.value?(l(),K(ve,{key:1,onUploadSuccess:se,onUploadError:oe,onCancel:t[9]||(t[9]=s=>m.value=!1),class:"mt-3"})):v("",!0),i.value.videoData?(l(),n("div",At,[e("div",Bt,[e("div",zt,[t[41]||(t[41]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1)),e("div",null,[t[40]||(t[40]=e("p",{class:"text-sm font-medium text-green-800"},"Video uploaded successfully!",-1)),e("p",It,[ce(a(i.value.videoData.fileName)+" ",1),i.value.videoData.duration?(l(),n("span",Ut,a(i.value.videoData.duration)+" min",1)):v("",!0)])])]),e("button",{onClick:le,type:"button",class:"text-green-600 hover:text-green-800"},[...t[42]||(t[42]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):v("",!0)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Lesson Notes",-1)),g(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>i.value.notes=s),rows:"4",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"Additional notes, resources, or homework for this lesson..."},null,512),[[M,i.value.notes]])])]),e("div",St,[e("button",{type:"button",onClick:ne,class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-medium transition-all duration-200"}," Cancel "),e("button",{type:"submit",disabled:V.value,class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[V.value?(l(),n("span",qt,[...t[45]||(t[45]=[e("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),e("path",{fill:"currentColor",class:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"Saving...",-1)])])):(l(),n("span",Ht,"Add Lesson"))],8,$t)])],32)])])):v("",!0)])],64))}};export{Ft as default};
