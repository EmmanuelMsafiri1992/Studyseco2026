import{r as h,p as M,c as d,o as u,a as o,u as l,h as B,w as v,b as t,q as x,d as c,F as w,f as P,t as b,g as k,v as _,j as y,y as S,l as q,i as V}from"./app-BTmW7o6y.js";import{_ as F}from"./DashboardLayout-jdGcdR74.js";import{_ as a}from"./InputError-BEO9mLXg.js";import{_ as r,a as C}from"./TextInput-9h7A0Brd.js";import{P as N}from"./PrimaryButton-Cq3c_zb3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"max-w-4xl mx-auto"},z={class:"mb-6"},O=["value"],$={class:"mb-6"},E={class:"mb-6"},I={class:"mb-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},L={class:"mb-6"},R={key:0,class:"mb-2 p-3 bg-blue-50 rounded-lg flex items-center justify-between"},X={class:"flex items-center gap-3"},Q=["href"],Z={key:1,class:"mt-2"},G={key:2,class:"mt-2 flex items-center gap-3 p-3 bg-slate-50 rounded-lg"},J={class:"flex-1"},K={class:"text-sm font-medium text-slate-900"},W={class:"mb-6 space-y-4"},Y={class:"flex items-center"},tt={class:"flex items-center justify-between pt-6 border-t border-slate-200"},et={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},rt={__name:"Edit",props:{assignment:Object,subjects:Array},setup(m){const n=m,p=h(null),f=h(n.assignment.attachment_url?n.assignment.attachment_url.split("/").pop():null),s=M({subject_id:n.assignment.subject_id,title:n.assignment.title,description:n.assignment.description,instructions:n.assignment.instructions,total_points:n.assignment.total_points,due_date:n.assignment.due_date?n.assignment.due_date.slice(0,16):"",status:n.assignment.status,allow_late_submissions:n.assignment.allow_late_submissions||!1,attachment:null}),j=()=>{p.value.click()},A=()=>{const g=p.value.files[0];g&&(s.attachment=g,f.value=g.name)},U=()=>{s.attachment=null,f.value=null,p.value&&(p.value.value=null)},D=()=>{s.post(route("teacher.assignments.update",n.assignment.id),{preserveScroll:!0})};return(g,e)=>(u(),d(w,null,[o(l(B),{title:"Edit Assignment"}),o(F,{title:"Edit Assignment",subtitle:`Update ${m.assignment.title}`},{default:v(()=>[t("div",T,[t("form",{onSubmit:x(D,["prevent"]),class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8"},[t("div",z,[o(r,{for:"subject_id",value:"Subject *"}),c(t("select",{id:"subject_id","onUpdate:modelValue":e[0]||(e[0]=i=>l(s).subject_id=i),class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[e[8]||(e[8]=t("option",{value:""},"Select a subject",-1)),(u(!0),d(w,null,P(m.subjects,i=>(u(),d("option",{key:i.id,value:i.id},b(i.name),9,O))),128))],512),[[k,l(s).subject_id]]),o(a,{class:"mt-2",message:l(s).errors.subject_id},null,8,["message"])]),t("div",$,[o(r,{for:"title",value:"Assignment Title *"}),o(C,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:l(s).title,"onUpdate:modelValue":e[1]||(e[1]=i=>l(s).title=i),placeholder:"e.g., Chapter 5 Review Questions",required:""},null,8,["modelValue"]),o(a,{class:"mt-2",message:l(s).errors.title},null,8,["message"])]),t("div",E,[o(r,{for:"description",value:"Description *"}),c(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=i=>l(s).description=i),rows:"4",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Describe what students need to do...",required:""},null,512),[[_,l(s).description]]),o(a,{class:"mt-2",message:l(s).errors.description},null,8,["message"])]),t("div",I,[o(r,{for:"instructions",value:"Instructions (Optional)"}),c(t("textarea",{id:"instructions","onUpdate:modelValue":e[3]||(e[3]=i=>l(s).instructions=i),rows:"4",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Additional instructions, guidelines, or requirements..."},null,512),[[_,l(s).instructions]]),o(a,{class:"mt-2",message:l(s).errors.instructions},null,8,["message"])]),t("div",H,[t("div",null,[o(r,{for:"total_points",value:"Total Points *"}),o(C,{id:"total_points",type:"number",class:"mt-1 block w-full",modelValue:l(s).total_points,"onUpdate:modelValue":e[4]||(e[4]=i=>l(s).total_points=i),min:"1",max:"1000",required:""},null,8,["modelValue"]),o(a,{class:"mt-2",message:l(s).errors.total_points},null,8,["message"])]),t("div",null,[o(r,{for:"due_date",value:"Due Date *"}),c(t("input",{id:"due_date",type:"datetime-local","onUpdate:modelValue":e[5]||(e[5]=i=>l(s).due_date=i),class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[_,l(s).due_date]]),o(a,{class:"mt-2",message:l(s).errors.due_date},null,8,["message"])])]),t("div",L,[o(r,{for:"attachment",value:"Attachment (Optional)"}),e[13]||(e[13]=t("p",{class:"text-xs text-slate-500 mb-2"},"Upload assignment files, worksheets, or reference materials (PDF, DOC, DOCX, TXT, ZIP - Max 10MB)",-1)),m.assignment.attachment_url&&!l(s).attachment?(u(),d("div",R,[t("div",X,[e[10]||(e[10]=t("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-slate-900"},"Current attachment",-1)),t("a",{href:m.assignment.attachment_url,target:"_blank",class:"text-xs text-blue-600 hover:underline"},"Download file",8,Q)])])])):y("",!0),t("input",{type:"file",ref_key:"attachmentInput",ref:p,class:"hidden",onChange:A,accept:".pdf,.doc,.docx,.txt,.zip"},null,544),f.value?(u(),d("div",G,[e[12]||(e[12]=t("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("div",J,[t("p",K,b(f.value),1)]),t("button",{type:"button",onClick:U,class:"text-red-600 hover:text-red-800"},[...e[11]||(e[11]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):(u(),d("div",Z,[t("button",{type:"button",onClick:x(j,["prevent"]),class:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors"},b(m.assignment.attachment_url?"Replace File":"Choose File"),1)])),o(a,{class:"mt-2",message:l(s).errors.attachment},null,8,["message"])]),t("div",W,[t("div",null,[o(r,{for:"status",value:"Status *"}),c(t("select",{id:"status","onUpdate:modelValue":e[6]||(e[6]=i=>l(s).status=i),class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[...e[14]||(e[14]=[t("option",{value:"draft"},"Draft (Not visible to students)",-1),t("option",{value:"published"},"Published (Visible to students)",-1),t("option",{value:"closed"},"Closed (No submissions allowed)",-1)])],512),[[k,l(s).status]]),o(a,{class:"mt-2",message:l(s).errors.status},null,8,["message"])]),t("div",Y,[c(t("input",{id:"allow_late_submissions",type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=i=>l(s).allow_late_submissions=i),class:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[S,l(s).allow_late_submissions]]),e[15]||(e[15]=t("label",{for:"allow_late_submissions",class:"ml-2 text-sm text-slate-700"}," Allow late submissions after due date ",-1))])]),t("div",tt,[o(l(q),{href:g.route("teacher.assignments.index"),class:"px-4 py-2 text-slate-700 hover:text-slate-900 transition-colors"},{default:v(()=>[...e[16]||(e[16]=[V(" Cancel ",-1)])]),_:1},8,["href"]),o(N,{disabled:l(s).processing},{default:v(()=>[l(s).processing?(u(),d("svg",et,[...e[17]||(e[17]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):y("",!0),V(" "+b(l(s).processing?"Updating...":"Update Assignment"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["subtitle"])],64))}};export{rt as default};
