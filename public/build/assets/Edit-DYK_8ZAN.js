import{p as S,r as j,c as r,o as a,a as i,u as o,h as P,w as C,b as e,j as k,q as Q,d as c,F as w,f as h,t as p,g as q,v as _,y as A,i as V,n as L,m as N}from"./app-D96eRH-T.js";import{_ as H}from"./DashboardLayout-uEOckUoG.js";import{_ as z}from"./InputError-D0eTNgV3.js";import{_ as u,a as y}from"./TextInput-rR4zpKNj.js";import{P as M}from"./PrimaryButton-C4LgD79P.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"max-w-6xl mx-auto space-y-6"},I={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K=["value"],R={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={class:"space-y-3"},Y={class:"flex items-center gap-6"},Z={class:"flex items-center"},ee={class:"flex items-center"},te={class:"flex justify-end pt-4 border-t border-slate-200"},se={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8"},oe={class:"flex justify-between items-center mb-6"},le={class:"text-lg font-semibold text-slate-900"},ie={key:0,class:"space-y-4"},ne={class:"flex justify-between items-start"},re={class:"flex-1"},ae={class:"flex items-center gap-2 mb-2"},de={class:"text-sm font-medium text-slate-500"},ue={class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded"},ce={class:"text-sm text-slate-600"},pe={class:"text-slate-900 font-medium mb-2"},me={key:0,class:"ml-4 space-y-1"},fe={key:0,class:"text-xs"},ve={key:1,class:"text-sm text-slate-600 ml-4"},be={class:"font-medium text-green-600"},ge={class:"flex items-center gap-2 ml-4"},_e=["onClick"],xe=["onClick"],we={key:1,class:"text-center py-8 text-slate-500"},ye={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ke={class:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},he={class:"p-6 border-b border-slate-200"},qe={class:"flex items-center justify-between"},ze={class:"text-xl font-semibold text-slate-900"},Ve={key:0},Ce={class:"space-y-2 mt-2"},Ue=["onUpdate:modelValue","placeholder"],Se=["onClick"],je=["value"],Qe={class:"flex items-center justify-end gap-3 pt-4 border-t border-slate-200"},Te={__name:"Edit",props:{quiz:Object,subjects:Array},setup(b){const d=b,n=S({subject_id:d.quiz.subject_id,title:d.quiz.title,description:d.quiz.description,duration_minutes:d.quiz.duration_minutes,total_points:d.quiz.total_points,passing_score:d.quiz.passing_score,show_correct_answers:d.quiz.show_correct_answers,shuffle_questions:d.quiz.shuffle_questions,max_attempts:d.quiz.max_attempts,status:d.quiz.status,available_from:d.quiz.available_from?d.quiz.available_from.slice(0,16):"",available_until:d.quiz.available_until?d.quiz.available_until.slice(0,16):""}),l=S({question:"",type:"multiple_choice",options:["","","",""],correct_answer:"",explanation:"",points:10}),x=j(null),g=j(!1),$=()=>{n.put(route("teacher.quizzes.update",d.quiz.id))},E=()=>{l.reset(),l.type="multiple_choice",l.options=["","","",""],l.points=10,x.value=null,g.value=!0},B=m=>{x.value=m,l.question=m.question,l.type=m.type,l.options=m.options||["","","",""],l.correct_answer=m.correct_answer,l.explanation=m.explanation||"",l.points=m.points,g.value=!0},F=()=>{x.value?l.put(route("teacher.quizzes.questions.update",[d.quiz.id,x.value.id]),{preserveScroll:!0,onSuccess:()=>{g.value=!1,l.reset()}}):l.post(route("teacher.quizzes.questions.add",d.quiz.id),{preserveScroll:!0,onSuccess:()=>{g.value=!1,l.reset()}})},T=m=>{confirm("Delete this question?")&&N.delete(route("teacher.quizzes.questions.delete",[d.quiz.id,m.id]),{preserveScroll:!0})},O=()=>{l.options.push("")},D=m=>{l.options.splice(m,1)};return(m,t)=>(a(),r(w,null,[i(o(P),{title:"Edit Quiz"}),i(H,{title:`Edit Quiz: ${b.quiz.title}`,subtitle:"Update quiz settings and manage questions"},{default:C(()=>[e("div",G,[e("div",I,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-slate-900 mb-6"},"Quiz Settings",-1)),e("form",{onSubmit:Q($,["prevent"]),class:"space-y-6"},[e("div",J,[e("div",null,[i(u,{for:"subject_id",value:"Subject *"}),c(e("select",{id:"subject_id","onUpdate:modelValue":t[0]||(t[0]=s=>o(n).subject_id=s),class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[(a(!0),r(w,null,h(b.subjects,s=>(a(),r("option",{key:s.id,value:s.id},p(s.name),9,K))),128))],512),[[q,o(n).subject_id]]),i(z,{class:"mt-2",message:o(n).errors.subject_id},null,8,["message"])]),e("div",null,[i(u,{for:"title",value:"Quiz Title *"}),i(y,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:o(n).title,"onUpdate:modelValue":t[1]||(t[1]=s=>o(n).title=s),required:""},null,8,["modelValue"]),i(z,{class:"mt-2",message:o(n).errors.title},null,8,["message"])])]),e("div",null,[i(u,{for:"description",value:"Description"}),c(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=s=>o(n).description=s),rows:"2",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,o(n).description]])]),e("div",R,[e("div",null,[i(u,{for:"duration_minutes",value:"Duration (min) *"}),i(y,{id:"duration_minutes",type:"number",class:"mt-1 block w-full",modelValue:o(n).duration_minutes,"onUpdate:modelValue":t[3]||(t[3]=s=>o(n).duration_minutes=s),min:"1",required:""},null,8,["modelValue"])]),e("div",null,[i(u,{for:"total_points",value:"Total Points *"}),i(y,{id:"total_points",type:"number",class:"mt-1 block w-full",modelValue:o(n).total_points,"onUpdate:modelValue":t[4]||(t[4]=s=>o(n).total_points=s),min:"1",required:""},null,8,["modelValue"])]),e("div",null,[i(u,{for:"passing_score",value:"Passing Score *"}),i(y,{id:"passing_score",type:"number",class:"mt-1 block w-full",modelValue:o(n).passing_score,"onUpdate:modelValue":t[5]||(t[5]=s=>o(n).passing_score=s),min:"0",required:""},null,8,["modelValue"])])]),e("div",W,[e("div",null,[i(u,{for:"available_from",value:"Available From"}),c(e("input",{id:"available_from",type:"datetime-local","onUpdate:modelValue":t[6]||(t[6]=s=>o(n).available_from=s),class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,o(n).available_from]])]),e("div",null,[i(u,{for:"available_until",value:"Available Until"}),c(e("input",{id:"available_until",type:"datetime-local","onUpdate:modelValue":t[7]||(t[7]=s=>o(n).available_until=s),class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,o(n).available_until]])])]),e("div",X,[e("div",null,[i(u,{for:"max_attempts",value:"Max Attempts *"}),i(y,{id:"max_attempts",type:"number",class:"mt-1 block w-full",modelValue:o(n).max_attempts,"onUpdate:modelValue":t[8]||(t[8]=s=>o(n).max_attempts=s),min:"1",required:""},null,8,["modelValue"])]),e("div",Y,[e("label",Z,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>o(n).show_correct_answers=s),class:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[A,o(n).show_correct_answers]]),t[21]||(t[21]=e("span",{class:"ml-2 text-sm text-slate-700"},"Show correct answers after submission",-1))]),e("label",ee,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=s=>o(n).shuffle_questions=s),class:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[A,o(n).shuffle_questions]]),t[22]||(t[22]=e("span",{class:"ml-2 text-sm text-slate-700"},"Shuffle questions",-1))])]),e("div",null,[i(u,{for:"status",value:"Status *"}),c(e("select",{id:"status","onUpdate:modelValue":t[11]||(t[11]=s=>o(n).status=s),class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[...t[23]||(t[23]=[e("option",{value:"draft"},"Draft",-1),e("option",{value:"published"},"Published",-1),e("option",{value:"archived"},"Archived",-1)])],512),[[q,o(n).status]])])]),e("div",te,[i(M,{disabled:o(n).processing},{default:C(()=>[...t[24]||(t[24]=[V("Update Quiz Settings",-1)])]),_:1},8,["disabled"])])],32)]),e("div",se,[e("div",oe,[e("h3",le,"Questions ("+p(b.quiz.questions?.length||0)+")",1),e("button",{onClick:E,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Add Question ")]),b.quiz.questions&&b.quiz.questions.length>0?(a(),r("div",ie,[(a(!0),r(w,null,h(b.quiz.questions,(s,f)=>(a(),r("div",{key:s.id,class:"border border-slate-200 rounded-lg p-4"},[e("div",ne,[e("div",re,[e("div",ae,[e("span",de,"Q"+p(f+1),1),e("span",ue,p(s.type.replace("_"," ")),1),e("span",ce,p(s.points)+" points",1)]),e("p",pe,p(s.question),1),s.type==="multiple_choice"&&s.options?(a(),r("div",me,[(a(!0),r(w,null,h(s.options,(v,U)=>(a(),r("div",{key:U,class:"text-sm text-slate-600"},[e("span",{class:L(v===s.correct_answer?"text-green-600 font-medium":"")},[V(p(String.fromCharCode(65+U))+". "+p(v)+" ",1),v===s.correct_answer?(a(),r("span",fe,"(Correct)")):k("",!0)],2)]))),128))])):s.type==="true_false"?(a(),r("p",ve,[t[26]||(t[26]=V(" Correct answer: ",-1)),e("span",be,p(s.correct_answer),1)])):k("",!0)]),e("div",ge,[e("button",{onClick:v=>B(s),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,_e),e("button",{onClick:v=>T(s),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,xe)])])]))),128))])):(a(),r("div",we,' No questions added yet. Click "Add Question" to get started. '))])]),g.value?(a(),r("div",ye,[e("div",ke,[e("div",he,[e("div",qe,[e("h3",ze,p(x.value?"Edit":"Add")+" Question",1),e("button",{onClick:t[12]||(t[12]=s=>g.value=!1),class:"text-slate-400 hover:text-slate-600"},[...t[29]||(t[29]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:Q(F,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[i(u,{for:"type",value:"Question Type *"}),c(e("select",{id:"type","onUpdate:modelValue":t[13]||(t[13]=s=>o(l).type=s),class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[...t[30]||(t[30]=[e("option",{value:"multiple_choice"},"Multiple Choice",-1),e("option",{value:"true_false"},"True/False",-1),e("option",{value:"short_answer"},"Short Answer",-1)])],512),[[q,o(l).type]])]),e("div",null,[i(u,{for:"question",value:"Question *"}),c(e("textarea",{id:"question","onUpdate:modelValue":t[14]||(t[14]=s=>o(l).question=s),rows:"3",required:"",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,o(l).question]]),i(z,{class:"mt-2",message:o(l).errors.question},null,8,["message"])]),o(l).type==="multiple_choice"?(a(),r("div",Ve,[i(u,{value:"Options *"}),e("div",Ce,[(a(!0),r(w,null,h(o(l).options,(s,f)=>(a(),r("div",{key:f,class:"flex items-center gap-2"},[c(e("input",{"onUpdate:modelValue":v=>o(l).options[f]=v,type:"text",required:"",class:"flex-1 rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",placeholder:`Option ${String.fromCharCode(65+f)}`},null,8,Ue),[[_,o(l).options[f]]]),o(l).options.length>2?(a(),r("button",{key:0,type:"button",onClick:v=>D(f),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg"},[...t[31]||(t[31]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Se)):k("",!0)]))),128))]),e("button",{type:"button",onClick:O,class:"mt-2 text-sm text-indigo-600 hover:text-indigo-800"}," + Add Option ")])):k("",!0),e("div",null,[i(u,{for:"correct_answer",value:"Correct Answer *"}),o(l).type==="multiple_choice"?c((a(),r("select",{key:0,id:"correct_answer","onUpdate:modelValue":t[15]||(t[15]=s=>o(l).correct_answer=s),required:"",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[t[32]||(t[32]=e("option",{value:""},"Select correct option",-1)),(a(!0),r(w,null,h(o(l).options,(s,f)=>(a(),r("option",{key:f,value:s},p(String.fromCharCode(65+f))+". "+p(s),9,je))),128))],512)),[[q,o(l).correct_answer]]):o(l).type==="true_false"?c((a(),r("select",{key:1,id:"correct_answer","onUpdate:modelValue":t[16]||(t[16]=s=>o(l).correct_answer=s),required:"",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[...t[33]||(t[33]=[e("option",{value:"True"},"True",-1),e("option",{value:"False"},"False",-1)])],512)),[[q,o(l).correct_answer]]):c((a(),r("input",{key:2,id:"correct_answer","onUpdate:modelValue":t[17]||(t[17]=s=>o(l).correct_answer=s),type:"text",required:"",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter the correct answer"},null,512)),[[_,o(l).correct_answer]]),i(z,{class:"mt-2",message:o(l).errors.correct_answer},null,8,["message"])]),e("div",null,[i(u,{for:"explanation",value:"Explanation (Optional)"}),c(e("textarea",{id:"explanation","onUpdate:modelValue":t[18]||(t[18]=s=>o(l).explanation=s),rows:"2",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Explain why this is the correct answer..."},null,512),[[_,o(l).explanation]])]),e("div",null,[i(u,{for:"points",value:"Points *"}),i(y,{id:"points",type:"number",class:"mt-1 block w-full",modelValue:o(l).points,"onUpdate:modelValue":t[19]||(t[19]=s=>o(l).points=s),min:"1",required:""},null,8,["modelValue"]),i(z,{class:"mt-2",message:o(l).errors.points},null,8,["message"])]),e("div",Qe,[e("button",{type:"button",onClick:t[20]||(t[20]=s=>g.value=!1),class:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200"}," Cancel "),i(M,{disabled:o(l).processing},{default:C(()=>[V(p(x.value?"Update":"Add")+" Question ",1)]),_:1},8,["disabled"])])],32)])])):k("",!0)]),_:1},8,["title"])],64))}};export{Te as default};
