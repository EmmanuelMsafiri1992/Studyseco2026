import{p as j,r as R,A as U,c as l,o as r,a as g,u as s,h as B,w as h,b as e,j as p,l as k,q as M,d as f,v,t as c,y as $,F as y,f as w,i as A}from"./app-eyie9m1X.js";import{_ as E}from"./DashboardLayout-abZ_OM8M.js";const D={class:"max-w-4xl mx-auto"},N={class:"mb-6"},q={key:0,class:"bg-amber-50 border border-amber-200 rounded-2xl p-4 mb-6"},L={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-slate-200/50"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z=["disabled"],F={key:0,class:"mt-2 text-sm text-red-600"},O=["disabled"],T={key:0,class:"mt-2 text-sm text-red-600"},G={class:"md:col-span-2"},H={key:0,class:"mt-2 text-sm text-red-600"},I={key:0,class:"mt-2 text-sm text-red-600"},J={class:"flex items-center"},K={class:"flex items-center space-x-3 cursor-pointer"},Q=["disabled"],W={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-slate-200/50"},X={class:"space-y-6"},Y={class:"flex items-center justify-between mb-4"},Z={class:"text-lg font-semibold text-slate-800 capitalize"},ee=["onClick"],te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},se=["checked","onChange"],oe={class:"text-sm font-medium text-slate-800"},ie={key:0,class:"text-xs text-slate-500"},le={key:0,class:"mt-4 text-sm text-red-600"},re={class:"flex items-center justify-end space-x-4"},ne=["disabled"],de={key:0},ae={key:1},pe={__name:"Edit",props:{auth:Object,role:Object,permissions:Object},setup(x){const d=x,o=j({name:d.role.name,slug:d.role.slug,description:d.role.description||"",priority:d.role.priority,permissions:d.role.permissions?.map(n=>n.id)||[],is_active:d.role.is_active}),a=R(new Set);U(()=>{d.role.permissions&&d.role.permissions.forEach(n=>{a.value.add(n.id)})});const _=()=>{o.slug=o.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")},C=n=>{a.value.has(n)?a.value.delete(n):a.value.add(n),o.permissions=Array.from(a.value)},S=n=>{const t=d.permissions[n]||[],i=t.every(m=>a.value.has(m.id));t.forEach(m=>{i?a.value.delete(m.id):a.value.add(m.id)}),o.permissions=Array.from(a.value)},V=()=>{o.put(route("admin.roles.update",d.role.id))},b=["super-admin","admin","teacher","student"].includes(d.role.slug);return(n,t)=>(r(),l(y,null,[g(s(B),{title:`Edit Role: ${x.role.name}`},null,8,["title"]),g(E,{title:`Edit Role: ${x.role.name}`,subtitle:"Update role information and permissions"},{default:h(()=>[e("div",D,[e("div",N,[g(s(k),{href:n.route("admin.roles.show",x.role.id),class:"inline-flex items-center space-x-2 text-slate-600 hover:text-slate-800 transition-colors duration-200"},{default:h(()=>[...t[6]||(t[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",null,"Back to Role",-1)])]),_:1},8,["href"])]),s(b)?(r(),l("div",q,[...t[7]||(t[7]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 15.5c-.77.833.192 2.5 1.732 2.5z"})]),e("span",{class:"text-amber-800 font-medium"},"System Role")],-1),e("p",{class:"text-amber-700 text-sm mt-1"},"This is a system role. Some fields may be restricted from editing to maintain system integrity.",-1)])])):p("",!0),e("form",{onSubmit:M(V,["prevent"]),class:"space-y-8"},[e("div",L,[t[13]||(t[13]=e("h2",{class:"text-xl font-bold text-slate-800 mb-6"},"Basic Information",-1)),e("div",P,[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-semibold text-slate-700 mb-2"},"Role Name",-1)),f(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=i=>s(o).name=i),onInput:t[1]||(t[1]=i=>!s(b)&&_()),type:"text",required:"",disabled:s(b),class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200 disabled:opacity-50",placeholder:"e.g., Content Manager"},null,40,z),[[v,s(o).name]]),s(o).errors.name?(r(),l("div",F,c(s(o).errors.name),1)):p("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{for:"slug",class:"block text-sm font-semibold text-slate-700 mb-2"},"Slug",-1)),f(e("input",{id:"slug","onUpdate:modelValue":t[2]||(t[2]=i=>s(o).slug=i),type:"text",required:"",disabled:s(b),class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200 disabled:opacity-50",placeholder:"e.g., content-manager"},null,8,O),[[v,s(o).slug]]),s(o).errors.slug?(r(),l("div",T,c(s(o).errors.slug),1)):p("",!0)]),e("div",G,[t[10]||(t[10]=e("label",{for:"description",class:"block text-sm font-semibold text-slate-700 mb-2"},"Description",-1)),f(e("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=i=>s(o).description=i),rows:"3",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"Describe the role and its purpose..."},null,512),[[v,s(o).description]]),s(o).errors.description?(r(),l("div",H,c(s(o).errors.description),1)):p("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{for:"priority",class:"block text-sm font-semibold text-slate-700 mb-2"},"Priority (1-100)",-1)),f(e("input",{id:"priority","onUpdate:modelValue":t[4]||(t[4]=i=>s(o).priority=i),type:"number",min:"1",max:"100",required:"",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200"},null,512),[[v,s(o).priority,void 0,{number:!0}]]),s(o).errors.priority?(r(),l("div",I,c(s(o).errors.priority),1)):p("",!0)]),e("div",J,[e("label",K,[f(e("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>s(o).is_active=i),type:"checkbox",disabled:s(b),class:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-400 disabled:opacity-50"},null,8,Q),[[$,s(o).is_active]]),t[12]||(t[12]=e("span",{class:"text-sm font-semibold text-slate-700"},"Role is Active",-1))])])])]),e("div",W,[t[14]||(t[14]=e("h2",{class:"text-xl font-bold text-slate-800 mb-6"},"Permissions",-1)),e("div",X,[(r(!0),l(y,null,w(x.permissions,(i,m)=>(r(),l("div",{key:m,class:"border border-slate-200 rounded-2xl p-6"},[e("div",Y,[e("h3",Z,c(m),1),e("button",{type:"button",onClick:u=>S(m),class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"},c(i.every(u=>a.value.has(u.id))?"Deselect All":"Select All"),9,ee)]),e("div",te,[(r(!0),l(y,null,w(i,u=>(r(),l("label",{key:u.id,class:"flex items-center space-x-3 p-3 rounded-xl hover:bg-slate-50 transition-colors duration-150 cursor-pointer"},[e("input",{type:"checkbox",checked:a.value.has(u.id),onChange:ue=>C(u.id),class:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-400"},null,40,se),e("div",null,[e("div",oe,c(u.name),1),u.description?(r(),l("div",ie,c(u.description),1)):p("",!0)])]))),128))])]))),128))]),s(o).errors.permissions?(r(),l("div",le,c(s(o).errors.permissions),1)):p("",!0)]),e("div",re,[g(s(k),{href:n.route("admin.roles.show",x.role.id),class:"px-6 py-3 border border-slate-300 text-slate-700 rounded-2xl hover:bg-slate-50 transition-colors duration-200"},{default:h(()=>[...t[15]||(t[15]=[A(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:s(o).processing,class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-8 py-3 rounded-2xl font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50 disabled:transform-none"},[s(o).processing?(r(),l("span",de,"Updating...")):(r(),l("span",ae,"Update Role"))],8,ne)])],32)])]),_:1},8,["title"])],64))}};export{pe as default};
