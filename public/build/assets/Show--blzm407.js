import{r as y,p as k,c as o,o as a,a as g,u as d,h as R,w,b as t,j as r,l as F,i as h,t as l,n as f,F as p,f as j,d as A,v as S}from"./app-pY9rZ_j6.js";import{_}from"./DashboardLayout-9D_-jepo.js";const B={class:"mb-6"},$={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},L={class:"lg:col-span-2 space-y-6"},T={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M={class:"text-slate-900 font-medium"},z={class:"text-slate-900"},U={class:"text-slate-900"},I={class:"text-slate-900"},O={class:"md:col-span-2"},q={class:"text-slate-900"},H={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"text-slate-900"},K={key:0},Q={class:"text-slate-900"},W={class:"text-slate-900"},X={key:1},Y={class:"text-slate-900 font-medium"},Z={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},tt={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},et={key:0,class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},st={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lt={class:"text-slate-900"},nt={class:"text-slate-900 font-mono"},ot={class:"text-slate-900 font-medium"},at={key:0,class:"mt-4"},rt={class:"p-4 bg-slate-50 rounded-2xl"},dt=["href"],it={class:"space-y-6"},mt={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},ut={class:"space-y-3"},xt={key:2,class:"p-4 bg-slate-100 rounded-2xl text-center text-slate-600"},ct={class:"text-sm"},bt={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},gt={class:"space-y-3 text-sm"},ft={class:"flex justify-between"},pt={class:"text-slate-900"},vt={key:0,class:"flex justify-between"},yt={class:"text-slate-900"},kt={key:1,class:"mt-4"},wt={class:"text-slate-900 text-sm bg-slate-100 p-3 rounded-2xl"},ht={key:2,class:"mt-4"},jt={class:"text-slate-900 text-sm bg-red-50 p-3 rounded-2xl"},At={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},St={class:"bg-white rounded-3xl p-6 max-w-md w-full mx-4"},Dt={class:"text-sm text-gray-600 mb-6"},Et={class:"flex justify-end space-x-4"},Ct=["disabled"],Nt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Pt={class:"bg-white rounded-3xl p-6 max-w-md w-full mx-4"},Rt={class:"text-sm text-gray-600 mb-4"},Ft={class:"mb-4"},_t={class:"mb-4"},Bt={class:"flex justify-end space-x-4"},$t=["disabled"],Vt={__name:"Show",props:{enrollment:Object,subjectNames:Array},setup(s){const u=s,x=y(!1),c=y(!1),b=k({}),i=k({admin_notes:"",rejection_reason:""}),D=()=>{b.patch(route("admin.enrollments.approve",u.enrollment.id),{onSuccess:()=>{x.value=!1}})},E=()=>{i.patch(route("admin.enrollments.reject",u.enrollment.id),{onSuccess:()=>{c.value=!1}})},C=m=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"})[m]||"bg-gray-100 text-gray-800",N=m=>({pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[m]||"bg-gray-100 text-gray-800",v=(m,e)=>new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:0}).format(m),P=()=>{try{return route("admin.enrollments.payment-proof",u.enrollment.id)}catch{return`/admin/enrollments/${u.enrollment.id}/payment-proof`}};return(m,e)=>(a(),o(p,null,[g(d(R),{title:`Enrollment - ${s.enrollment.name}`},null,8,["title"]),g(_,{title:`Enrollment Details - ${s.enrollment.name}`,subtitle:"Review enrollment information and manage approval"},{default:w(()=>[t("div",B,[g(d(F),{href:m.route("admin.enrollments.index"),class:"inline-flex items-center text-sm text-slate-600 hover:text-slate-800"},{default:w(()=>[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),h(" Back to Enrollments ",-1)])]),_:1},8,["href"])]),t("div",$,[t("div",L,[t("div",T,[e[12]||(e[12]=t("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Student Information",-1)),t("div",V,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-slate-600"},"Full Name",-1)),t("p",M,l(s.enrollment.name),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-slate-600"},"Email Address",-1)),t("p",z,l(s.enrollment.email),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-slate-600"},"Phone Number",-1)),t("p",U,l(s.enrollment.phone),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-slate-600"},"Country",-1)),t("p",I,l(s.enrollment.country),1)]),t("div",O,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-slate-600"},"Address",-1)),t("p",q,l(s.enrollment.address),1)])])]),t("div",H,[e[19]||(e[19]=t("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Enrollment Details",-1)),t("div",G,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-slate-600"},"Enrollment Type",-1)),t("span",{class:f(["inline-flex px-3 py-1 text-xs font-semibold rounded-full",s.enrollment.is_trial?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"])},l(s.enrollment.is_trial?"Free Trial":"Paid"),3)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-slate-600"},"Status",-1)),t("span",{class:f([C(s.enrollment.status),"inline-flex px-3 py-1 text-xs font-semibold rounded-full capitalize"])},l(s.enrollment.status),3)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-600"},"Enrollment Date",-1)),t("p",J,l(new Date(s.enrollment.created_at).toLocaleDateString()),1)]),s.enrollment.approved_at?(a(),o("div",K,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-600"},"Approved Date",-1)),t("p",Q,l(new Date(s.enrollment.approved_at).toLocaleDateString()),1)])):r("",!0),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-slate-600"},"Access Expires",-1)),t("p",W,l(new Date(s.enrollment.access_expires_at).toLocaleDateString()),1)]),s.enrollment.is_trial?r("",!0):(a(),o("div",X,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-slate-600"},"Total Amount",-1)),t("p",Y,l(v(s.enrollment.total_amount,s.enrollment.currency)),1)]))])]),t("div",Z,[e[20]||(e[20]=t("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Selected Subjects",-1)),t("div",tt,[(a(!0),o(p,null,j(s.subjectNames,n=>(a(),o("div",{key:n,class:"px-3 py-2 bg-slate-100 rounded-2xl text-sm text-slate-700"},l(n),1))),128))])]),!s.enrollment.is_trial&&s.enrollment.payments&&s.enrollment.payments.length>0?(a(),o("div",et,[e[27]||(e[27]=t("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Payment Information",-1)),(a(!0),o(p,null,j(s.enrollment.payments,n=>(a(),o("div",{key:n.id,class:"mb-4 last:mb-0"},[t("div",st,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-slate-600"},"Payment Method",-1)),t("p",lt,l(n.payment_method?.name||"N/A"),1)]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-slate-600"},"Payment Status",-1)),t("span",{class:f([N(n.status),"inline-flex px-3 py-1 text-xs font-semibold rounded-full capitalize"])},l(n.status),3)]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-slate-600"},"Reference Number",-1)),t("p",nt,l(n.reference_number||"N/A"),1)]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-slate-600"},"Amount",-1)),t("p",ot,l(v(n.amount,n.currency)),1)])]),n.payment_proof_path||s.enrollment.payment_proof_path?(a(),o("div",at,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-slate-600 mb-2"},"Payment Proof",-1)),t("div",rt,[t("a",{href:P(),target:"_blank",class:"inline-flex items-center text-indigo-600 hover:text-indigo-800"},[...e[25]||(e[25]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1),h(" View Payment Proof ",-1)])],8,dt)])])):r("",!0)]))),128))])):r("",!0)]),t("div",it,[t("div",mt,[e[28]||(e[28]=t("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Actions",-1)),t("div",ut,[s.enrollment.status==="pending"?(a(),o("button",{key:0,onClick:e[0]||(e[0]=n=>x.value=!0),class:"w-full bg-green-500 text-white px-4 py-3 rounded-2xl font-medium hover:bg-green-600 transition-colors"}," Approve Enrollment ")):r("",!0),s.enrollment.status==="pending"?(a(),o("button",{key:1,onClick:e[1]||(e[1]=n=>c.value=!0),class:"w-full bg-red-500 text-white px-4 py-3 rounded-2xl font-medium hover:bg-red-600 transition-colors"}," Reject Enrollment ")):r("",!0),s.enrollment.status!=="pending"?(a(),o("div",xt,[t("p",ct," This enrollment has been "+l(s.enrollment.status)+". ",1)])):r("",!0)])]),t("div",bt,[e[33]||(e[33]=t("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Status History",-1)),t("div",gt,[t("div",ft,[e[29]||(e[29]=t("span",{class:"text-slate-600"},"Created",-1)),t("span",pt,l(new Date(s.enrollment.created_at).toLocaleDateString()),1)]),s.enrollment.approved_at?(a(),o("div",vt,[e[30]||(e[30]=t("span",{class:"text-slate-600"},"Approved",-1)),t("span",yt,l(new Date(s.enrollment.approved_at).toLocaleDateString()),1)])):r("",!0),s.enrollment.admin_notes?(a(),o("div",kt,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-slate-600 mb-1"},"Admin Notes",-1)),t("p",wt,l(s.enrollment.admin_notes),1)])):r("",!0),s.enrollment.rejection_reason?(a(),o("div",ht,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-slate-600 mb-1"},"Rejection Reason",-1)),t("p",jt,l(s.enrollment.rejection_reason),1)])):r("",!0)])])])]),x.value?(a(),o("div",At,[t("div",St,[e[34]||(e[34]=t("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Approve Enrollment",-1)),t("p",Dt,' Are you sure you want to approve "'+l(s.enrollment.name)+`"'s enrollment? This will create a user account and send them login credentials. `,1),t("div",Et,[t("button",{onClick:e[2]||(e[2]=n=>x.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-2xl hover:bg-gray-200 transition-colors"}," Cancel "),t("button",{onClick:D,disabled:d(b).processing,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-2xl hover:bg-green-700 transition-colors disabled:opacity-50"},l(d(b).processing?"Approving...":"Approve Enrollment"),9,Ct)])])])):r("",!0),c.value?(a(),o("div",Nt,[t("div",Pt,[e[37]||(e[37]=t("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Reject Enrollment",-1)),t("p",Rt,' Are you sure you want to reject "'+l(s.enrollment.name)+`"'s enrollment? `,1),t("div",Ft,[e[35]||(e[35]=t("label",{for:"rejection_reason",class:"block text-sm font-medium text-gray-700 mb-2"}," Rejection Reason * ",-1)),A(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=n=>d(i).rejection_reason=n),id:"rejection_reason",rows:"3",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"Please provide a reason for rejection...",required:""},null,512),[[S,d(i).rejection_reason]])]),t("div",_t,[e[36]||(e[36]=t("label",{for:"admin_notes",class:"block text-sm font-medium text-gray-700 mb-2"}," Admin Notes (Optional) ",-1)),A(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=n=>d(i).admin_notes=n),id:"admin_notes",rows:"2",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"Additional notes..."},null,512),[[S,d(i).admin_notes]])]),t("div",Bt,[t("button",{onClick:e[5]||(e[5]=n=>c.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-2xl hover:bg-gray-200 transition-colors"}," Cancel "),t("button",{onClick:E,disabled:d(i).processing||!d(i).rejection_reason,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-2xl hover:bg-red-700 transition-colors disabled:opacity-50"},l(d(i).processing?"Rejecting...":"Reject Enrollment"),9,$t)])])])):r("",!0)]),_:1},8,["title"])],64))}};export{Vt as default};
