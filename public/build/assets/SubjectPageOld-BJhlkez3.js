import{r as m,x as S,c as n,o as a,a as j,b as e,u,h as $,j as r,w as E,l as P,t as d,F as M,f as I,G as C,q as _,d as k,v as y,k as D,i as O}from"./app-pY9rZ_j6.js";import q from"./TopicSidebar-ChT9V7A3.js";import G from"./LessonCard-D23xd9Mk.js";import{C as W}from"./ChunkedVideoUpload-B_NhlMv1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"flex h-screen bg-gradient-to-br from-slate-50 to-blue-50 font-sans text-slate-800"},J={class:"flex-1 flex flex-col"},Q={class:"h-20 bg-white/70 backdrop-blur-xl border-b border-slate-200/50 px-8 flex items-center justify-between relative z-50"},R={class:"flex items-center space-x-4"},X={class:"text-2xl font-bold text-slate-800"},Y={class:"text-slate-500 text-sm"},Z={key:0,class:"flex items-center space-x-4"},ee=["disabled"],te={class:"flex-1 overflow-y-auto p-8 space-y-6"},oe={key:0,class:"space-y-6"},se={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},le={class:"flex items-center justify-between mb-4"},ae={class:"text-2xl font-bold text-slate-800"},ne={class:"text-slate-600 mt-1"},ie={class:"flex items-center space-x-4 text-sm text-slate-500"},re={key:0},de={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ue={key:1,class:"text-center py-16"},ce={key:1,class:"text-center py-16"},pe={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},ve={class:"bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-slate-200/50 max-w-md w-full mx-4"},me={class:"space-y-4"},xe={key:1,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},fe={class:"bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-slate-200/50 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},be={class:"space-y-6"},he={key:0,class:"space-y-3"},ge={key:2,class:"mt-3 p-4 bg-green-50 border border-green-200 rounded-xl"},we={class:"flex items-center justify-between"},ke={class:"flex items-center space-x-3"},ye={class:"text-xs text-green-600"},je={key:0,class:"ml-2"},Ce={class:"flex justify-end space-x-4 mt-8"},Ve=["disabled"],Me={key:0},_e={key:1,class:"flex items-center space-x-2"},Ne={__name:"SubjectPageOld",props:{auth:Object,subject:Object},setup(x){const f=x,c=f.auth?.user||{name:"Guest",role:"guest",profile_photo_url:null},b=m(f.subject.topics[0]?.id||null),h=m(!1),g=m(!1),p=m({name:"",description:""}),s=m({title:"",description:"",notes:"",videoData:null}),w=m(!1),V=m(0),v=m(!1),i=S(()=>f.subject.topics.find(o=>o.id===b.value)),A=o=>{b.value=o},T=async()=>{try{const o=await axios.post(route("topics.store"),{subject_id:f.subject.id,name:p.value.name,description:p.value.description});o.data.success&&(f.subject.topics.push(o.data.topic),p.value={name:"",description:""},h.value=!1,b.value=o.data.topic.id)}catch(o){console.error("Error adding topic:",o),alert("Error adding topic. Please try again.")}},L=async()=>{if(!w.value)try{w.value=!0;const o=new FormData;o.append("topic_id",b.value),o.append("title",s.value.title),o.append("description",s.value.description),o.append("notes",s.value.notes),s.value.videoData&&(o.append("video_path",s.value.videoData.filePath),o.append("video_filename",s.value.videoData.fileName||"uploaded_video.mp4"),s.value.videoData.duration&&o.append("duration_minutes",s.value.videoData.duration));const t=await axios.post(route("lessons.store"),o);if(t.data.success){const l=f.subject.topics.find(H=>H.id===b.value);l&&(l.lessons||(l.lessons=[]),l.lessons.push(t.data.lesson)),s.value={title:"",description:"",notes:"",videoData:null},g.value=!1,v.value=!1}}catch(o){console.error("Error adding lesson:",o),alert("Error adding lesson. Please try again.")}finally{w.value=!1,V.value=0}},B=o=>{s.value.videoData=o,v.value=!1},N=o=>{console.error("Video upload error:",o),alert("Video upload failed. Please try again.")},U=()=>{s.value.videoData=null,v.value=!1},F=()=>{p.value={name:"",description:""},h.value=!1},z=()=>{s.value={title:"",description:"",notes:"",videoData:null},g.value=!1,v.value=!1};return(o,t)=>(a(),n(M,null,[j(u($),{title:x.subject.name},null,8,["title"]),e("div",K,[j(q,{subject:x.subject,selectedTopicId:b.value,onSelectTopic:A},null,8,["subject","selectedTopicId"]),e("div",J,[e("header",Q,[e("div",null,[e("div",R,[j(u(P),{href:o.route("subjects.index"),class:"p-2 hover:bg-slate-100 rounded-xl transition-colors duration-200"},{default:E(()=>[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),e("div",null,[e("h1",X,d(x.subject.name),1),e("p",Y,d(x.subject.department)+" - "+d(x.subject.grade_level),1)])])]),u(c)?.role==="admin"||u(c)?.role==="teacher"?(a(),n("div",Z,[e("button",{onClick:t[0]||(t[0]=l=>h.value=!0),class:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-medium hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg"},[...t[12]||(t[12]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",null,"Add Topic")],-1)])]),e("button",{onClick:t[1]||(t[1]=l=>g.value=!0),disabled:!i.value,class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[...t[13]||(t[13]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]),e("span",null,"Add Lesson")],-1)])],8,ee)])):r("",!0)]),e("main",te,[i.value?(a(),n("div",oe,[e("div",se,[e("div",le,[e("div",null,[e("h2",ae,d(i.value.name),1),e("p",ne,d(i.value.description||"No description provided."),1)]),e("div",ie,[e("span",null,d(i.value.lessons?.length||0)+" lessons",1),i.value.total_duration?(a(),n("span",re,d(Math.floor(i.value.total_duration/60))+"h "+d(i.value.total_duration%60)+"m",1)):r("",!0)])])]),i.value.lessons&&i.value.lessons.length>0?(a(),n("div",de,[(a(!0),n(M,null,I(i.value.lessons,l=>(a(),D(G,{key:l.id,lesson:l,canManage:u(c)?.role==="admin"||u(c)?.role==="teacher"},null,8,["lesson","canManage"]))),128))])):(a(),n("div",ue,[t[14]||(t[14]=C('<div class="w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 rounded-3xl flex items-center justify-center mx-auto mb-6"><svg class="w-12 h-12 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-semibold text-slate-800 mb-2">No lessons yet</h3><p class="text-slate-500 mb-6">Start building your subject by adding the first lesson.</p>',3)),u(c)?.role==="admin"||u(c)?.role==="teacher"?(a(),n("button",{key:0,onClick:t[2]||(t[2]=l=>g.value=!0),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1"}," Add First Lesson ")):r("",!0)]))])):x.subject.topics.length===0?(a(),n("div",ce,[t[15]||(t[15]=C('<div class="w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 rounded-3xl flex items-center justify-center mx-auto mb-6"><svg class="w-12 h-12 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><h3 class="text-xl font-semibold text-slate-800 mb-2">No topics yet</h3><p class="text-slate-500 mb-6">Create your first topic to start organizing lessons.</p>',3)),u(c)?.role==="admin"||u(c)?.role==="teacher"?(a(),n("button",{key:0,onClick:t[3]||(t[3]=l=>h.value=!0),class:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-2xl font-semibold hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1"}," Create First Topic ")):r("",!0)])):r("",!0)])]),h.value?(a(),n("div",pe,[e("div",ve,[t[19]||(t[19]=e("h3",{class:"text-xl font-bold text-slate-800 mb-6"},"Add New Topic",-1)),e("form",{onSubmit:_(T,["prevent"])},[e("div",me,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Topic Name*",-1)),k(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>p.value.name=l),type:"text",required:"",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:bg-white transition-all duration-200",placeholder:"e.g. Introduction, Basic Concepts"},null,512),[[y,p.value.name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),k(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>p.value.description=l),rows:"3",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:bg-white transition-all duration-200",placeholder:"Brief description of this topic..."},null,512),[[y,p.value.description]])])]),e("div",{class:"flex justify-end space-x-4 mt-6"},[e("button",{type:"button",onClick:F,class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-medium transition-all duration-200"}," Cancel "),t[18]||(t[18]=e("button",{type:"submit",class:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-medium hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg"}," Add Topic ",-1))])],32)])])):r("",!0),g.value?(a(),n("div",xe,[e("div",fe,[t[29]||(t[29]=e("h3",{class:"text-xl font-bold text-slate-800 mb-6"},"Add New Lesson",-1)),e("form",{onSubmit:_(L,["prevent"])},[e("div",be,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Lesson Title*",-1)),k(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.title=l),type:"text",required:"",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"e.g. Introduction to Algebra"},null,512),[[y,s.value.title]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),k(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.description=l),rows:"3",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"What will students learn in this lesson?"},null,512),[[y,s.value.description]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Video File",-1)),!s.value.videoData&&!v.value?(a(),n("div",he,[e("button",{onClick:t[8]||(t[8]=l=>v.value=!0),type:"button",class:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-dashed border-blue-300 rounded-2xl p-6 hover:border-blue-400 hover:bg-gradient-to-r hover:from-blue-100 hover:to-indigo-100 transition-all duration-200"},[...t[22]||(t[22]=[C('<div class="text-center"><svg class="mx-auto h-12 w-12 text-blue-400" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><p class="mt-2 text-sm font-medium text-slate-700">Upload Video File</p><p class="text-xs text-slate-500">Fast chunked upload with compression</p><p class="text-xs text-slate-400 mt-1">MP4, MOV, AVI, WMV, MKV up to 1GB</p></div>',1)])])])):r("",!0),v.value?(a(),D(W,{key:1,onUploadSuccess:B,onUploadError:N,onCancel:t[9]||(t[9]=l=>v.value=!1),class:"mt-3"})):r("",!0),s.value.videoData?(a(),n("div",ge,[e("div",we,[e("div",ke,[t[24]||(t[24]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1)),e("div",null,[t[23]||(t[23]=e("p",{class:"text-sm font-medium text-green-800"},"Video uploaded successfully!",-1)),e("p",ye,[O(d(s.value.videoData.fileName)+" ",1),s.value.videoData.duration?(a(),n("span",je,"â€¢ "+d(s.value.videoData.duration)+" min",1)):r("",!0)])])]),e("button",{onClick:U,type:"button",class:"text-green-600 hover:text-green-800"},[...t[25]||(t[25]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):r("",!0)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Lesson Notes",-1)),k(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=l=>s.value.notes=l),rows:"4",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"Additional notes, resources, or homework for this lesson..."},null,512),[[y,s.value.notes]])])]),e("div",Ce,[e("button",{type:"button",onClick:z,class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-medium transition-all duration-200"}," Cancel "),e("button",{type:"submit",disabled:w.value,class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[w.value?(a(),n("span",_e,[t[28]||(t[28]=e("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),e("path",{fill:"currentColor",class:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("span",null,"Uploading... "+d(V.value)+"%",1)])):(a(),n("span",Me,"Add Lesson"))],8,Ve)])],32)])])):r("",!0)])],64))}};export{Ne as default};
