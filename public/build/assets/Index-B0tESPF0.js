import{r as u,x as V,c as r,o as n,a as f,u as g,h as I,w,b as e,t as o,j as k,d as A,v as E,F as c,f as C,g as j,l as S,i as B,n as $,k as G,m}from"./app-a7mn_iZg.js";import{_ as K}from"./DashboardLayout-CBvliAqr.js";const P={class:"space-y-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},q={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},J={class:"flex items-center"},W={class:"ml-4"},X={class:"text-2xl font-bold text-slate-900"},Y={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},Z={class:"flex items-center"},ee={class:"ml-4"},te={class:"text-2xl font-bold text-slate-900"},se={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},le={class:"flex items-center"},oe={class:"ml-4"},ae={class:"text-2xl font-bold text-slate-900"},ne={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},re={class:"flex items-center"},de={class:"ml-4"},ie={class:"text-2xl font-bold text-slate-900"},ue={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},ce={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},xe={class:"flex flex-col sm:flex-row gap-4 flex-1"},pe={class:"flex-1"},ve=["value"],be=["value"],fe={class:"flex gap-3"},ge={key:0,class:"mt-4 p-4 bg-slate-50 rounded-xl"},me={class:"flex gap-3"},he={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},ye={class:"overflow-x-auto"},_e={class:"w-full"},we={class:"bg-slate-50 border-b border-slate-200"},ke={class:"px-6 py-4 text-left"},Ae=["checked","indeterminate"],Ce={class:"divide-y divide-slate-200"},Se={class:"px-6 py-4"},Me=["value","onChange","checked"],je={class:"px-6 py-4"},Be={class:"flex items-center space-x-3"},Te={class:"text-2xl"},Ve={class:"font-medium text-slate-900"},$e={key:0,class:"text-sm text-slate-500 truncate max-w-xs"},Re={class:"px-6 py-4"},Ue={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800"},Le={class:"px-6 py-4 text-sm text-slate-900"},Fe={class:"px-6 py-4 text-sm text-slate-500"},ze={class:"px-6 py-4 text-sm text-slate-500"},De={class:"px-6 py-4"},Ne=["onClick"],Oe={class:"px-6 py-4"},He={class:"flex items-center space-x-2"},Ie=["onClick"],Ee={key:0,class:"px-6 py-4 border-t border-slate-200"},Ge={class:"flex items-center justify-between"},Ke={class:"text-sm text-slate-500"},Pe={class:"flex space-x-2"},Qe=["innerHTML"],We={__name:"Index",props:{auth:Object,resources:Object,subjects:Array,types:Array,categories:Array,grades:Array,years:Array,stats:Object,filters:Object},setup(d){const i=d,x=u(i.filters.search||""),p=u(i.filters.type||""),v=u(i.filters.subject||""),b=u(i.filters.status||""),a=u([]),h=u(!1),R=u(!1),T=V(()=>i.resources.data.length>0&&a.value.length===i.resources.data.length),U=V(()=>a.value.length>0&&a.value.length<i.resources.data.length),y=()=>{const l={};x.value&&(l.search=x.value),p.value&&(l.type=p.value),v.value&&(l.subject=v.value),b.value&&(l.status=b.value),m.get(route("admin.library.index"),l,{preserveState:!0,preserveScroll:!0})},L=()=>{x.value="",p.value="",v.value="",b.value="",m.get(route("admin.library.index"))},F=()=>{T.value?a.value=[]:a.value=i.resources.data.map(l=>l.id)},z=l=>{const t=a.value.indexOf(l);t>-1?a.value.splice(t,1):a.value.push(l)},M=l=>{if(a.value.length===0){alert("Please select resources first.");return}l==="delete"&&!confirm("Are you sure you want to delete selected resources?")||m.patch(route("admin.library.bulk-action"),{action:l,resource_ids:a.value},{onSuccess:()=>{a.value=[],h.value=!1}})},D=l=>{m.patch(route("admin.library.toggle",l.id),{},{preserveState:!0,preserveScroll:!0})},N=l=>{confirm("Are you sure you want to delete this resource?")&&m.delete(route("admin.library.destroy",l.id))},O=l=>({book:"ðŸ“š",past_paper:"ðŸ“„",document:"ðŸ“‹",video:"ðŸŽ¥",audio:"ðŸŽµ",presentation:"ðŸ“Š"})[l]||"ðŸ“",H=l=>{if(!l)return"Unknown";const t=["B","KB","MB","GB"],s=Math.floor(Math.log(l)/Math.log(1024));return Math.round(l/Math.pow(1024,s)*100)/100+" "+t[s]};return(l,t)=>(n(),r(c,null,[f(g(I),{title:"Library Management"}),f(K,{title:"Library Management",subtitle:"Manage books, papers, and educational resources"},{default:w(()=>[e("div",P,[e("div",Q,[e("div",q,[e("div",J,[t[10]||(t[10]=e("div",{class:"p-3 rounded-xl bg-blue-100"},[e("span",{class:"text-2xl"},"ðŸ“š")],-1)),e("div",W,[e("h3",X,o(d.stats.total_resources),1),t[9]||(t[9]=e("p",{class:"text-sm text-slate-600"},"Total Resources",-1))])])]),e("div",Y,[e("div",Z,[t[12]||(t[12]=e("div",{class:"p-3 rounded-xl bg-green-100"},[e("span",{class:"text-2xl"},"âœ…")],-1)),e("div",ee,[e("h3",te,o(d.stats.active_resources),1),t[11]||(t[11]=e("p",{class:"text-sm text-slate-600"},"Active Resources",-1))])])]),e("div",se,[e("div",le,[t[14]||(t[14]=e("div",{class:"p-3 rounded-xl bg-purple-100"},[e("span",{class:"text-2xl"},"ðŸ“–")],-1)),e("div",oe,[e("h3",ae,o(d.stats.total_books),1),t[13]||(t[13]=e("p",{class:"text-sm text-slate-600"},"Books",-1))])])]),e("div",ne,[e("div",re,[t[16]||(t[16]=e("div",{class:"p-3 rounded-xl bg-orange-100"},[e("span",{class:"text-2xl"},"ðŸ‘ï¸")],-1)),e("div",de,[e("h3",ie,o(d.stats.total_views),1),t[15]||(t[15]=e("p",{class:"text-sm text-slate-600"},"Total Views",-1))])])])]),e("div",ue,[e("div",ce,[e("div",xe,[e("div",pe,[A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),onInput:y,type:"text",placeholder:"Search resources...",class:"w-full px-4 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[E,x.value]])]),A(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),onChange:y,class:"px-4 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[17]||(t[17]=e("option",{value:""},"All Types",-1)),(n(!0),r(c,null,C(d.types,s=>(n(),r("option",{key:s,value:s},o(s.replace("_"," ").replace(/\b\w/g,_=>_.toUpperCase())),9,ve))),128))],544),[[j,p.value]]),A(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),onChange:y,class:"px-4 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[18]||(t[18]=e("option",{value:""},"All Subjects",-1)),(n(!0),r(c,null,C(d.subjects,s=>(n(),r("option",{key:s.id,value:s.id},o(s.name),9,be))),128))],544),[[j,v.value]]),A(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>b.value=s),onChange:y,class:"px-4 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[19]||(t[19]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],544),[[j,b.value]]),e("button",{onClick:L,class:"px-4 py-2 text-slate-600 bg-slate-100 rounded-xl hover:bg-slate-200 transition-colors"}," Reset ")]),e("div",fe,[a.value.length>0?(n(),r("button",{key:0,onClick:t[4]||(t[4]=s=>h.value=!h.value),class:"px-4 py-2 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-colors"}," Bulk Actions ("+o(a.value.length)+") ",1)):k("",!0),e("button",{onClick:t[5]||(t[5]=s=>R.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors"}," Bulk Upload "),f(g(S),{href:l.route("admin.library.create"),class:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors"},{default:w(()=>[...t[20]||(t[20]=[B(" Add Resource ",-1)])]),_:1},8,["href"])])]),h.value&&a.value.length>0?(n(),r("div",ge,[e("div",me,[e("button",{onClick:t[6]||(t[6]=s=>M("activate")),class:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm"}," Activate "),e("button",{onClick:t[7]||(t[7]=s=>M("deactivate")),class:"px-3 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 text-sm"}," Deactivate "),e("button",{onClick:t[8]||(t[8]=s=>M("delete")),class:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm"}," Delete ")])])):k("",!0)]),e("div",he,[e("div",ye,[e("table",_e,[e("thead",we,[e("tr",null,[e("th",ke,[e("input",{type:"checkbox",checked:T.value,indeterminate:U.value,onChange:F,class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,40,Ae)]),t[21]||(t[21]=e("th",{class:"px-6 py-4 text-left text-sm font-semibold text-slate-900"},"Resource",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-4 text-left text-sm font-semibold text-slate-900"},"Type",-1)),t[23]||(t[23]=e("th",{class:"px-6 py-4 text-left text-sm font-semibold text-slate-900"},"Subject",-1)),t[24]||(t[24]=e("th",{class:"px-6 py-4 text-left text-sm font-semibold text-slate-900"},"Size",-1)),t[25]||(t[25]=e("th",{class:"px-6 py-4 text-left text-sm font-semibold text-slate-900"},"Views",-1)),t[26]||(t[26]=e("th",{class:"px-6 py-4 text-left text-sm font-semibold text-slate-900"},"Status",-1)),t[27]||(t[27]=e("th",{class:"px-6 py-4 text-left text-sm font-semibold text-slate-900"},"Actions",-1))])]),e("tbody",Ce,[(n(!0),r(c,null,C(d.resources.data,s=>(n(),r("tr",{key:s.id,class:"hover:bg-slate-50"},[e("td",Se,[e("input",{type:"checkbox",value:s.id,onChange:_=>z(s.id),checked:a.value.includes(s.id),class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,40,Me)]),e("td",je,[e("div",Be,[e("span",Te,o(O(s.type)),1),e("div",null,[e("div",Ve,o(s.title),1),s.description?(n(),r("div",$e,o(s.description),1)):k("",!0)])])]),e("td",Re,[e("span",Ue,o(s.type.replace("_"," ")),1)]),e("td",Le,o(s.subject?.name||"No subject"),1),e("td",Fe,o(H(s.file_size)),1),e("td",ze,o(s.view_count||0),1),e("td",De,[e("button",{onClick:_=>D(s),class:$(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"])},o(s.is_active?"Active":"Inactive"),11,Ne)]),e("td",Oe,[e("div",He,[f(g(S),{href:l.route("admin.library.show",s.id),class:"text-blue-600 hover:text-blue-900 text-sm font-medium"},{default:w(()=>[...t[28]||(t[28]=[B(" View ",-1)])]),_:2},1032,["href"]),f(g(S),{href:l.route("admin.library.edit",s.id),class:"text-indigo-600 hover:text-indigo-900 text-sm font-medium"},{default:w(()=>[...t[29]||(t[29]=[B(" Edit ",-1)])]),_:2},1032,["href"]),e("button",{onClick:_=>N(s),class:"text-red-600 hover:text-red-900 text-sm font-medium"}," Delete ",8,Ie)])])]))),128))])])]),d.resources.links?(n(),r("div",Ee,[e("div",Ge,[e("div",Ke," Showing "+o(d.resources.from)+" to "+o(d.resources.to)+" of "+o(d.resources.total)+" results ",1),e("div",Pe,[(n(!0),r(c,null,C(d.resources.links,s=>(n(),r(c,{key:s.label},[s.url?(n(),G(g(S),{key:0,href:s.url,class:$(["px-3 py-2 text-sm rounded-lg border",s.active?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(n(),r("span",{key:1,class:"px-3 py-2 text-sm rounded-lg border bg-slate-100 text-slate-400 border-slate-300 cursor-not-allowed",innerHTML:s.label},null,8,Qe))],64))),128))])])])):k("",!0)])])]),_:1})],64))}};export{We as default};
