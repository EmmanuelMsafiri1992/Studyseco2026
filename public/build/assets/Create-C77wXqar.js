import{r as x,p as A,c as d,o as u,a as l,u as o,h as T,w as v,b as t,l as j,i as f,q as B,d as b,g as y,F as C,f as h,t as n,n as U,v as M}from"./app--fhtQyYk.js";import{_ as $}from"./DashboardLayout-DwXMIeFU.js";import{_ as m,a as q}from"./TextInput-B7bjlNEl.js";import{P as E}from"./PrimaryButton-Bdy6MHv7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"mb-4"},O={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},z=["value"],D=["disabled"],F={value:""},L=["value"],P={class:"mt-1 text-sm text-slate-500"},G={key:0},R={key:1},H={key:2},J={class:"bg-indigo-50 border border-indigo-200 rounded-lg p-4"},K={class:"text-sm text-indigo-700 space-y-1"},Q={class:"flex items-center justify-between pt-4 border-t border-slate-200"},te={__name:"Create",props:{subjects:Array},setup(g){const k=g,a=x(""),c=x([]),p=x(!1),i=A({student_id:"",subject_id:"",title:"",description:"",certificate_type:"completion"}),w=async()=>{if(!a.value){c.value=[];return}p.value=!0;try{const e=await(await fetch(route("teacher.subjects.students",a.value))).json();c.value=e,c.value.length===1&&(i.student_id=c.value[0].id)}catch(r){console.error("Error loading students:",r)}finally{p.value=!1}},S=()=>{i.subject_id=a.value,i.student_id="",w()},_=()=>{const r={completion:"Certificate of Completion",achievement:"Certificate of Achievement",excellence:"Certificate of Excellence"},s=k.subjects.find(N=>N.id==i.subject_id)?.name||"";s?i.title=`${r[i.certificate_type]} - ${s}`:i.title=r[i.certificate_type]},V=()=>{i.post(route("teacher.certificates.store"))};return(r,e)=>(u(),d(C,null,[l(o(T),{title:"Issue Certificate"}),l($,{title:"Issue Certificate",subtitle:"Recognize student achievement"},{default:v(()=>[t("div",I,[l(o(j),{href:r.route("teacher.certificates.index"),class:"inline-flex items-center text-sm text-indigo-600 hover:text-indigo-800"},{default:v(()=>[...e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),f(" Back to Certificates ",-1)])]),_:1},8,["href"])]),t("div",O,[t("form",{onSubmit:B(V,["prevent"]),class:"space-y-6"},[t("div",null,[l(m,{for:"certificate_type",value:"Certificate Type *"}),b(t("select",{id:"certificate_type","onUpdate:modelValue":e[0]||(e[0]=s=>o(i).certificate_type=s),onChange:_,class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",required:""},[...e[6]||(e[6]=[t("option",{value:"completion"},"Certificate of Completion",-1),t("option",{value:"achievement"},"Certificate of Achievement",-1),t("option",{value:"excellence"},"Certificate of Excellence",-1)])],544),[[y,o(i).certificate_type]]),e[7]||(e[7]=t("p",{class:"mt-1 text-sm text-slate-500"},"Select the type of recognition",-1))]),t("div",null,[l(m,{for:"subject",value:"Subject (Optional)"}),b(t("select",{id:"subject","onUpdate:modelValue":e[1]||(e[1]=s=>a.value=s),onChange:S,class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[e[8]||(e[8]=t("option",{value:""},"General Certificate (No specific subject)",-1)),(u(!0),d(C,null,h(g.subjects,s=>(u(),d("option",{key:s.id,value:s.id},n(s.name),9,z))),128))],544),[[y,a.value]]),e[9]||(e[9]=t("p",{class:"mt-1 text-sm text-slate-500"},"Choose a subject or leave as general",-1))]),t("div",null,[l(m,{for:"student_id",value:"Student *"}),b(t("select",{id:"student_id","onUpdate:modelValue":e[2]||(e[2]=s=>o(i).student_id=s),disabled:!a.value||p.value,class:U(["mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",{"bg-slate-100":!a.value||p.value}]),required:""},[t("option",F,n(p.value?"Loading students...":"Select a student"),1),(u(!0),d(C,null,h(c.value,s=>(u(),d("option",{key:s.id,value:s.id},n(s.name)+" ("+n(s.email)+") ",9,L))),128))],10,D),[[y,o(i).student_id]]),t("p",P,[a.value?c.value.length===0&&!p.value?(u(),d("span",R,"No students enrolled in this subject")):(u(),d("span",H,"Select the student to receive this certificate")):(u(),d("span",G,"Select a subject first to load students"))])]),t("div",null,[l(m,{for:"title",value:"Certificate Title *"}),l(q,{id:"title",modelValue:o(i).title,"onUpdate:modelValue":e[3]||(e[3]=s=>o(i).title=s),type:"text",class:"mt-1 block w-full",required:"",placeholder:"e.g., Certificate of Completion - Mathematics"},null,8,["modelValue"]),t("button",{type:"button",onClick:_,class:"mt-2 text-sm text-indigo-600 hover:text-indigo-800"}," Auto-generate title ")]),t("div",null,[l(m,{for:"description",value:"Description (Optional)"}),b(t("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=s=>o(i).description=s),rows:"4",class:"mt-1 block w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",placeholder:"A custom message for this certificate (leave blank for default message)"},null,512),[[M,o(i).description]]),e[10]||(e[10]=t("p",{class:"mt-1 text-sm text-slate-500"}," Add a personalized message or leave blank to use the default certificate text ",-1))]),t("div",J,[e[15]||(e[15]=t("h4",{class:"text-sm font-semibold text-indigo-900 mb-2"},"Certificate Preview",-1)),t("div",K,[t("p",null,[e[11]||(e[11]=t("strong",null,"Type:",-1)),f(" "+n(o(i).certificate_type.charAt(0).toUpperCase()+o(i).certificate_type.slice(1)),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Title:",-1)),f(" "+n(o(i).title||"Not set"),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Student:",-1)),f(" "+n(c.value.find(s=>s.id==o(i).student_id)?.name||"Not selected"),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Subject:",-1)),f(" "+n(g.subjects.find(s=>s.id==o(i).subject_id)?.name||"General"),1)])])]),t("div",Q,[l(o(j),{href:r.route("teacher.certificates.index"),class:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors"},{default:v(()=>[...e[16]||(e[16]=[f(" Cancel ",-1)])]),_:1},8,["href"]),l(E,{disabled:o(i).processing},{default:v(()=>[f(n(o(i).processing?"Issuing Certificate...":"Issue Certificate"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}};export{te as default};
