import{r as M,p as V,c as a,o as n,a as b,u as d,h as G,w as m,b as t,j as c,l as h,i as x,t as l,F as k,f as D,n as w,k as _,q as z,d as y,v as S}from"./app-CUT9d-xB.js";import{_ as N}from"./DashboardLayout-C96m34Bm.js";const A={class:"mb-4"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},$={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},L={class:"flex items-center justify-between"},P={class:"text-3xl font-bold text-slate-900"},T={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},U={class:"flex items-center justify-between"},H={class:"text-3xl font-bold text-yellow-600"},O={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},q={class:"flex items-center justify-between"},E={class:"text-3xl font-bold text-green-600"},R={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},I={key:0,class:"space-y-4"},J={class:"flex items-start justify-between"},K={class:"flex-1"},Q={class:"flex items-center gap-3 mb-3"},W={class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},X={class:"text-lg font-medium text-indigo-700"},Y={class:"text-base font-semibold text-slate-900"},Z={class:"text-sm text-slate-500"},tt={key:0,class:"px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800"},et={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3"},st={class:"text-sm font-medium text-slate-900"},ot={key:0},lt={class:"text-sm font-medium text-slate-900"},nt={class:"text-sm font-medium text-slate-900"},it={key:0,class:"mb-3"},dt={class:"p-3 bg-slate-50 rounded-lg"},at={class:"text-sm text-slate-700 whitespace-pre-wrap"},rt={key:1,class:"mb-3"},ct=["href"],ut={key:2,class:"mb-3"},mt={class:"p-3 bg-green-50 rounded-lg"},xt={class:"text-sm text-slate-700 whitespace-pre-wrap"},gt={class:"ml-4"},bt=["onClick"],ht={key:1,class:"text-center py-12"},ft={key:2,class:"mt-6 flex items-center justify-between pt-4 border-t border-slate-200"},vt={class:"text-sm text-slate-700"},pt={class:"flex items-center space-x-2"},kt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},wt={class:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},_t={class:"p-6 border-b border-slate-200"},yt={class:"text-sm text-slate-600 mt-1"},St={class:"mb-6"},jt={class:"block text-sm font-medium text-slate-700 mb-2"},Ct=["max"],Bt={key:0,class:"mt-1 text-sm text-red-600"},Mt={class:"mb-6"},Vt={key:0,class:"mt-1 text-sm text-red-600"},Gt={class:"flex items-center justify-end gap-3"},Dt=["disabled"],Ft={__name:"Submissions",props:{assignment:Object,submissions:Object},setup(o){const f=o,u=M(null),i=V({score:"",feedback:""}),j=r=>{u.value=r,i.score=r.score||"",i.feedback=r.feedback||""},g=()=>{u.value=null,i.reset()},C=()=>{i.post(route("teacher.assignments.grade",[f.assignment.id,u.value.id]),{preserveScroll:!0,onSuccess:()=>{g()}})},v=r=>r.graded_at?{class:"bg-green-100 text-green-800",text:"Graded"}:{class:"bg-yellow-100 text-yellow-800",text:"Pending"},p=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=r=>new Date(r.submitted_at)>new Date(f.assignment.due_date);return(r,e)=>(n(),a(k,null,[b(d(G),{title:`${o.assignment.title} - Submissions`},null,8,["title"]),b(N,{title:`${o.assignment.title}`,subtitle:"Student Submissions"},{default:m(()=>[t("div",A,[b(d(h),{href:r.route("teacher.assignments.show",o.assignment.id),class:"inline-flex items-center text-sm text-indigo-600 hover:text-indigo-800"},{default:m(()=>[...e[2]||(e[2]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),x(" Back to Assignment ",-1)])]),_:1},8,["href"])]),t("div",F,[t("div",$,[t("div",L,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-slate-500 mb-1"},"Total Submissions",-1)),t("p",P,l(o.submissions.total||0),1)]),e[4]||(e[4]=t("div",{class:"p-3 bg-indigo-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),t("div",T,[t("div",U,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-slate-500 mb-1"},"Pending Grading",-1)),t("p",H,l(o.submissions.data?.filter(s=>!s.graded_at).length||0),1)]),e[6]||(e[6]=t("div",{class:"p-3 bg-yellow-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),t("div",O,[t("div",q,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-slate-500 mb-1"},"Graded",-1)),t("p",E,l(o.submissions.data?.filter(s=>s.graded_at).length||0),1)]),e[8]||(e[8]=t("div",{class:"p-3 bg-green-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])]),t("div",R,[e[19]||(e[19]=t("h3",{class:"text-xl font-semibold text-slate-900 mb-6"},"All Submissions",-1)),o.submissions.data&&o.submissions.data.length>0?(n(),a("div",I,[(n(!0),a(k,null,D(o.submissions.data,s=>(n(),a("div",{key:s.id,class:"border border-slate-200 rounded-lg p-4 hover:border-indigo-300 transition-colors"},[t("div",J,[t("div",K,[t("div",Q,[t("div",W,[t("span",X,l(s.student?.name?.charAt(0)),1)]),t("div",null,[t("h4",Y,l(s.student?.name),1),t("p",Z,l(s.student?.email),1)]),t("span",{class:w(["px-2 py-1 text-xs font-medium rounded-full",v(s).class])},l(v(s).text),3),B(s)?(n(),a("span",tt," Late ")):c("",!0)]),t("div",et,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs text-slate-500 mb-1"},"Submitted At",-1)),t("p",st,l(p(s.submitted_at)),1)]),s.graded_at?(n(),a("div",ot,[e[10]||(e[10]=t("p",{class:"text-xs text-slate-500 mb-1"},"Graded At",-1)),t("p",lt,l(p(s.graded_at)),1)])):c("",!0),t("div",null,[e[11]||(e[11]=t("p",{class:"text-xs text-slate-500 mb-1"},"Score",-1)),t("p",nt,l(s.score!==null?`${s.score}/${o.assignment.total_points}`:"Not graded"),1)])]),s.content?(n(),a("div",it,[e[12]||(e[12]=t("p",{class:"text-xs text-slate-500 mb-1"},"Student Response",-1)),t("div",dt,[t("p",at,l(s.content),1)])])):c("",!0),s.attachment_url?(n(),a("div",rt,[e[14]||(e[14]=t("p",{class:"text-xs text-slate-500 mb-1"},"Attachment",-1)),t("a",{href:s.attachment_url,target:"_blank",class:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 transition-colors text-sm"},[...e[13]||(e[13]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),x(" Download Submission ",-1)])],8,ct)])):c("",!0),s.feedback?(n(),a("div",ut,[e[15]||(e[15]=t("p",{class:"text-xs text-slate-500 mb-1"},"Teacher Feedback",-1)),t("div",mt,[t("p",xt,l(s.feedback),1)])])):c("",!0)]),t("div",gt,[t("button",{onClick:zt=>j(s),class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm"},l(s.graded_at?"Update Grade":"Grade"),9,bt)])])]))),128))])):(n(),a("div",ht,[...e[16]||(e[16]=[t("svg",{class:"w-16 h-16 mx-auto text-slate-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("h3",{class:"text-lg font-semibold text-slate-900 mb-2"},"No submissions yet",-1),t("p",{class:"text-slate-600"},"Students haven't submitted their work for this assignment.",-1)])])),o.submissions.data&&o.submissions.data.length>0?(n(),a("div",ft,[t("div",vt," Showing "+l(o.submissions.from||0)+" to "+l(o.submissions.to||0)+" of "+l(o.submissions.total||0)+" results ",1),t("div",pt,[o.submissions.prev_page_url?(n(),_(d(h),{key:0,href:o.submissions.prev_page_url,class:"px-3 py-1 bg-slate-200 text-slate-700 rounded hover:bg-slate-300 transition-colors"},{default:m(()=>[...e[17]||(e[17]=[x(" Previous ",-1)])]),_:1},8,["href"])):c("",!0),o.submissions.next_page_url?(n(),_(d(h),{key:1,href:o.submissions.next_page_url,class:"px-3 py-1 bg-slate-200 text-slate-700 rounded hover:bg-slate-300 transition-colors"},{default:m(()=>[...e[18]||(e[18]=[x(" Next ",-1)])]),_:1},8,["href"])):c("",!0)])])):c("",!0)]),u.value?(n(),a("div",kt,[t("div",wt,[t("div",_t,[t("div",{class:"flex items-center justify-between"},[e[21]||(e[21]=t("h3",{class:"text-xl font-semibold text-slate-900"},"Grade Submission",-1)),t("button",{onClick:g,class:"text-slate-400 hover:text-slate-600"},[...e[20]||(e[20]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("p",yt,l(u.value.student?.name),1)]),t("form",{onSubmit:z(C,["prevent"]),class:"p-6"},[t("div",St,[t("label",jt," Score (out of "+l(o.assignment.total_points)+") * ",1),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>d(i).score=s),type:"number",min:"0",max:o.assignment.total_points,required:"",class:w(["w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",{"border-red-300":d(i).errors.score}])},null,10,Ct),[[S,d(i).score]]),d(i).errors.score?(n(),a("p",Bt,l(d(i).errors.score),1)):c("",!0)]),t("div",Mt,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Feedback (Optional)",-1)),y(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>d(i).feedback=s),rows:"6",class:"w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Provide feedback to help the student improve..."},null,512),[[S,d(i).feedback]]),d(i).errors.feedback?(n(),a("p",Vt,l(d(i).errors.feedback),1)):c("",!0)]),t("div",Gt,[t("button",{type:"button",onClick:g,class:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors"}," Cancel "),t("button",{type:"submit",disabled:d(i).processing,class:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},l(d(i).processing?"Submitting...":"Submit Grade"),9,Dt)])],32)])])):c("",!0)]),_:1},8,["title"])],64))}};export{Ft as default};
