import{r as j,A as M,m as d,E as S,c as n,o as i,a as w,u as y,h as B,w as k,b as t,t as a,j as r,i as u,F as c,f as x,n as _,k as z,l as A}from"./app-CExNfixo.js";import{_ as N}from"./DashboardLayout-C8jebKpM.js";const L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},$={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},T={class:"flex items-center justify-between"},G={class:"text-2xl font-bold text-amber-600"},V={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},D={class:"flex items-center justify-between"},O={class:"text-2xl font-bold text-green-600"},I={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},W={class:"flex items-center justify-between"},q={class:"text-2xl font-bold text-indigo-600"},H={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},U={class:"flex items-center justify-between"},E={class:"text-2xl font-bold text-purple-600"},F={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Q={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50"},R={class:"p-6 border-b border-slate-200/50"},J={class:"flex items-center justify-between"},K={class:"text-sm text-slate-500 mt-1"},X={key:0,class:"text-sm text-slate-500"},Y={class:"p-6"},Z={key:0,class:"space-y-4"},tt={class:"flex items-start justify-between mb-3"},et={class:"flex-1"},st={class:"flex items-center space-x-2 mb-2"},ot={class:"w-8 h-8 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-white text-sm font-bold"},at={class:"font-semibold text-slate-800"},it={class:"text-xs text-slate-500 ml-10"},nt=["onClick"],lt={key:0,class:"bg-white/70 rounded-lg p-3 ml-10"},rt={class:"text-sm text-slate-700 italic"},dt={key:1,class:"text-center py-8"},ct={key:2,class:"flex items-center justify-between mt-6 pt-4 border-t border-slate-200"},gt={class:"flex space-x-2"},ut=["disabled"],xt=["disabled"],mt={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50"},ht={class:"p-6 border-b border-slate-200/50"},bt={class:"flex items-center justify-between"},vt={class:"text-sm text-slate-500 mt-1"},pt={key:0,class:"text-sm text-slate-500"},ft={class:"p-6"},wt={key:0,class:"space-y-4"},yt={class:"flex items-start justify-between mb-3"},kt={class:"flex-1"},_t={class:"flex items-center space-x-2 mb-2"},Ct={class:"font-semibold text-slate-800"},Pt={class:"text-sm text-slate-600 ml-5"},jt={class:"text-xs text-slate-500 ml-5"},Mt={key:0,class:"bg-white/70 rounded-lg p-3 ml-5"},St={class:"text-sm text-slate-700 italic"},Bt={key:1,class:"text-center py-8"},zt={key:2,class:"flex items-center justify-between mt-6 pt-4 border-t border-slate-200"},At={class:"flex space-x-2"},Nt=["disabled"],Lt=["disabled"],$t={class:"mt-8 bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50"},Tt={class:"p-6 border-b border-slate-200/50"},Gt={class:"flex items-center justify-between"},Vt={class:"text-sm text-slate-500 mt-1"},Dt={key:0,class:"text-sm text-slate-500"},Ot={class:"p-6"},It={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wt={class:"flex items-start justify-between mb-3"},qt={class:"flex-1"},Ht={class:"flex items-center space-x-2 mb-1"},Ut={class:"font-semibold text-slate-800"},Et={class:"text-sm text-slate-600 ml-4"},Ft={class:"text-xs text-slate-500 ml-4"},Qt={class:"text-right"},Rt={class:"flex items-center space-x-1"},Jt={class:"text-xs text-slate-500"},Kt={class:"text-xs text-slate-400 mt-1"},Xt={key:1,class:"text-center py-8"},Yt={key:2,class:"flex items-center justify-between mt-6 pt-4 border-t border-slate-200"},Zt={class:"flex space-x-2"},te=["disabled"],ee=["disabled"],ie={__name:"Index",props:{auth:Object,stats:Object,waitingChats:Array,activeChats:Array,recentChats:Array,waitingPagination:Object,activePagination:Object,historyPagination:Object,isAgent:Boolean},setup(s){const m=s;m.auth?.user;const g=j(null),h=l=>new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),C=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=l=>({low:"bg-green-100 text-green-700",normal:"bg-blue-100 text-blue-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"})[l]||"bg-gray-100 text-gray-700",P=l=>{d.post(route("complaints.assign",l))},v=l=>{d.get(route("complaints.index"),{waiting_page:l},{preserveState:!0,preserveScroll:!0})},p=l=>{d.get(route("complaints.index"),{active_page:l},{preserveState:!0,preserveScroll:!0})},f=l=>{d.get(route("complaints.index"),{history_page:l},{preserveState:!0,preserveScroll:!0})};return M(()=>{m.isAgent&&(g.value=setInterval(()=>{d.reload({only:["stats","waitingChats","activeChats"]})},5e3))}),S(()=>{g.value&&clearInterval(g.value)}),(l,e)=>(i(),n(c,null,[w(y(B),{title:"Support Chat Management"}),w(N,{title:"Support Chat Management",subtitle:"Manage live chat support requests and help users in real-time",stats:s.stats},{default:k(()=>[t("div",L,[t("div",$,[t("div",T,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-slate-500"},"Waiting in Queue",-1)),t("p",G,a(s.stats?.waiting_chats||0),1)]),e[7]||(e[7]=t("div",{class:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),t("div",V,[t("div",D,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-slate-500"},"Active Chats",-1)),t("p",O,a(s.stats?.active_chats||0),1)]),e[9]||(e[9]=t("div",{class:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.645C3.395 15.1 3 13.558 3 12c0-4.97 4.03-9 9-9s9 4.03 9 9z"})])],-1))])]),t("div",I,[t("div",W,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm text-slate-500"},"My Active Chats",-1)),t("p",q,a(s.stats?.my_active_chats||0),1)]),e[11]||(e[11]=t("div",{class:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])]),t("div",H,[t("div",U,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm text-slate-500"},"Total Today",-1)),t("p",E,a(s.stats?.total_today||0),1)]),e[13]||(e[13]=t("div",{class:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))])])]),t("div",F,[t("div",Q,[t("div",R,[t("div",J,[t("div",null,[e[14]||(e[14]=t("h2",{class:"text-xl font-bold text-slate-800 flex items-center"},[t("svg",{class:"w-5 h-5 mr-2 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),u(" Waiting Queue ")],-1)),t("p",K,a(s.waitingPagination?.total||0)+" users waiting for support",1)]),s.waitingPagination?.has_pages?(i(),n("div",X," Page "+a(s.waitingPagination.current_page)+" of "+a(s.waitingPagination.last_page),1)):r("",!0)])]),t("div",Y,[s.waitingChats?.length?(i(),n("div",Z,[(i(!0),n(c,null,x(s.waitingChats,o=>(i(),n("div",{key:o.id,class:"group p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl border border-amber-200 hover:shadow-lg transition-all duration-300 hover:scale-[1.02]"},[t("div",tt,[t("div",et,[t("div",st,[t("div",ot,a(o.queue_position),1),t("span",at,a(o.user?.name||o.user_name||"Guest"),1),t("span",{class:_([b(o.priority),"px-2 py-1 text-xs font-semibold rounded-full"])},a(o.priority),3)]),t("p",it,"Waiting since "+a(h(o.created_at)),1)]),t("button",{onClick:se=>P(o.session_id),class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-sm font-semibold rounded-xl hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 group-hover:scale-105"}," Take Chat ",8,nt)]),o.messages?.length?(i(),n("div",lt,[t("p",rt,'"'+a(o.messages[0].message.substring(0,80))+a(o.messages[0].message.length>80?"...":"")+'"',1)])):r("",!0)]))),128))])):(i(),n("div",dt,[...e[15]||(e[15]=[t("svg",{class:"w-16 h-16 mx-auto text-slate-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.645C3.395 15.1 3 13.558 3 12c0-4.97 4.03-9 9-9s9 4.03 9 9z"})],-1),t("p",{class:"text-slate-500"},"No users waiting for support",-1),t("p",{class:"text-xs text-slate-400 mt-1"},"Great job staying on top of support!",-1)])])),s.waitingPagination?.has_pages?(i(),n("div",ct,[t("div",gt,[t("button",{onClick:e[0]||(e[0]=o=>v(s.waitingPagination.current_page-1)),disabled:s.waitingPagination.current_page===1,class:"px-3 py-2 text-sm bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," ← Prev ",8,ut),t("button",{onClick:e[1]||(e[1]=o=>v(s.waitingPagination.current_page+1)),disabled:!s.waitingPagination.has_more_pages,class:"px-3 py-2 text-sm bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next → ",8,xt)]),e[16]||(e[16]=t("span",{class:"text-sm text-slate-500"}," Showing 2 per page ",-1))])):r("",!0)])]),t("div",mt,[t("div",ht,[t("div",bt,[t("div",null,[e[17]||(e[17]=t("h2",{class:"text-xl font-bold text-slate-800 flex items-center"},[t("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.645C3.395 15.1 3 13.558 3 12c0-4.97 4.03-9 9-9s9 4.03 9 9z"})]),u(" My Active Chats ")],-1)),t("p",vt,a(s.activePagination?.total||0)+" chats you're currently handling",1)]),s.activePagination?.has_pages?(i(),n("div",pt," Page "+a(s.activePagination.current_page)+" of "+a(s.activePagination.last_page),1)):r("",!0)])]),t("div",ft,[s.activeChats?.length?(i(),n("div",wt,[(i(!0),n(c,null,x(s.activeChats,o=>(i(),z(y(A),{key:o.id,href:l.route("complaints.chat",o.session_id),class:"block group p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border border-green-200 hover:shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-green-100 hover:to-emerald-100"},{default:k(()=>[t("div",yt,[t("div",kt,[t("div",_t,[e[18]||(e[18]=t("div",{class:"w-3 h-3 bg-green-500 rounded-full animate-pulse"},null,-1)),t("span",Ct,a(o.user?.name||o.user_name||"Guest"),1),t("span",{class:_([b(o.priority),"px-2 py-1 text-xs font-semibold rounded-full"])},a(o.priority),3)]),t("p",Pt,a(o.category||"General Support"),1),t("p",jt,"Active since "+a(h(o.assigned_at)),1)]),e[19]||(e[19]=t("div",{class:"flex items-center space-x-2"},[t("div",{class:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full"}," Live "),t("svg",{class:"w-5 h-5 text-green-600 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))]),o.messages?.length?(i(),n("div",Mt,[t("p",St,'"'+a(o.messages[0].message.substring(0,80))+a(o.messages[0].message.length>80?"...":"")+'"',1)])):r("",!0)]),_:2},1032,["href"]))),128))])):(i(),n("div",Bt,[...e[20]||(e[20]=[t("svg",{class:"w-16 h-16 mx-auto text-slate-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.645C3.395 15.1 3 13.558 3 12c0-4.97 4.03-9 9-9s9 4.03 9 9z"})],-1),t("p",{class:"text-slate-500"},"No active chats assigned to you",-1),t("p",{class:"text-xs text-slate-400 mt-1"},"Take a chat from the waiting queue to get started",-1)])])),s.activePagination?.has_pages?(i(),n("div",zt,[t("div",At,[t("button",{onClick:e[2]||(e[2]=o=>p(s.activePagination.current_page-1)),disabled:s.activePagination.current_page===1,class:"px-3 py-2 text-sm bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," ← Prev ",8,Nt),t("button",{onClick:e[3]||(e[3]=o=>p(s.activePagination.current_page+1)),disabled:!s.activePagination.has_more_pages,class:"px-3 py-2 text-sm bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next → ",8,Lt)]),e[21]||(e[21]=t("span",{class:"text-sm text-slate-500"}," Showing 2 per page ",-1))])):r("",!0)])])]),t("div",$t,[t("div",Tt,[t("div",Gt,[t("div",null,[e[22]||(e[22]=t("h2",{class:"text-xl font-bold text-slate-800 flex items-center"},[t("svg",{class:"w-5 h-5 mr-2 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),u(" Recent Chat History ")],-1)),t("p",Vt,a(s.historyPagination?.total||0)+" recently closed support sessions",1)]),s.historyPagination?.has_pages?(i(),n("div",Dt," Page "+a(s.historyPagination.current_page)+" of "+a(s.historyPagination.last_page),1)):r("",!0)])]),t("div",Ot,[s.recentChats?.length?(i(),n("div",It,[(i(!0),n(c,null,x(s.recentChats,o=>(i(),n("div",{key:o.id,class:"group p-4 bg-gradient-to-r from-slate-50 to-gray-50 rounded-2xl border border-slate-200 hover:shadow-md transition-all duration-300 hover:scale-[1.01]"},[t("div",Wt,[t("div",qt,[t("div",Ht,[e[23]||(e[23]=t("div",{class:"w-2 h-2 bg-slate-400 rounded-full"},null,-1)),t("span",Ut,a(o.user?.name||o.user_name||"Guest"),1),e[24]||(e[24]=t("span",{class:"px-2 py-1 text-xs font-semibold rounded-full bg-slate-100 text-slate-600"}," Closed ",-1))]),t("p",Et,a(o.category||"General Support"),1),t("p",Ft,a(C(o.closed_at)),1)]),t("div",Qt,[t("div",Rt,[e[25]||(e[25]=t("svg",{class:"w-3 h-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),t("p",Jt,a(o.agent?.name||"System"),1)]),t("p",Kt,a(o.resolution_summary?"Resolved":"Closed"),1)])])]))),128))])):(i(),n("div",Xt,[...e[26]||(e[26]=[t("svg",{class:"w-16 h-16 mx-auto text-slate-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("p",{class:"text-slate-500"},"No recent chat history",-1),t("p",{class:"text-xs text-slate-400 mt-1"},"Completed chats will appear here",-1)])])),s.historyPagination?.has_pages?(i(),n("div",Yt,[t("div",Zt,[t("button",{onClick:e[4]||(e[4]=o=>f(s.historyPagination.current_page-1)),disabled:s.historyPagination.current_page===1,class:"px-3 py-2 text-sm bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," ← Prev ",8,te),t("button",{onClick:e[5]||(e[5]=o=>f(s.historyPagination.current_page+1)),disabled:!s.historyPagination.has_more_pages,class:"px-3 py-2 text-sm bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next → ",8,ee)]),e[27]||(e[27]=t("span",{class:"text-sm text-slate-500"}," Showing 2 per page ",-1))])):r("",!0)])])]),_:1},8,["stats"])],64))}};export{ie as default};
