import{r as S,x as K,p as w,c as a,o as d,a as E,u as o,h as Z,w as _,b as e,j as g,t as i,d as m,e as W,v as b,g as $,F as k,f as M,n as z,l as j,i as V,k as A,q as D,m as B}from"./app-BLMHNAP5.js";import{_ as J}from"./DashboardLayout-Cgi-9x6o.js";const Q={class:"space-y-6"},X={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Y={class:"bg-white rounded-3xl p-6 shadow-xl border border-slate-200/50"},ee={class:"flex items-center"},te={class:"ml-4"},se={class:"text-2xl font-bold text-gray-900"},oe={class:"bg-white rounded-3xl p-6 shadow-xl border border-slate-200/50"},ne={class:"flex items-center"},ie={class:"ml-4"},re={class:"text-2xl font-bold text-gray-900"},le={class:"bg-white rounded-3xl p-6 shadow-xl border border-slate-200/50"},de={class:"flex items-center"},ae={class:"ml-4"},ue={class:"text-2xl font-bold text-gray-900"},ce={class:"bg-white rounded-3xl p-6 shadow-xl border border-slate-200/50"},ge={class:"flex items-center"},xe={class:"ml-4"},me={class:"text-2xl font-bold text-gray-900"},pe={class:"bg-white rounded-3xl p-6 shadow-xl border border-slate-200/50"},fe={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0"},be={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4"},ye={class:"flex space-x-2"},ve={class:"flex space-x-3"},he={key:0,class:"mt-4 p-4 bg-indigo-50 rounded-lg border border-indigo-200"},we={class:"flex items-center justify-between"},_e={class:"text-sm font-medium text-indigo-800"},ke={class:"space-x-2"},je={class:"bg-white rounded-3xl shadow-xl border border-slate-200/50 overflow-hidden"},Ce={class:"overflow-x-auto"},Se={class:"min-w-full divide-y divide-gray-200"},Ee={class:"bg-gray-50"},Me={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ve=["checked"],Ae={class:"bg-white divide-y divide-gray-200"},Be={class:"px-6 py-4 whitespace-nowrap"},Ue=["value","onChange","checked"],$e={class:"px-6 py-4 whitespace-nowrap"},ze={class:"flex items-center"},De={class:"flex-shrink-0 h-10 w-10"},Fe={class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},Pe={class:"text-sm font-medium text-indigo-600"},Ne={class:"ml-4"},Re={class:"text-sm font-medium text-gray-900"},Ge={class:"text-sm text-gray-500"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},qe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ie={class:"px-6 py-4 whitespace-nowrap"},Le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},He={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Ke=["onClick"],Ze=["onClick"],We={key:0,class:"px-6 py-4 border-t border-gray-200"},Je={class:"flex items-center justify-between"},Qe={class:"flex-1 flex justify-between sm:hidden"},Xe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ye={class:"text-sm text-gray-700"},et={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},tt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},st={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},ot={class:"mt-3"},nt={class:"mb-4"},it={class:"mb-4"},rt={class:"mb-4"},lt={class:"flex justify-end space-x-3"},dt=["disabled"],at={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ut={class:"relative top-10 mx-auto p-5 border w-[600px] shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto"},ct={class:"mt-3"},gt={class:"mb-4"},xt={class:"grid grid-cols-2 gap-4 mb-4"},mt={class:"block text-sm font-medium text-gray-700 mb-1"},pt=["onUpdate:modelValue"],ft={class:"flex justify-end space-x-3"},bt=["disabled"],ht={__name:"Index",props:{auth:Object,extensions:Object,stats:Object,filters:Object},setup(r){const y=r,l=S([]),F=K(()=>l.value.length>0),v=S(!1),h=S(!1),p=w({action:"",payment_ids:[],rejection_reason:""}),u=w({user_id:"",months:1,reason:""}),x=w({region:"malawi",pricing:{1:25e3,2:5e4,3:75e3,4:1e5,6:137500,12:25e4}}),f=w({search:y.filters?.search||"",status:y.filters?.status||"all"}),P=(n,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:t==="MWK"?0:2}).format(n),N=n=>new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=n=>({pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[n]||"bg-gray-100 text-gray-800",G=n=>{const t=l.value.indexOf(n);t>-1?l.value.splice(t,1):l.value.push(n)},O=()=>{l.value.length===y.extensions.data.length?l.value=[]:l.value=y.extensions.data.map(n=>n.id)},U=n=>{if(p.action=n,p.payment_ids=l.value,n==="approve")confirm(`Are you sure you want to approve ${l.value.length} extension(s)?`)&&p.post(route("admin.extensions.bulk-action"),{onSuccess:()=>{l.value=[]}});else{const t=prompt("Enter rejection reason:");t&&(p.rejection_reason=t,p.post(route("admin.extensions.bulk-action"),{onSuccess:()=>{l.value=[]}}))}},C=()=>{B.get(route("admin.extensions.index"),f.data(),{preserveState:!0,replace:!0})},T=()=>{u.post(route("admin.extensions.grant"),{onSuccess:()=>{v.value=!1,u.reset()}})},q=()=>{x.post(route("admin.extensions.update-pricing"),{onSuccess:()=>{h.value=!1}})},I=n=>{confirm(`Approve extension for ${n.enrollment.name}?`)&&B.post(route("admin.extensions.approve",n.id))},L=n=>{const t=prompt("Enter rejection reason:");t&&B.post(route("admin.extensions.reject",n.id),{rejection_reason:t})};return(n,t)=>(d(),a(k,null,[E(o(Z),{title:"Extension Management"}),E(J,{title:"Extension Management",subtitle:"Manage student access extensions"},{default:_(()=>[e("div",Q,[e("div",X,[e("div",Y,[e("div",ee,[t[14]||(t[14]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",te,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Extensions",-1)),e("p",se,i(r.stats.total),1)])])]),e("div",oe,[e("div",ne,[t[16]||(t[16]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ie,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Pending",-1)),e("p",re,i(r.stats.pending),1)])])]),e("div",le,[e("div",de,[t[18]||(t[18]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ae,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-600"},"Verified",-1)),e("p",ue,i(r.stats.verified),1)])])]),e("div",ce,[e("div",ge,[t[20]||(t[20]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",xe,[t[19]||(t[19]=e("p",{class:"text-sm font-medium text-gray-600"},"Rejected",-1)),e("p",me,i(r.stats.rejected),1)])])])]),e("div",pe,[e("div",fe,[e("div",be,[e("div",ye,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(f).search=s),type:"text",placeholder:"Search by name or enrollment number...",class:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",onKeyup:W(C,["enter"])},null,544),[[b,o(f).search]]),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o(f).status=s),class:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",onChange:C},[...t[21]||(t[21]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"verified"},"Verified",-1),e("option",{value:"rejected"},"Rejected",-1)])],544),[[$,o(f).status]]),e("button",{onClick:C,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Search ")])]),e("div",ve,[e("button",{onClick:t[2]||(t[2]=s=>v.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"}," Grant Extension "),e("button",{onClick:t[3]||(t[3]=s=>h.value=!0),class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors"}," Update Pricing ")])]),F.value?(d(),a("div",he,[e("div",we,[e("span",_e,i(l.value.length)+" extension(s) selected ",1),e("div",ke,[e("button",{onClick:t[4]||(t[4]=s=>U("approve")),class:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700"}," Approve Selected "),e("button",{onClick:t[5]||(t[5]=s=>U("reject")),class:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700"}," Reject Selected "),e("button",{onClick:t[6]||(t[6]=s=>l.value=[]),class:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700"}," Clear ")])])])):g("",!0)]),e("div",je,[e("div",Ce,[e("table",Se,[e("thead",Ee,[e("tr",null,[e("th",Me,[e("input",{type:"checkbox",onChange:O,checked:l.value.length===r.extensions.data.length&&r.extensions.data.length>0,class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Ve)]),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Student",-1)),t[23]||(t[23]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Duration",-1)),t[24]||(t[24]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount",-1)),t[25]||(t[25]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Payment Method",-1)),t[26]||(t[26]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1)),t[27]||(t[27]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date",-1)),t[28]||(t[28]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",Ae,[(d(!0),a(k,null,M(r.extensions.data,s=>(d(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Be,[e("input",{type:"checkbox",value:s.id,onChange:c=>G(s.id),checked:l.value.includes(s.id),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Ue)]),e("td",$e,[e("div",ze,[e("div",De,[e("div",Fe,[e("span",Pe,i(s.enrollment.name.charAt(0)),1)])]),e("div",Ne,[e("div",Re,i(s.enrollment.name),1),e("div",Ge,i(s.enrollment.enrollment_number),1)])])]),e("td",Oe,i(s.extension_months)+" month"+i(s.extension_months>1?"s":""),1),e("td",Te,i(P(s.amount,s.currency)),1),e("td",qe,i(s.payment_method?.name||"N/A"),1),e("td",Ie,[e("span",{class:z(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",R(s.status)])},i(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)]),e("td",Le,i(N(s.created_at)),1),e("td",He,[E(o(j),{href:n.route("admin.extensions.show",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:_(()=>[...t[29]||(t[29]=[V(" View ",-1)])]),_:2},1032,["href"]),s.status==="pending"?(d(),a("button",{key:0,onClick:c=>I(s),class:"text-green-600 hover:text-green-900"}," Approve ",8,Ke)):g("",!0),s.status==="pending"?(d(),a("button",{key:1,onClick:c=>L(s),class:"text-red-600 hover:text-red-900"}," Reject ",8,Ze)):g("",!0)])]))),128))])])]),r.extensions.links&&r.extensions.links.length>3?(d(),a("div",We,[e("nav",Je,[e("div",Qe,[r.extensions.prev_page_url?(d(),A(o(j),{key:0,href:r.extensions.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:_(()=>[...t[30]||(t[30]=[V(" Previous ",-1)])]),_:1},8,["href"])):g("",!0),r.extensions.next_page_url?(d(),A(o(j),{key:1,href:r.extensions.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:_(()=>[...t[31]||(t[31]=[V(" Next ",-1)])]),_:1},8,["href"])):g("",!0)]),e("div",Xe,[e("div",null,[e("p",Ye," Showing "+i(r.extensions.from||0)+" to "+i(r.extensions.to||0)+" of "+i(r.extensions.total)+" results ",1)]),e("div",null,[e("nav",et,[(d(!0),a(k,null,M(r.extensions.links,s=>(d(),A(o(j),{key:s.label,href:s.url||"#",class:z(["relative inline-flex items-center px-2 py-2 border text-sm font-medium",s.active?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50",s.url?"cursor-pointer":"cursor-not-allowed opacity-50"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])])])):g("",!0)]),v.value?(d(),a("div",tt,[e("div",st,[e("div",ot,[t[35]||(t[35]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Grant Extension",-1)),e("form",{onSubmit:D(T,["prevent"])},[e("div",nt,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student ID",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(u).user_id=s),type:"number",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter user ID"},null,512),[[b,o(u).user_id]])]),e("div",it,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Extension Duration (months)",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(u).months=s),type:"number",min:"1",max:"24",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[b,o(u).months]])]),e("div",rt,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason",-1)),m(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>o(u).reason=s),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Reason for granting extension..."},null,512),[[b,o(u).reason]])]),e("div",lt,[e("button",{type:"button",onClick:t[10]||(t[10]=s=>v.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300"}," Cancel "),e("button",{type:"submit",disabled:o(u).processing,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50"}," Grant Extension ",8,dt)])],32)])])])):g("",!0),h.value?(d(),a("div",at,[e("div",ut,[e("div",ct,[t[38]||(t[38]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Update Extension Pricing",-1)),e("form",{onSubmit:D(q,["prevent"])},[e("div",gt,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Region",-1)),m(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>o(x).region=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[...t[36]||(t[36]=[e("option",{value:"malawi"},"Malawi",-1),e("option",{value:"south_africa"},"South Africa",-1),e("option",{value:"zambia"},"Zambia",-1),e("option",{value:"botswana"},"Botswana",-1),e("option",{value:"zimbabwe"},"Zimbabwe",-1),e("option",{value:"international"},"International",-1)])],512),[[$,o(x).region]])]),e("div",xt,[(d(!0),a(k,null,M(o(x).pricing,(s,c)=>(d(),a("div",{key:c},[e("label",mt,i(c)+" Month"+i(c>1?"s":""),1),m(e("input",{"onUpdate:modelValue":H=>o(x).pricing[c]=H,type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,8,pt),[[b,o(x).pricing[c]]])]))),128))]),e("div",ft,[e("button",{type:"button",onClick:t[12]||(t[12]=s=>h.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300"}," Cancel "),e("button",{type:"submit",disabled:o(x).processing,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50"}," Update Pricing ",8,bt)])],32)])])])):g("",!0)])]),_:1})],64))}};export{ht as default};
