import{r as d,D as ue,c as u,o as i,j as f,b as e,E as D,q as I,t as c,d as A,y as ce,R as ee,x as ve,a as G,u as M,h as pe,w as me,l as fe,F as te,f as xe,v as O,k as se,i as he}from"./app-eyie9m1X.js";import be from"./TopicSidebar-Ct_YjX_a.js";import ge from"./LessonCard-CmenXxG8.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ke={class:"chunked-upload-container"},ye={key:0,class:"upload-area"},Ce={key:1,class:"mt-4 p-4 bg-slate-50 rounded-xl"},_e={class:"flex items-center justify-between"},je={class:"flex items-center space-x-3"},Me={class:"font-medium text-slate-700"},$e={class:"text-sm text-slate-500"},Se={class:"flex space-x-2"},Ve={class:"flex items-center space-x-2"},ze={key:2,class:"mt-4"},Fe={class:"bg-white rounded-xl p-6 shadow-sm border"},Te={class:"w-full bg-slate-200 rounded-full h-2"},Ue={class:"text-xs text-slate-500 mt-2"},Be={key:3,class:"mt-4"},Ae={class:"bg-white rounded-xl p-6 shadow-sm border"},De={class:"flex items-center justify-between mb-4"},Le={class:"flex items-center space-x-3"},Ne={class:"text-sm text-slate-600"},Ee={class:"space-y-2"},Pe={class:"flex justify-between text-sm"},Oe={class:"font-medium"},He={class:"w-full bg-slate-200 rounded-full h-3"},Ie={class:"flex justify-between text-xs text-slate-500"},Re={key:4,class:"mt-4"},qe={key:5,class:"mt-4"},Ke={class:"bg-red-50 border border-red-200 rounded-xl p-4"},We={class:"flex items-center space-x-3"},Ge={class:"text-sm text-red-600"},Xe={__name:"ChunkedVideoUpload",props:{onUploadComplete:Function,maxFileSize:{type:Number,default:1024*1024*1024},chunkSize:{type:Number,default:1024*1024*2}},setup($){const b=$,p=d(null),j=d(null),k=d(!1),y=d(0),m=d(!1),a=d(0),C=d(0),V=d(0),x=d(!1),v=d(""),S=d(""),T=d(!0),L=d(null),z=d(0),U=d(0),H=d("Calculating..."),B=d("Calculating..."),R=o=>{const s=o.target.files[0];s&&t(s)},n=o=>{const s=o.dataTransfer.files[0];s&&t(s)},t=o=>{if(!o.type.startsWith("video/")){v.value="Please select a valid video file";return}if(o.size>b.maxFileSize){v.value=`File size exceeds ${N(b.maxFileSize)} limit`;return}p.value=o,v.value="",x.value=!1},r=()=>{p.value=null,j.value=null,v.value="",x.value=!1},q=async o=>T.value?new Promise((s,w)=>{const l=document.createElement("video"),g=document.createElement("canvas"),h=g.getContext("2d");l.preload="metadata",l.onloadedmetadata=()=>{const _=Math.min(1,Math.min(1280/l.videoWidth,720/l.videoHeight));g.width=l.videoWidth*_,g.height=l.videoHeight*_;const F=g.captureStream(30),E=new MediaRecorder(F,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:1e6}),Y=[];let P=0;const K=l.duration;E.ondataavailable=W=>{Y.push(W.data)},E.onstop=()=>{const W=new Blob(Y,{type:"video/webm"}),de=new File([W],o.name.replace(/\.[^/.]+$/,".webm"),{type:"video/webm"});s(de)},E.start();const Z=()=>{P<K?(l.currentTime=P,l.onseeked=()=>{h.drawImage(l,0,0,g.width,g.height),P+=1/30,y.value=P/K*100,P<K?requestAnimationFrame(Z):E.stop()}):E.stop()};l.currentTime=0,l.onseeked=()=>{Z()}},l.onerror=()=>{w(new Error("Video compression failed"))},l.src=URL.createObjectURL(o)}):o,X=async()=>{if(p.value)try{k.value=T.value,y.value=0;let o=p.value;if(T.value)try{o=await q(p.value),j.value=o}catch(s){console.warn("Compression failed, uploading original file:",s),o=p.value}k.value=!1,m.value=!0,L.value=Date.now(),U.value=o.size,z.value=0,await oe(o)}catch(o){v.value=o.message,m.value=!1,k.value=!1}},oe=async o=>{const s=Math.ceil(o.size/b.chunkSize);V.value=s;const l=await(await fetch("/api/upload/initiate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({fileName:o.name,fileSize:o.size,chunkSize:b.chunkSize,totalChunks:s})})).json();if(!l.success)throw new Error(l.error||"Failed to initialize upload");S.value=l.uploadId,await le(o,s)},le=async(o,s)=>{const l=[];for(let _=0;_<s;_++)l.push(()=>ae(o,_));let g=0;const h=new Set;for(;g<l.length||h.size>0;){for(;h.size<3&&g<l.length;){const _=l[g++]().then(()=>{h.delete(_)}).catch(F=>{throw h.delete(_),F});h.add(_)}h.size>0&&await Promise.race(h)}await ne()},ae=async(o,s)=>{const w=s*b.chunkSize,l=Math.min(w+b.chunkSize,o.size),g=o.slice(w,l),h=new FormData;h.append("chunk",g),h.append("chunkNumber",s),h.append("totalChunks",V.value);const F=await(await fetch(`/api/upload/${S.value}/chunk`,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:h})).json();if(!F.success)throw new Error(F.error||"Chunk upload failed");C.value=F.uploadedChunks,a.value=F.progress,z.value=C.value/V.value*U.value,re()},ne=async()=>{const s=await(await fetch(`/api/upload/${S.value}/finalize`,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();if(!s.success)throw new Error(s.error||"Upload finalization failed");m.value=!1,x.value=!0,b.onUploadComplete&&b.onUploadComplete({filePath:s.filePath,fileName:p.value.name,fileSize:s.fileSize,duration:s.duration})},J=async()=>{if(S.value)try{await fetch(`/api/upload/${S.value}/cancel`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})}catch(o){console.error("Cancel upload error:",o)}Q()},ie=()=>{v.value="",a.value=0,C.value=0,m.value=!1,X()},Q=()=>{p.value=null,j.value=null,k.value=!1,y.value=0,m.value=!1,a.value=0,C.value=0,V.value=0,x.value=!1,v.value="",S.value="",z.value=0,U.value=0},N=o=>{if(o===0)return"0 Bytes";const s=1024,w=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(s));return parseFloat((o/Math.pow(s,l)).toFixed(2))+" "+w[l]},re=()=>{if(!L.value)return;const o=(Date.now()-L.value)/1e3,s=z.value/o;H.value=`${N(s)}/s`;const l=(U.value-z.value)/s;if(isFinite(l))if(l<60)B.value=`${Math.round(l)}s`;else if(l<3600)B.value=`${Math.round(l/60)}m ${Math.round(l%60)}s`;else{const g=Math.floor(l/3600),h=Math.floor(l%3600/60);B.value=`${g}h ${h}m`}};return ue(()=>{S.value&&m.value&&J()}),(o,s)=>(i(),u("div",ke,[!m.value&&!x.value?(i(),u("div",ye,[e("input",{ref:"fileInput",type:"file",accept:"video/*",onChange:R,class:"hidden"},null,544),e("div",{onClick:s[0]||(s[0]=w=>o.$refs.fileInput.click()),onDragover:s[1]||(s[1]=I(()=>{},["prevent"])),onDrop:I(n,["prevent"]),class:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center cursor-pointer hover:border-indigo-400 hover:bg-indigo-50/50 transition-all duration-200"},[...s[3]||(s[3]=[D('<div class="flex flex-col items-center space-y-4" data-v-e95f8fa7><svg class="w-12 h-12 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e95f8fa7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" data-v-e95f8fa7></path></svg><div data-v-e95f8fa7><p class="text-lg font-semibold text-slate-700" data-v-e95f8fa7>Click to upload or drag and drop</p><p class="text-sm text-slate-500 mt-1" data-v-e95f8fa7>Supports MP4, MOV, AVI, WMV, MKV up to 1GB</p><p class="text-xs text-slate-400 mt-2" data-v-e95f8fa7>Fast chunked upload with compression</p></div></div>',1)])],32)])):f("",!0),p.value&&!m.value&&!x.value?(i(),u("div",Ce,[e("div",_e,[e("div",je,[s[4]||(s[4]=e("div",{class:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1)),e("div",null,[e("p",Me,c(p.value.name),1),e("p",$e,c(N(p.value.size)),1)])]),e("div",Se,[e("label",Ve,[A(e("input",{"onUpdate:modelValue":s[2]||(s[2]=w=>T.value=w),type:"checkbox",class:"rounded"},null,512),[[ce,T.value]]),s[5]||(s[5]=e("span",{class:"text-sm text-slate-600"},"Compress (faster upload)",-1))]),e("button",{onClick:X,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200"}," Start Upload "),e("button",{onClick:r,class:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors duration-200"}," Cancel ")])])])):f("",!0),k.value?(i(),u("div",ze,[e("div",Fe,[s[6]||(s[6]=D('<div class="flex items-center space-x-3 mb-4" data-v-e95f8fa7><div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center" data-v-e95f8fa7><svg class="w-4 h-4 text-blue-600 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e95f8fa7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" data-v-e95f8fa7></path></svg></div><div data-v-e95f8fa7><p class="font-semibold text-slate-800" data-v-e95f8fa7>Compressing Video...</p><p class="text-sm text-slate-600" data-v-e95f8fa7>Optimizing for faster upload</p></div></div>',1)),e("div",Te,[e("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:ee({width:y.value+"%"})},null,4)]),e("p",Ue,c(y.value.toFixed(1))+"% complete",1)])])):f("",!0),m.value?(i(),u("div",Be,[e("div",Ae,[e("div",De,[e("div",Le,[s[8]||(s[8]=e("div",{class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),e("div",null,[s[7]||(s[7]=e("p",{class:"font-semibold text-slate-800"},"Uploading Video...",-1)),e("p",Ne,c(C.value)+"/"+c(V.value)+" chunks • "+c(H.value),1)])]),e("button",{onClick:J,class:"text-red-600 hover:text-red-700 text-sm font-medium"}," Cancel ")]),e("div",Ee,[e("div",Pe,[s[9]||(s[9]=e("span",{class:"text-slate-600"},"Progress",-1)),e("span",Oe,c(a.value.toFixed(1))+"%",1)]),e("div",He,[e("div",{class:"bg-gradient-to-r from-green-500 to-emerald-600 h-3 rounded-full transition-all duration-300",style:ee({width:a.value+"%"})},null,4)]),e("div",Ie,[e("span",null,c(N(z.value))+" / "+c(N(U.value)),1),e("span",null,"ETA: "+c(B.value),1)])])])])):f("",!0),x.value?(i(),u("div",Re,[e("div",{class:"bg-green-50 border border-green-200 rounded-xl p-6"},[s[10]||(s[10]=D('<div class="flex items-center space-x-3" data-v-e95f8fa7><div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center" data-v-e95f8fa7><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e95f8fa7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-e95f8fa7></path></svg></div><div data-v-e95f8fa7><p class="font-semibold text-green-800" data-v-e95f8fa7>Upload Successful!</p><p class="text-sm text-green-600" data-v-e95f8fa7>Video uploaded and processed successfully</p></div></div>',1)),e("button",{onClick:Q,class:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium"}," Upload Another Video ")])])):f("",!0),v.value?(i(),u("div",qe,[e("div",Ke,[e("div",We,[s[12]||(s[12]=e("svg",{class:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.126 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",null,[s[11]||(s[11]=e("p",{class:"font-medium text-red-800"},"Upload Failed",-1)),e("p",Ge,c(v.value),1)])]),e("button",{onClick:ie,class:"mt-2 text-sm text-red-700 hover:text-red-800 font-medium"}," Try Again ")])])):f("",!0)]))}},Je=we(Xe,[["__scopeId","data-v-e95f8fa7"]]),Qe={class:"flex h-screen bg-gradient-to-br from-slate-50 to-blue-50 font-sans text-slate-800"},Ye={class:"flex-1 flex flex-col"},Ze={class:"h-20 bg-white/70 backdrop-blur-xl border-b border-slate-200/50 px-8 flex items-center justify-between relative z-50"},et={class:"flex items-center space-x-4"},tt={class:"text-2xl font-bold text-slate-800"},st={class:"text-slate-500 text-sm"},ot={key:0,class:"flex items-center space-x-4"},lt=["disabled"],at={class:"flex-1 overflow-y-auto p-8 space-y-6"},nt={key:0,class:"space-y-6"},it={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},rt={class:"flex items-center justify-between mb-4"},dt={class:"text-2xl font-bold text-slate-800"},ut={class:"text-slate-600 mt-1"},ct={class:"flex items-center space-x-4 text-sm text-slate-500"},vt={key:0},pt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},mt={key:1,class:"text-center py-16"},ft={key:1,class:"text-center py-16"},xt={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},ht={class:"bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-slate-200/50 max-w-md w-full mx-4"},bt={class:"space-y-4"},gt={key:1,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},wt={class:"bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-slate-200/50 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},kt={class:"space-y-6"},yt={key:0,class:"space-y-3"},Ct={key:2,class:"mt-3 p-4 bg-green-50 border border-green-200 rounded-xl"},_t={class:"flex items-center justify-between"},jt={class:"flex items-center space-x-3"},Mt={class:"text-xs text-green-600"},$t={key:0,class:"ml-2"},St={class:"flex justify-end space-x-4 mt-8"},Vt=["disabled"],zt={key:0},Ft={key:1,class:"flex items-center space-x-2"},Dt={__name:"SubjectPageOld",props:{auth:Object,subject:Object},setup($){const b=$,p=b.auth?.user||{name:"Guest",role:"guest",profile_photo_url:null},j=d(b.subject.topics[0]?.id||null),k=d(!1),y=d(!1),m=d({name:"",description:""}),a=d({title:"",description:"",notes:"",videoData:null}),C=d(!1),V=d(0),x=d(!1),v=ve(()=>b.subject.topics.find(n=>n.id===j.value)),S=n=>{j.value=n},T=async()=>{try{const n=await axios.post(route("topics.store"),{subject_id:b.subject.id,name:m.value.name,description:m.value.description});n.data.success&&(b.subject.topics.push(n.data.topic),m.value={name:"",description:""},k.value=!1,j.value=n.data.topic.id)}catch(n){console.error("Error adding topic:",n),alert("Error adding topic. Please try again.")}},L=async()=>{if(!C.value)try{C.value=!0;const n=new FormData;n.append("topic_id",j.value),n.append("title",a.value.title),n.append("description",a.value.description),n.append("notes",a.value.notes),a.value.videoData&&(n.append("video_path",a.value.videoData.filePath),n.append("video_filename",a.value.videoData.fileName||"uploaded_video.mp4"),a.value.videoData.duration&&n.append("duration_minutes",a.value.videoData.duration));const t=await axios.post(route("lessons.store"),n);if(t.data.success){const r=b.subject.topics.find(q=>q.id===j.value);r&&(r.lessons||(r.lessons=[]),r.lessons.push(t.data.lesson)),a.value={title:"",description:"",notes:"",videoData:null},y.value=!1,x.value=!1}}catch(n){console.error("Error adding lesson:",n),alert("Error adding lesson. Please try again.")}finally{C.value=!1,V.value=0}},z=n=>{a.value.videoData=n,x.value=!1},U=n=>{console.error("Video upload error:",n),alert("Video upload failed. Please try again.")},H=()=>{a.value.videoData=null,x.value=!1},B=()=>{m.value={name:"",description:""},k.value=!1},R=()=>{a.value={title:"",description:"",notes:"",videoData:null},y.value=!1,x.value=!1};return(n,t)=>(i(),u(te,null,[G(M(pe),{title:$.subject.name},null,8,["title"]),e("div",Qe,[G(be,{subject:$.subject,selectedTopicId:j.value,onSelectTopic:S},null,8,["subject","selectedTopicId"]),e("div",Ye,[e("header",Ze,[e("div",null,[e("div",et,[G(M(fe),{href:n.route("subjects.index"),class:"p-2 hover:bg-slate-100 rounded-xl transition-colors duration-200"},{default:me(()=>[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),e("div",null,[e("h1",tt,c($.subject.name),1),e("p",st,c($.subject.department)+" - "+c($.subject.grade_level),1)])])]),M(p)?.role==="admin"||M(p)?.role==="teacher"?(i(),u("div",ot,[e("button",{onClick:t[0]||(t[0]=r=>k.value=!0),class:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-medium hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg"},[...t[12]||(t[12]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",null,"Add Topic")],-1)])]),e("button",{onClick:t[1]||(t[1]=r=>y.value=!0),disabled:!v.value,class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[...t[13]||(t[13]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]),e("span",null,"Add Lesson")],-1)])],8,lt)])):f("",!0)]),e("main",at,[v.value?(i(),u("div",nt,[e("div",it,[e("div",rt,[e("div",null,[e("h2",dt,c(v.value.name),1),e("p",ut,c(v.value.description||"No description provided."),1)]),e("div",ct,[e("span",null,c(v.value.lessons?.length||0)+" lessons",1),v.value.total_duration?(i(),u("span",vt,c(Math.floor(v.value.total_duration/60))+"h "+c(v.value.total_duration%60)+"m",1)):f("",!0)])])]),v.value.lessons&&v.value.lessons.length>0?(i(),u("div",pt,[(i(!0),u(te,null,xe(v.value.lessons,r=>(i(),se(ge,{key:r.id,lesson:r,canManage:M(p)?.role==="admin"||M(p)?.role==="teacher"},null,8,["lesson","canManage"]))),128))])):(i(),u("div",mt,[t[14]||(t[14]=D('<div class="w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 rounded-3xl flex items-center justify-center mx-auto mb-6"><svg class="w-12 h-12 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-semibold text-slate-800 mb-2">No lessons yet</h3><p class="text-slate-500 mb-6">Start building your subject by adding the first lesson.</p>',3)),M(p)?.role==="admin"||M(p)?.role==="teacher"?(i(),u("button",{key:0,onClick:t[2]||(t[2]=r=>y.value=!0),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1"}," Add First Lesson ")):f("",!0)]))])):$.subject.topics.length===0?(i(),u("div",ft,[t[15]||(t[15]=D('<div class="w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 rounded-3xl flex items-center justify-center mx-auto mb-6"><svg class="w-12 h-12 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><h3 class="text-xl font-semibold text-slate-800 mb-2">No topics yet</h3><p class="text-slate-500 mb-6">Create your first topic to start organizing lessons.</p>',3)),M(p)?.role==="admin"||M(p)?.role==="teacher"?(i(),u("button",{key:0,onClick:t[3]||(t[3]=r=>k.value=!0),class:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-2xl font-semibold hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1"}," Create First Topic ")):f("",!0)])):f("",!0)])]),k.value?(i(),u("div",xt,[e("div",ht,[t[19]||(t[19]=e("h3",{class:"text-xl font-bold text-slate-800 mb-6"},"Add New Topic",-1)),e("form",{onSubmit:I(T,["prevent"])},[e("div",bt,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Topic Name*",-1)),A(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>m.value.name=r),type:"text",required:"",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:bg-white transition-all duration-200",placeholder:"e.g. Introduction, Basic Concepts"},null,512),[[O,m.value.name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),A(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=r=>m.value.description=r),rows:"3",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:bg-white transition-all duration-200",placeholder:"Brief description of this topic..."},null,512),[[O,m.value.description]])])]),e("div",{class:"flex justify-end space-x-4 mt-6"},[e("button",{type:"button",onClick:B,class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-medium transition-all duration-200"}," Cancel "),t[18]||(t[18]=e("button",{type:"submit",class:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-medium hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg"}," Add Topic ",-1))])],32)])])):f("",!0),y.value?(i(),u("div",gt,[e("div",wt,[t[29]||(t[29]=e("h3",{class:"text-xl font-bold text-slate-800 mb-6"},"Add New Lesson",-1)),e("form",{onSubmit:I(L,["prevent"])},[e("div",kt,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Lesson Title*",-1)),A(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>a.value.title=r),type:"text",required:"",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"e.g. Introduction to Algebra"},null,512),[[O,a.value.title]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),A(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=r=>a.value.description=r),rows:"3",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"What will students learn in this lesson?"},null,512),[[O,a.value.description]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Video File",-1)),!a.value.videoData&&!x.value?(i(),u("div",yt,[e("button",{onClick:t[8]||(t[8]=r=>x.value=!0),type:"button",class:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-dashed border-blue-300 rounded-2xl p-6 hover:border-blue-400 hover:bg-gradient-to-r hover:from-blue-100 hover:to-indigo-100 transition-all duration-200"},[...t[22]||(t[22]=[D('<div class="text-center"><svg class="mx-auto h-12 w-12 text-blue-400" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><p class="mt-2 text-sm font-medium text-slate-700">Upload Video File</p><p class="text-xs text-slate-500">Fast chunked upload with compression</p><p class="text-xs text-slate-400 mt-1">MP4, MOV, AVI, WMV, MKV up to 1GB</p></div>',1)])])])):f("",!0),x.value?(i(),se(Je,{key:1,onUploadSuccess:z,onUploadError:U,onCancel:t[9]||(t[9]=r=>x.value=!1),class:"mt-3"})):f("",!0),a.value.videoData?(i(),u("div",Ct,[e("div",_t,[e("div",jt,[t[24]||(t[24]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1)),e("div",null,[t[23]||(t[23]=e("p",{class:"text-sm font-medium text-green-800"},"Video uploaded successfully!",-1)),e("p",Mt,[he(c(a.value.videoData.fileName)+" ",1),a.value.videoData.duration?(i(),u("span",$t,"• "+c(a.value.videoData.duration)+" min",1)):f("",!0)])])]),e("button",{onClick:H,type:"button",class:"text-green-600 hover:text-green-800"},[...t[25]||(t[25]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):f("",!0)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Lesson Notes",-1)),A(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=r=>a.value.notes=r),rows:"4",class:"w-full bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"Additional notes, resources, or homework for this lesson..."},null,512),[[O,a.value.notes]])])]),e("div",St,[e("button",{type:"button",onClick:R,class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-medium transition-all duration-200"}," Cancel "),e("button",{type:"submit",disabled:C.value,class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-medium hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[C.value?(i(),u("span",Ft,[t[28]||(t[28]=e("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),e("path",{fill:"currentColor",class:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("span",null,"Uploading... "+c(V.value)+"%",1)])):(i(),u("span",zt,"Add Lesson"))],8,Vt)])],32)])])):f("",!0)])],64))}};export{Dt as default};
