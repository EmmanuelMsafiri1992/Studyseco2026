import{r as E,p as A,x as D,c as r,o as l,a as d,u as o,h as R,w as _,b as e,j as u,n as x,t as a,q as B,F as g,f as h,i as v}from"./app-wxJDyBFX.js";import{_ as V}from"./DashboardLayout-Nk09nnvr.js";import{P as N}from"./PrimaryButton-Bl5QSAPS.js";import{_ as j}from"./SecondaryButton-CIz6LQE1.js";import{_ as P,a as $}from"./TextInput-B61mkRja.js";import{_ as y}from"./InputError-DIbX6s2O.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},z={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},I={class:"p-6"},O={class:"mb-8"},U={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},T={class:"text-center"},H={class:"text-center"},L={class:"text-lg font-medium text-gray-900"},W={class:"text-center"},J={class:"space-y-6"},K={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4"},Q=["onClick"],X={class:"text-center"},Y={class:"text-lg font-bold text-gray-900"},Z={key:0,class:"mt-1"},ee={key:1,class:"mt-1"},te={key:0},se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ne=["onClick"],oe={class:"flex-1"},re={class:"font-medium text-gray-900"},le={class:"text-sm text-gray-600 mt-1"},ie={class:"text-sm font-medium text-blue-600 mt-1"},ae={key:1,class:"space-y-4"},de={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},ce={class:"text-sm text-yellow-700"},me={class:"flex items-center justify-end space-x-4 pt-4 border-t"},ue={key:0,class:"flex items-center"},xe={key:1},pe={key:1,class:"text-center py-8"},ge={key:0,class:"mt-8 bg-white overflow-hidden shadow-xl sm:rounded-lg"},ye={class:"p-6"},fe={class:"overflow-x-auto"},be={class:"min-w-full divide-y divide-gray-200"},_e={class:"bg-white divide-y divide-gray-200"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},we={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ke={class:"px-6 py-4 whitespace-nowrap"},Re={__name:"Extension",props:{enrollment:Object,extensionPricing:Object,paymentMethods:Array,daysRemaining:Number,accessExpired:Boolean},setup(i){const w=i,p=E(!1),f=E(null),n=A({extension_months:null,payment_method_id:null,payment_reference:"",payment_proof:null}),S=D(()=>w.enrollment.payments?w.enrollment.payments.filter(c=>c.payment_type==="extension"):[]),k=c=>new Date(c).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),b=(c,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:t==="MWK"?0:2}).format(c),M=c=>{n.payment_proof=c.target.files[0]},C=()=>{n.reset(),f.value&&(f.value.value="")},F=()=>{p.value=!0,n.transform(c=>({...c,_method:"POST"})).post(route("student.extension.store"),{forceFormData:!0,onSuccess:()=>{p.value=!0,C()},onError:()=>{p.value=!1}})};return(c,t)=>(l(),r(g,null,[d(o(R),{title:"Extend Access"}),d(V,{title:"Extend Access",subtitle:"Extend your subject access period"},{default:_(()=>[e("div",q,[e("div",z,[e("div",I,[e("div",O,[e("div",U,[t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Current Access Status",-1)),e("div",G,[e("div",T,[t[1]||(t[1]=e("p",{class:"text-sm text-gray-600"},"Days Remaining",-1)),e("p",{class:x(["text-2xl font-bold",i.daysRemaining>7?"text-green-600":i.daysRemaining>0?"text-yellow-600":"text-red-600"])},a(i.daysRemaining>0?i.daysRemaining:0),3)]),e("div",H,[t[2]||(t[2]=e("p",{class:"text-sm text-gray-600"},"Access Expires",-1)),e("p",L,a(k(i.enrollment.access_expires_at)),1)]),e("div",W,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-600"},"Status",-1)),e("span",{class:x(["px-3 py-1 rounded-full text-sm font-medium",i.accessExpired?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(i.accessExpired?"Expired":"Active"),3)])])])]),p.value?u("",!0):(l(),r("form",{key:0,onSubmit:B(F,["prevent"])},[e("div",J,[e("div",null,[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Choose Extension Duration",-1)),e("div",K,[(l(!0),r(g,null,h(i.extensionPricing,(s,m)=>(l(),r("div",{key:m,class:x(["border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md",o(n).extension_months==m?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-blue-300"]),onClick:Ce=>o(n).extension_months=parseInt(m)},[e("div",X,[e("p",Y,a(m)+" Month"+a(m>1?"s":""),1),e("p",{class:x(["text-sm font-medium",o(n).extension_months==m?"text-blue-600":"text-gray-600"])},a(b(s,i.enrollment.currency)),3),m==6?(l(),r("div",Z,[...t[5]||(t[5]=[e("span",{class:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full"},"10% OFF",-1)])])):u("",!0),m==12?(l(),r("div",ee,[...t[6]||(t[6]=[e("span",{class:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full"},"2 Months FREE",-1)])])):u("",!0)])],10,Q))),128))]),d(y,{message:o(n).errors.extension_months,class:"mt-2"},null,8,["message"])]),o(n).extension_months?(l(),r("div",te,[t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Payment Method",-1)),e("div",se,[(l(!0),r(g,null,h(i.paymentMethods,s=>(l(),r("div",{key:s.id,class:x(["border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md flex items-center",o(n).payment_method_id==s.id?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-blue-300"]),onClick:m=>o(n).payment_method_id=s.id},[e("div",oe,[e("h4",re,a(s.name),1),e("p",le,a(s.description),1),e("p",ie,a(s.account_details),1)])],10,ne))),128))]),d(y,{message:o(n).errors.payment_method_id,class:"mt-2"},null,8,["message"])])):u("",!0),o(n).payment_method_id&&o(n).extension_months?(l(),r("div",ae,[e("div",de,[t[10]||(t[10]=e("h4",{class:"font-medium text-yellow-800 mb-2"},"Payment Instructions",-1)),e("p",ce,[t[9]||(t[9]=v(" Total Amount: ",-1)),e("strong",null,a(b(i.extensionPricing[o(n).extension_months],i.enrollment.currency)),1)]),t[11]||(t[11]=e("p",{class:"text-sm text-yellow-700 mt-1"}," Make payment using the selected method above, then provide your payment reference and upload proof below. ",-1))]),e("div",null,[d(P,{for:"payment_reference",value:"Payment Reference Number"}),d($,{id:"payment_reference",modelValue:o(n).payment_reference,"onUpdate:modelValue":t[0]||(t[0]=s=>o(n).payment_reference=s),type:"text",class:"mt-1 block w-full",placeholder:"Enter your transaction reference number",required:""},null,8,["modelValue"]),d(y,{message:o(n).errors.payment_reference,class:"mt-2"},null,8,["message"])]),e("div",null,[d(P,{for:"payment_proof",value:"Payment Proof"}),e("input",{id:"payment_proof",ref_key:"fileInput",ref:f,type:"file",onChange:M,accept:".jpg,.jpeg,.png,.pdf",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:""},null,544),t[12]||(t[12]=e("p",{class:"mt-1 text-sm text-gray-600"},"Upload screenshot or receipt (JPG, PNG, PDF max 5MB)",-1)),d(y,{message:o(n).errors.payment_proof,class:"mt-2"},null,8,["message"])]),e("div",me,[d(j,{onClick:C},{default:_(()=>[...t[13]||(t[13]=[v(" Reset ",-1)])]),_:1}),d(N,{class:x({"opacity-25":o(n).processing}),disabled:o(n).processing},{default:_(()=>[o(n).processing?(l(),r("div",ue,[...t[14]||(t[14]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),v(" Submitting... ",-1)])])):(l(),r("span",xe,"Submit Extension Request"))]),_:1},8,["class","disabled"])])])):u("",!0)])],32)),p.value?(l(),r("div",pe,[...t[15]||(t[15]=[e("div",{class:"inline-flex items-center px-6 py-3 bg-blue-50 border border-blue-200 rounded-lg"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-6 w-6 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-blue-800 font-medium"},"Processing your extension request...")],-1),e("p",{class:"text-gray-600 mt-3"},"We will verify your payment within 24 hours and notify you via email and SMS.",-1)])])):u("",!0)])]),i.enrollment.payments&&i.enrollment.payments.length>0?(l(),r("div",ge,[e("div",ye,[t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Previous Extension Requests",-1)),e("div",fe,[e("table",be,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Duration"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),e("tbody",_e,[(l(!0),r(g,null,h(S.value,s=>(l(),r("tr",{key:s.id},[e("td",he,a(k(s.created_at)),1),e("td",ve,a(s.extension_months)+" Month"+a(s.extension_months>1?"s":""),1),e("td",we,a(b(s.amount,s.currency)),1),e("td",ke,[e("span",{class:x(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.status==="verified"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},a(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)])]))),128))])])])])])):u("",!0)])]),_:1})],64))}};export{Re as default};
