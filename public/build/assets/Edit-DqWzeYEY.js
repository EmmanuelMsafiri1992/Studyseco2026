import{p as C,s as A,c,o as u,a as b,u as o,h as N,w as v,b as e,t as n,q as V,j as p,i as h,F as g,f as k,n as D,d as f,v as w,g as O,l as U}from"./app-qZFDf0Ah.js";import{_ as $}from"./DashboardLayout-jaqNmyqo.js";const q={class:"max-w-4xl mx-auto"},B={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50 mb-8"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M={class:"text-slate-800 font-medium"},T={class:"text-slate-800"},L={class:"text-slate-800"},P={class:"text-slate-800"},z={class:"text-slate-800 font-mono"},G={class:"text-slate-800"},I={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},R={class:"text-lg font-semibold text-slate-800 mb-4"},H={class:"text-sm font-normal text-slate-500"},J={key:0,class:"text-red-500 text-sm mb-4"},K={class:"space-y-6"},Q={class:"flex items-center justify-between mb-3"},W={class:"text-md font-medium text-slate-700"},X=["onClick"],Y={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},Z=["onClick"],ee={class:"font-medium text-sm"},te={key:0,class:"text-xs text-slate-500 mt-1"},se={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},oe={key:0,class:"text-red-500 text-xs mt-1"},ne={class:"md:col-span-2"},ie={class:"flex items-center justify-between"},de=["disabled"],ue={__name:"Edit",props:{enrollment:Object,subjects:Array,subjectNames:Array},setup(r){const m=r,s=C({selected_subjects:m.enrollment.selected_subjects||[],access_expires_at:m.enrollment.access_expires_at?m.enrollment.access_expires_at.split("T")[0]:"",status:m.enrollment.status,admin_notes:m.enrollment.admin_notes||""}),_=A(()=>{const l={};return m.subjects.forEach(t=>{const i=t.grade_level||"Other";l[i]||(l[i]=[]),l[i].push(t)}),l}),y=l=>{const t=s.selected_subjects.indexOf(l);t>-1?s.selected_subjects.splice(t,1):s.selected_subjects.push(l)},x=l=>s.selected_subjects.includes(l),S=l=>{const t=_.value[l];t.every(a=>x(a.id))?t.forEach(a=>{const d=s.selected_subjects.indexOf(a.id);d>-1&&s.selected_subjects.splice(d,1)}):t.forEach(a=>{x(a.id)||s.selected_subjects.push(a.id)})},j=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),E=()=>{s.put(route("admin.enrollments.update",m.enrollment.id),{onSuccess:()=>{},onError:l=>{console.error("Update errors:",l)}})};return(l,t)=>(u(),c(g,null,[b(o(N),{title:`Edit Enrollment - ${r.enrollment.name}`},null,8,["title"]),b($,{title:"Edit Enrollment",subtitle:`Editing enrollment for ${r.enrollment.name}`},{default:v(()=>[e("div",q,[e("div",B,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold text-slate-800 mb-4"},"Student Information",-1)),e("div",F,[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-xs font-medium text-slate-500 uppercase tracking-wider"},"Name",-1)),e("p",M,n(r.enrollment.name),1)]),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-xs font-medium text-slate-500 uppercase tracking-wider"},"Email",-1)),e("p",T,n(r.enrollment.email),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-xs font-medium text-slate-500 uppercase tracking-wider"},"Phone",-1)),e("p",L,n(r.enrollment.phone),1)]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-xs font-medium text-slate-500 uppercase tracking-wider"},"Country",-1)),e("p",P,n(r.enrollment.country),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-xs font-medium text-slate-500 uppercase tracking-wider"},"Enrollment Number",-1)),e("p",z,n(r.enrollment.enrollment_number),1)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-xs font-medium text-slate-500 uppercase tracking-wider"},"Enrolled On",-1)),e("p",G,n(j(r.enrollment.created_at)),1)])])]),e("form",{onSubmit:V(E,["prevent"]),class:"space-y-8"},[e("div",I,[e("h2",R,[t[10]||(t[10]=h(" Enrolled Subjects ",-1)),e("span",H,"("+n(o(s).selected_subjects.length)+" selected)",1)]),o(s).errors.selected_subjects?(u(),c("div",J,n(o(s).errors.selected_subjects),1)):p("",!0),e("div",K,[(u(!0),c(g,null,k(_.value,(i,a)=>(u(),c("div",{key:a},[e("div",Q,[e("h3",W,n(a),1),e("button",{type:"button",onClick:d=>S(a),class:"text-xs text-indigo-600 hover:text-indigo-800 font-medium"},n(i.every(d=>x(d.id))?"Deselect All":"Select All"),9,X)]),e("div",Y,[(u(!0),c(g,null,k(i,d=>(u(),c("button",{key:d.id,type:"button",onClick:re=>y(d.id),class:D(["p-3 rounded-xl text-left transition-all duration-200 border-2",x(d.id)?"border-indigo-500 bg-indigo-50 text-indigo-800":"border-slate-200 bg-slate-50 text-slate-700 hover:border-indigo-300"])},[e("div",ee,n(d.name),1),d.code?(u(),c("div",te,n(d.code),1)):p("",!0)],10,Z))),128))])]))),128))])]),e("div",se,[t[15]||(t[15]=e("h2",{class:"text-lg font-semibold text-slate-800 mb-4"},"Enrollment Settings",-1)),e("div",le,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Access Expires At *",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>o(s).access_expires_at=i),type:"date",required:"",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200"},null,512),[[w,o(s).access_expires_at]]),o(s).errors.access_expires_at?(u(),c("div",oe,n(o(s).errors.access_expires_at),1)):p("",!0)]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Status *",-1)),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>o(s).status=i),required:"",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200"},[...t[12]||(t[12]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],512),[[O,o(s).status]])]),e("div",ne,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Admin Notes",-1)),f(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=i=>o(s).admin_notes=i),rows:"3",placeholder:"Optional notes about this enrollment...",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200"},null,512),[[w,o(s).admin_notes]])])])]),e("div",ie,[b(o(U),{href:l.route("admin.enrollments.show",r.enrollment.id),class:"px-6 py-3 text-sm font-medium text-slate-600 bg-slate-100 rounded-2xl hover:bg-slate-200 transition-colors"},{default:v(()=>[...t[16]||(t[16]=[h(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:o(s).processing||o(s).selected_subjects.length===0,class:"px-8 py-3 text-sm font-medium text-white bg-indigo-500 rounded-2xl hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},n(o(s).processing?"Saving...":"Save Changes"),9,de)])],32)])]),_:1},8,["subtitle"])],64))}};export{ue as default};
