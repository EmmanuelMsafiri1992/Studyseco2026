import{r as f,p as A,x as g,c as n,o as d,a as y,u as r,h as P,w as B,b as e,t as l,F as p,f as v,i as k,q as E,j as c,n as _,d as F,v as N}from"./app-CUT9d-xB.js";import{_ as V}from"./DashboardLayout-C96m34Bm.js";const U={class:"max-w-4xl mx-auto space-y-8"},q={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-slate-200/50"},z={class:"flex items-center justify-between mb-6"},R={class:"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium"},D={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},I={class:"text-2xl mr-3"},L={class:"font-medium text-slate-800"},O={class:"text-xs text-slate-500"},$={class:"bg-blue-50 rounded-xl p-4 border border-blue-200"},H={class:"flex items-center space-x-2 text-blue-800"},K={class:"text-sm"},T={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-slate-200/50"},W={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Y=["onClick"],Q={class:"flex-1"},Z={class:"flex items-center space-x-3"},G={class:"text-2xl"},J={class:"font-medium text-slate-800"},X={class:"text-xs text-slate-500"},ee={key:0,class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},te={key:1,class:"text-center py-8"},se={key:2,class:"mt-4 p-3 bg-red-50 rounded-lg border border-red-200"},oe={class:"text-sm text-red-600"},re={key:3,class:"mt-6 p-6 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100"},le={class:"flex items-center justify-between"},ne={class:"text-sm text-slate-600"},de={class:"text-right"},ie={class:"text-3xl font-bold text-indigo-600"},ae={class:"text-sm text-slate-500"},ce={key:0,class:"bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-slate-200/50"},ue={class:"mb-6"},me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},be=["onClick"],pe={class:"text-2xl mr-3"},xe={class:"font-medium text-slate-800"},he={class:"text-xs text-slate-500 mt-1"},ve={key:0,class:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200"},_e={class:"text-sm text-red-600"},fe={class:"mb-6"},ge=["required"],ye={key:0,class:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200"},ke={class:"text-sm text-red-600"},we={class:"mb-6"},je={class:"flex items-center space-x-4"},Se={class:"flex items-center px-6 py-3 border-2 border-dashed border-slate-300 rounded-xl cursor-pointer hover:border-indigo-400 transition-colors"},Ce=["required"],Me={key:0,class:"w-20 h-20 border border-slate-300 rounded-lg overflow-hidden"},Ae=["src"],Pe={key:0,class:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200"},Be={class:"text-sm text-red-600"},Ee={key:1,class:"flex flex-col space-y-4"},Fe=["disabled"],Ne={class:"flex items-center justify-center space-x-2"},Ve={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},Ue={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Re={__name:"IncreaseSubjects",props:{auth:Object,enrollment:Object,currentSubjects:Array,availableSubjects:Array,pricePerSubject:Number,currency:String,paymentMethods:Array},setup(u){const m=u,a=f([]),s=A({additional_subjects:[],payment_method:"",reference_number:"",proof_screenshot:null}),b=f(null),w=g(()=>{const i=a.value?.length||0,t=m.pricePerSubject||0;return i*t}),x=i=>(m.currency==="MWK"?"MWK ":m.currency==="ZAR"?"R ":m.currency==="USD"?"$ ":m.currency+" ")+new Intl.NumberFormat().format(i),j=i=>{const t=a.value.indexOf(i);t>-1?a.value.splice(t,1):a.value.push(i),s.additional_subjects=[...a.value]},S=i=>{const t=i.target.files[0];if(s.proof_screenshot=t,t){const o=new FileReader;o.onload=h=>{b.value=h.target.result},o.readAsDataURL(t)}else b.value=null},C=()=>{s.post(route("student.enrollment.store-subject-increase"),{preserveScroll:!0,onSuccess:()=>{},onError:i=>{console.error("Subject increase errors:",i)}})},M=g(()=>m.paymentMethods||[]);return(i,t)=>(d(),n(p,null,[y(r(P),{title:"Increase Subjects"}),y(V,{title:"Add More Subjects",subtitle:"Expand your learning with additional subjects"},{default:B(()=>[e("div",U,[e("div",q,[e("div",z,[t[1]||(t[1]=e("h2",{class:"text-2xl font-bold text-slate-800"},"Current Enrollment",-1)),e("div",R,l(u.currentSubjects.length)+" Subject"+l(u.currentSubjects.length!==1?"s":""),1)]),e("div",D,[(d(!0),n(p,null,v(u.currentSubjects,o=>(d(),n("div",{key:o.id,class:"flex items-center p-4 bg-slate-50 rounded-xl border border-slate-200"},[e("span",I,l(o.icon),1),e("div",null,[e("h4",L,l(o.name),1),e("p",O,l(o.department),1)])]))),128))]),e("div",$,[e("div",H,[t[4]||(t[4]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",K,[t[2]||(t[2]=k(" You can add more subjects to expand your learning opportunities. Each additional subject costs ",-1)),e("strong",null,l(x(u.pricePerSubject)),1),t[3]||(t[3]=k(". ",-1))])])])]),e("form",{onSubmit:E(C,["prevent"]),class:"space-y-8",novalidate:""},[e("div",T,[t[8]||(t[8]=e("h2",{class:"text-2xl font-bold text-slate-800 mb-6"},"Select Additional Subjects",-1)),u.availableSubjects.length>0?(d(),n("div",W,[(d(!0),n(p,null,v(u.availableSubjects,o=>(d(),n("div",{key:o.id,class:"relative"},[e("div",{onClick:h=>j(o.id),class:_([{"border-indigo-500 bg-indigo-50":a.value.includes(o.id),"border-slate-200 hover:border-indigo-300":!a.value.includes(o.id)},"flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all duration-200"])},[e("div",Q,[e("div",Z,[e("span",G,l(o.icon),1),e("div",null,[e("h4",J,l(o.name),1),e("p",X,l(o.department),1)])])]),e("div",{class:_([{"border-indigo-500 bg-indigo-500":a.value.includes(o.id),"border-slate-300":!a.value.includes(o.id)},"w-5 h-5 border-2 rounded flex items-center justify-center"])},[a.value.includes(o.id)?(d(),n("svg",ee,[...t[5]||(t[5]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):c("",!0)],2)],10,Y)]))),128))])):(d(),n("div",te,[...t[6]||(t[6]=[e("div",{class:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1),e("h3",{class:"text-lg font-semibold text-slate-800 mb-2"},"All Subjects Enrolled",-1),e("p",{class:"text-slate-600"},"You're already enrolled in all available subjects!",-1)])])),r(s).errors.additional_subjects?(d(),n("div",se,[e("p",oe,l(r(s).errors.additional_subjects),1)])):c("",!0),r(s).additional_subjects.length>0?(d(),n("div",re,[e("div",le,[e("div",null,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-slate-800"},"Additional Cost",-1)),e("p",ne,l(r(s).additional_subjects.length)+" additional subject"+l(r(s).additional_subjects.length!==1?"s":""),1)]),e("div",de,[e("p",ie,l(x(w.value)),1),e("p",ae,l(x(u.pricePerSubject))+" per subject",1)])])])):c("",!0)]),r(s).additional_subjects.length>0?(d(),n("div",ce,[t[14]||(t[14]=e("h2",{class:"text-2xl font-bold text-slate-800 mb-6"},"Payment Information",-1)),e("div",ue,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-700 mb-4"},"Select Payment Method",-1)),e("div",me,[(d(!0),n(p,null,v(M.value,o=>(d(),n("div",{key:o.code,class:"relative"},[e("div",{onClick:h=>r(s).payment_method=o.code,class:_([{"border-indigo-500 bg-indigo-50":r(s).payment_method===o.code,"border-slate-200 hover:border-indigo-300":r(s).payment_method!==o.code},"flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all duration-200"])},[e("span",pe,l(o.icon),1),e("div",null,[e("span",xe,l(o.name),1),e("p",he,l(o.description),1)])],10,be)]))),128))]),r(s).errors.payment_method?(d(),n("div",ve,[e("p",_e,l(r(s).errors.payment_method),1)])):c("",!0)]),e("div",fe,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Payment Reference Number",-1)),F(e("input",{type:"text",name:"reference_number","onUpdate:modelValue":t[0]||(t[0]=o=>r(s).reference_number=o),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter transaction/reference number",required:r(s).payment_method!=="trial"&&r(s).payment_method!==""},null,8,ge),[[N,r(s).reference_number]]),r(s).errors.reference_number?(d(),n("div",ye,[e("p",ke,l(r(s).errors.reference_number),1)])):c("",!0)]),e("div",we,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Payment Proof Screenshot",-1)),e("div",je,[e("label",Se,[t[11]||(t[11]=e("svg",{class:"w-6 h-6 text-slate-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),t[12]||(t[12]=e("span",{class:"text-sm text-slate-600"},"Upload Screenshot",-1)),e("input",{type:"file",name:"proof_screenshot",onChange:S,accept:"image/*",class:"hidden",required:r(s).payment_method!=="trial"&&r(s).payment_method!==""},null,40,Ce)]),b.value?(d(),n("div",Me,[e("img",{src:b.value,alt:"Payment proof preview",class:"w-full h-full object-cover"},null,8,Ae)])):c("",!0)]),r(s).errors.proof_screenshot?(d(),n("div",Pe,[e("p",Be,l(r(s).errors.proof_screenshot),1)])):c("",!0)])])):c("",!0),r(s).additional_subjects.length>0?(d(),n("div",Ee,[e("button",{type:"submit",disabled:r(s).processing,class:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[e("div",Ne,[r(s).processing?(d(),n("svg",Ve,[...t[15]||(t[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(d(),n("svg",Ue,[...t[16]||(t[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])])),e("span",null,l(r(s).processing?"Processing...":"Submit Payment for Verification"),1)])],8,Fe),t[17]||(t[17]=e("p",{class:"text-center text-sm text-slate-500"}," ðŸ’³ Secure payment processing â€¢ âš¡ Quick verification â€¢ ðŸ“š Instant access after approval ",-1))])):c("",!0)],32)])]),_:1})],64))}};export{Re as default};
