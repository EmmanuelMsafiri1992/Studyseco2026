import{p as S,r as c,z as M,c as o,o as s,a as P,b as e,u as v,h as A,E as N,t as m,n as y,j as g,i as _,d as j,v as E,F as Y,B as b}from"./app-qZFDf0Ah.js";const $={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 flex items-center justify-center px-4"},z={class:"max-w-md w-full"},L={class:"text-center mb-8"},T={class:"text-gray-600"},D={class:"flex items-center justify-center space-x-4 mb-8"},I={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},R={key:1,class:"text-sm font-medium"},U={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},W={key:1,class:"text-sm font-medium"},H={class:"bg-white rounded-2xl shadow-xl p-6 space-y-6"},O={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},q={class:"text-sm text-green-800"},G={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},J={class:"text-sm text-red-800"},K={key:2,class:"space-y-4"},Q={class:"text-sm text-gray-600 mb-4"},X={key:0},Z=["disabled"],ee={key:0},te={key:1},oe={key:1,class:"space-y-4"},se={class:"flex space-x-3"},ie=["disabled"],ne={key:0},re={key:1},le=["disabled"],ae={key:3,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},de={key:4,class:"space-y-4"},ue={class:"text-sm text-gray-600 mb-4"},ce={key:0},ve=["disabled"],ge={key:0},me={key:1},fe={key:1,class:"space-y-4"},pe={class:"flex space-x-3"},xe=["disabled"],ye={key:0},be={key:1},he=["disabled"],ke={key:5,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},we={key:6,class:"text-center space-y-4"},_e={class:"text-gray-600"},Ce={__name:"Verification",props:{enrollment:Object,verificationStatus:String},setup(f){const r=f,p=S({token:""}),x=S({code:""}),V=c(!1),C=c(!1),a=c(r.verificationStatus==="verified"||r.verificationStatus==="phone_verified"),d=c(r.verificationStatus==="verified"||r.verificationStatus==="email_verified"),n=c(!1),u=c(""),l=c(""),h=async()=>{n.value=!0,l.value="";try{const i=await b.post(`/verification/${r.enrollment.id}/email/send`);V.value=!0,u.value=i.data.message}catch(i){l.value=i.response?.data?.message||"Failed to send verification email"}finally{n.value=!1}},k=async()=>{n.value=!0,l.value="";try{const i=await b.post(`/verification/${r.enrollment.id}/phone/send`);C.value=!0,u.value=i.data.message,i.data.code&&(u.value+=` (Code: ${i.data.code})`)}catch(i){l.value=i.response?.data?.message||"Failed to send verification code"}finally{n.value=!1}},B=async()=>{n.value=!0,l.value="";try{const i=await b.post(`/verification/${r.enrollment.id}/email/verify`,{token:p.token});a.value=!0,u.value=i.data.message,i.data.redirect&&(window.location.href=i.data.redirect)}catch(i){l.value=i.response?.data?.message||"Invalid verification code"}finally{n.value=!1}},F=async()=>{n.value=!0,l.value="";try{const i=await b.post(`/verification/${r.enrollment.id}/phone/verify`,{code:x.code});d.value=!0,u.value=i.data.message,i.data.redirect&&(window.location.href=i.data.redirect)}catch(i){l.value=i.response?.data?.message||"Invalid verification code"}finally{n.value=!1}};return M(()=>{r.enrollment.is_trial&&!a.value&&h(),r.enrollment.is_trial&&!d.value&&setTimeout(()=>{k()},2e3)}),(i,t)=>(s(),o(Y,null,[P(v(A),{title:"Verify Your Account - StudySeco"}),e("div",$,[e("div",z,[e("div",L,[t[2]||(t[2]=N('<div class="w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M9 12l2 2 4-4"></path><path d="M21 12c-1.38 0-2.63.56-3.54 1.46A4 4 0 0 0 12 21a4 4 0 0 0-5.46-6.54A4 4 0 0 0 3 12a4 4 0 0 0 6.54-5.46A4 4 0 0 0 12 3a4 4 0 0 0 7 7 4 4 0 0 0 2 2z"></path></svg></div><h1 class="text-2xl font-bold text-gray-900 mb-2">Verify Your Account</h1>',2)),e("p",T,m(f.enrollment.is_trial?"Complete verification to start your 7-day free trial":"Verify your email and phone to complete enrollment"),1)]),e("div",D,[e("div",{class:y(["flex items-center space-x-2",a.value?"text-green-600":"text-gray-400"])},[e("div",{class:y(["w-8 h-8 rounded-full border-2 flex items-center justify-center",a.value?"bg-green-100 border-green-500":"border-gray-300"])},[a.value?(s(),o("svg",I,[...t[3]||(t[3]=[e("polyline",{points:"20,6 9,17 4,12"},null,-1)])])):(s(),o("span",R,"1"))],2),t[4]||(t[4]=e("span",{class:"text-sm font-medium"},"Email",-1))],2),t[7]||(t[7]=e("div",{class:"w-8 h-0.5 bg-gray-300"},null,-1)),e("div",{class:y(["flex items-center space-x-2",d.value?"text-green-600":"text-gray-400"])},[e("div",{class:y(["w-8 h-8 rounded-full border-2 flex items-center justify-center",d.value?"bg-green-100 border-green-500":"border-gray-300"])},[d.value?(s(),o("svg",U,[...t[5]||(t[5]=[e("polyline",{points:"20,6 9,17 4,12"},null,-1)])])):(s(),o("span",W,"2"))],2),t[6]||(t[6]=e("span",{class:"text-sm font-medium"},"Phone",-1))],2)]),e("div",H,[u.value?(s(),o("div",O,[e("p",q,m(u.value),1)])):g("",!0),l.value?(s(),o("div",G,[e("p",J,m(l.value),1)])):g("",!0),a.value?g("",!0):(s(),o("div",K,[e("div",null,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"ðŸ“§ Email Verification",-1)),e("p",Q,[t[8]||(t[8]=_(" We need to verify your email address: ",-1)),e("strong",null,m(f.enrollment.email),1)]),V.value?(s(),o("div",oe,[t[10]||(t[10]=e("div",{class:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},[e("p",{class:"text-sm text-blue-800"},"ðŸ“¨ Verification email sent! Check your inbox and spam folder.")],-1)),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Enter verification code from email: ",-1)),j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=w=>v(p).token=w),type:"text",placeholder:"Enter verification code",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[E,v(p).token]])]),e("div",se,[e("button",{onClick:B,disabled:!v(p).token||n.value,class:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[n.value?(s(),o("span",ne,"Verifying...")):(s(),o("span",re,"Verify Email"))],8,ie),e("button",{onClick:h,disabled:n.value,class:"px-4 py-3 text-indigo-600 hover:bg-indigo-50 rounded-lg font-medium transition-colors"}," Resend ",8,le)])])):(s(),o("div",X,[e("button",{onClick:h,disabled:n.value,class:"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[n.value?(s(),o("span",ee,"Sending...")):(s(),o("span",te,"Send Verification Email"))],8,Z)]))])])),a.value?(s(),o("div",ae,[...t[12]||(t[12]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",{class:"text-sm font-medium text-green-800"},"Email verified successfully!")],-1)])])):g("",!0),d.value?g("",!0):(s(),o("div",de,[e("div",null,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"ðŸ“± Phone Verification",-1)),e("p",ue,[t[13]||(t[13]=_(" We need to verify your phone number: ",-1)),e("strong",null,m(f.enrollment.phone),1)]),C.value?(s(),o("div",fe,[t[15]||(t[15]=e("div",{class:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},[e("p",{class:"text-sm text-blue-800"},"ðŸ“± Verification code sent to your phone (and email for testing)!")],-1)),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Enter 6-digit verification code: ",-1)),j(e("input",{"onUpdate:modelValue":t[1]||(t[1]=w=>v(x).code=w),type:"text",placeholder:"123456",maxlength:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center text-2xl tracking-wider"},null,512),[[E,v(x).code]])]),e("div",pe,[e("button",{onClick:F,disabled:v(x).code.length!==6||n.value,class:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[n.value?(s(),o("span",ye,"Verifying...")):(s(),o("span",be,"Verify Phone"))],8,xe),e("button",{onClick:k,disabled:n.value,class:"px-4 py-3 text-indigo-600 hover:bg-indigo-50 rounded-lg font-medium transition-colors"}," Resend ",8,he)])])):(s(),o("div",ce,[e("button",{onClick:k,disabled:n.value,class:"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[n.value?(s(),o("span",ge,"Sending...")):(s(),o("span",me,"Send Verification Code"))],8,ve)]))])])),d.value?(s(),o("div",ke,[...t[17]||(t[17]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",{class:"text-sm font-medium text-green-800"},"Phone verified successfully!")],-1)])])):g("",!0),a.value&&d.value?(s(),o("div",we,[t[18]||(t[18]=e("div",{class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto"},[e("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t[19]||(t[19]=e("h3",{class:"text-xl font-bold text-gray-900"},"Verification Complete!",-1)),e("p",_e,m(f.enrollment.is_trial?"Your 7-day free trial is now active!":"Your enrollment is being processed. You'll receive login details once approved."),1),t[20]||(t[20]=e("a",{href:"/",class:"inline-block bg-indigo-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-indigo-700 transition-colors"}," Continue to StudySeco ",-1))])):g("",!0)]),t[21]||(t[21]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-sm text-gray-500"},[_(" Having trouble? Contact us at "),e("a",{href:"mailto:support@studyseco.com",class:"text-indigo-600 hover:text-indigo-500"},"support@studyseco.com")])],-1))])])],64))}};export{Ce as default};
