import{r as j,p as L,x as U,c as i,o as n,a as f,u as r,h as D,w as x,b as e,j as c,l as b,d,v as h,t as a,F as v,f as k,k as N,i as C,q as z,g as M,y as H}from"./app-C2UhUgz_.js";import{_ as $}from"./DashboardLayout-D4NcXOPq.js";const F={class:"space-y-6"},T={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-2 shadow-xl border border-slate-200/50"},A={class:"flex space-x-1"},E={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},q={class:"flex flex-col md:flex-row gap-4 items-center justify-between"},O={class:"flex-1 max-w-md"},Y={class:"relative"},Q={class:"flex items-center space-x-4"},J={class:"text-sm text-slate-600"},K={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 overflow-hidden"},P={key:0,class:"divide-y divide-slate-200/50"},R={class:"flex items-center justify-between"},W={class:"flex items-center space-x-4 flex-1"},X={class:"w-12 h-12 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center justify-center text-white flex-shrink-0"},Z={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ee={class:"flex-1 min-w-0"},te={class:"flex items-center justify-between mb-1"},se={class:"font-semibold text-slate-800 group-hover:text-indigo-600 transition-colors duration-200 truncate"},oe={class:"flex items-center space-x-2 flex-shrink-0"},re={key:0,class:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full min-w-[20px]"},ne={key:1,class:"text-xs text-slate-500"},le={class:"flex items-center justify-between"},ie={class:"flex-1 min-w-0"},ae={key:0,class:"mb-1"},de={class:"inline-flex items-center px-2 py-1 text-xs font-medium bg-indigo-100 text-indigo-700 rounded-full"},ue={key:1,class:"text-sm text-slate-600 truncate"},ce={class:"font-medium"},me={key:2,class:"text-sm text-slate-400 italic"},fe={class:"flex items-center space-x-3 text-slate-400 group-hover:text-slate-600 transition-colors duration-200"},xe={class:"flex items-center space-x-1 text-xs"},pe={key:1,class:"p-12 text-center"},be={class:"text-slate-500 mb-6"},he={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},ve={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ge={class:"fixed inset-0 transition-opacity","aria-hidden":"true"},ye={class:"inline-block align-bottom bg-white rounded-3xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},we={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ke={class:"sm:flex sm:items-start"},_e={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},je={class:"space-y-4"},Ce={key:0,class:"mt-1 text-sm text-red-600"},Me={key:0,class:"mt-1 text-sm text-red-600"},Se={class:"grid grid-cols-2 gap-4"},Ve={key:0},Be=["value"],Ge={key:1},Le={class:"flex items-center"},Ue={class:"max-h-40 overflow-y-auto border border-gray-300 rounded-2xl p-3"},De=["id","value","onChange"],Ne=["for"],ze={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},He=["disabled"],$e={key:0},Fe={key:1},Ee={__name:"Index",props:{auth:Object,chatGroups:Array,subjects:Array,users:Array},setup(g){const y=g;y.auth?.user;const u=j(""),m=j(!1),o=L({name:"",description:"",type:"general",subject_id:"",max_members:50,is_moderated:!1,members:[]}),p=U(()=>u.value?y.chatGroups.filter(l=>l.name.toLowerCase().includes(u.value.toLowerCase())||l.subject&&l.subject.name.toLowerCase().includes(u.value.toLowerCase())):y.chatGroups),S=l=>{if(!l)return"";const t=new Date,s=new Date(l),_=t-s,w=Math.floor(_/(1e3*60*60*24));return w===0?s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):w===1?"Yesterday":w<7?s.toLocaleDateString("en-US",{weekday:"short"}):s.toLocaleDateString("en-US",{month:"short",day:"numeric"})},V=(l,t=50)=>l?l.length>t?l.substring(0,t)+"...":l:"",B=()=>{o.post(route("chat.store"),{preserveScroll:!0,onSuccess:()=>{m.value=!1,o.reset()},onError:l=>{console.error("Form errors:",l)}})},G=l=>{o.members.includes(l)?o.members=o.members.filter(t=>t!==l):o.members.push(l)};return(l,t)=>(n(),i(v,null,[f(r(D),{title:"Chat Groups"}),f($,{title:"Chat & Community",subtitle:"Connect with your classmates and teachers"},{default:x(()=>[e("div",F,[e("div",T,[e("div",A,[f(r(b),{href:l.route("chat.index"),class:"flex-1 text-center py-3 px-4 rounded-2xl font-semibold transition-all duration-200 bg-gradient-to-r from-indigo-500 to-purple-600 text-white"},{default:x(()=>[...t[10]||(t[10]=[e("div",{class:"flex items-center justify-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.645C5.525 14.88 7.42 16 9 16c2.31 0 4.792-.88 6-2.5l-.5-1.5"})]),e("span",null,"Chat Groups")],-1)])]),_:1},8,["href"]),f(r(b),{href:l.route("community.index"),class:"flex-1 text-center py-3 px-4 rounded-2xl font-semibold transition-all duration-200 text-slate-600 hover:text-slate-800 hover:bg-slate-100"},{default:x(()=>[...t[11]||(t[11]=[e("div",{class:"flex items-center justify-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})]),e("span",null,"Community Feed")],-1)])]),_:1},8,["href"])])]),e("div",E,[e("div",q,[e("div",O,[e("div",Y,[d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),type:"text",placeholder:"Search chat groups...",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 pl-10 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200"},null,512),[[h,u.value]]),t[12]||(t[12]=e("svg",{class:"absolute left-3 top-3.5 h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",Q,[e("div",J,a(p.value.length)+" group"+a(p.value.length!==1?"s":"")+" available ",1),e("button",{onClick:t[1]||(t[1]=s=>m.value=!0),class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1"},[...t[13]||(t[13]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",null,"Create Group")],-1)])])])])]),e("div",K,[t[21]||(t[21]=e("div",{class:"p-6 border-b border-slate-200/50"},[e("h2",{class:"text-xl font-bold text-slate-800"},"Your Chat Groups")],-1)),p.value.length>0?(n(),i("div",P,[(n(!0),i(v,null,k(p.value,s=>(n(),N(r(b),{key:s.id,href:l.route("chat.show",s.id),class:"block p-6 hover:bg-slate-50/50 transition-colors duration-200 group"},{default:x(()=>[e("div",R,[e("div",W,[e("div",X,[s.type==="subject"?(n(),i("svg",Z,[...t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13.447m0-13.447l6.818-4.757M12 6.253l-6.818-4.757m6.818 4.757l-.547 4.197"},null,-1)])])):(n(),i("svg",I,[...t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",ee,[e("div",te,[e("h3",se,a(s.name),1),e("div",oe,[s.unread_count>0?(n(),i("span",re,a(s.unread_count>99?"99+":s.unread_count),1)):c("",!0),s.last_activity_at?(n(),i("span",ne,a(S(s.last_activity_at)),1)):c("",!0)])]),e("div",le,[e("div",ie,[s.subject?(n(),i("div",ae,[e("span",de,a(s.subject.name),1)])):c("",!0),s.last_message?(n(),i("p",ue,[e("span",ce,a(s.last_message.user.name)+":",1),C(" "+a(V(s.last_message.message)),1)])):(n(),i("p",me,"No messages yet"))])])])]),e("div",fe,[e("div",xe,[t[16]||(t[16]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm6-12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,a(s.users_count),1)]),t[17]||(t[17]=e("svg",{class:"w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])]),_:2},1032,["href"]))),128))])):(n(),i("div",pe,[t[19]||(t[19]=e("div",{class:"w-16 h-16 bg-gradient-to-br from-slate-100 to-slate-200 rounded-2xl flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.645C5.525 14.88 7.42 16 9 16c2.31 0 4.792-.88 6-2.5l-.5-1.5"})])],-1)),t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-slate-800 mb-2"},"No chat groups found",-1)),e("p",be,a(u.value?"No groups match your search.":"You haven't joined any chat groups yet."),1),f(r(b),{href:l.route("subjects.index"),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1"},{default:x(()=>[...t[18]||(t[18]=[C(" Browse Subjects ",-1)])]),_:1},8,["href"])]))])]),m.value?(n(),i("div",he,[e("div",ve,[e("div",ge,[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75",onClick:t[2]||(t[2]=s=>m.value=!1)})]),e("div",ye,[e("form",{onSubmit:z(B,["prevent"])},[e("div",we,[e("div",ke,[e("div",_e,[t[31]||(t[31]=e("h3",{class:"text-lg leading-6 font-bold text-gray-900 mb-4"},"Create New Chat Group",-1)),e("div",je,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Group Name*",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r(o).name=s),type:"text",required:"",class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter group name"},null,512),[[h,r(o).name]]),r(o).errors.name?(n(),i("div",Ce,a(r(o).errors.name),1)):c("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>r(o).description=s),rows:"3",class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Optional description"},null,512),[[h,r(o).description]]),r(o).errors.description?(n(),i("div",Me,a(r(o).errors.description),1)):c("",!0)]),e("div",Se,[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type*",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>r(o).type=s),required:"",class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500"},[...t[24]||(t[24]=[e("option",{value:"general"},"General",-1),e("option",{value:"subject"},"Subject-based",-1)])],512),[[M,r(o).type]])]),r(o).type==="subject"?(n(),i("div",Ve,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject",-1)),d(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>r(o).subject_id=s),class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500"},[t[26]||(t[26]=e("option",{value:""},"Select Subject",-1)),(n(!0),i(v,null,k(g.subjects,s=>(n(),i("option",{key:s.id,value:s.id},a(s.name),9,Be))),128))],512),[[M,r(o).subject_id]])])):(n(),i("div",Ge,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Max Members",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>r(o).max_members=s),type:"number",min:"2",max:"500",class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[h,r(o).max_members,void 0,{number:!0}]])]))]),e("div",Le,[d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>r(o).is_moderated=s),type:"checkbox",id:"moderated",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[H,r(o).is_moderated]]),t[29]||(t[29]=e("label",{for:"moderated",class:"ml-2 block text-sm text-gray-700"}," Enable moderation ",-1))]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Add Members (Optional)",-1)),e("div",Ue,[(n(!0),i(v,null,k(g.users,s=>(n(),i("div",{key:s.id,class:"flex items-center space-x-2 py-1"},[e("input",{id:`member-${s.id}`,type:"checkbox",value:s.id,onChange:_=>G(s.id),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300"},null,40,De),e("label",{for:`member-${s.id}`,class:"text-sm text-gray-700"},a(s.name)+" ("+a(s.email)+") ",9,Ne)]))),128))])])])])])]),e("div",ze,[e("button",{type:"submit",disabled:r(o).processing,class:"w-full inline-flex justify-center rounded-2xl border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},[r(o).processing?(n(),i("span",$e,"Creating...")):(n(),i("span",Fe,"Create Group"))],8,He),e("button",{type:"button",onClick:t[9]||(t[9]=s=>m.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-2xl border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):c("",!0)]),_:1})],64))}};export{Ee as default};
