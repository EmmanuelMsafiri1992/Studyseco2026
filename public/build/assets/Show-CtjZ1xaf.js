import{r as g,A as B,E as V,c as n,o as l,a as h,u as f,h as S,w as v,b as e,n as x,j as i,l as _,t as a,i as w,F as M,f as L,k as E}from"./app-CyhXxCRD.js";import{_ as D}from"./DashboardLayout-DAfyczJI.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={key:0,class:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-2xl shadow-xl animate-bounce"},U={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 overflow-hidden"},A={class:"w-24 h-24 text-white/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},R=["d"],T={class:"absolute top-4 left-4"},K={class:"absolute top-4 right-4 bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full"},N={class:"text-sm font-medium text-white capitalize"},P={class:"p-8"},I={class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},G={class:"flex-1"},O={class:"text-3xl font-bold text-slate-900 mb-4"},W={class:"flex flex-wrap gap-4 mb-6"},$={key:0,class:"flex items-center"},q={class:"inline-flex items-center px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-700 rounded-full"},J={key:1,class:"flex items-center text-slate-600"},Q={key:2,class:"flex items-center text-slate-600"},X={key:3,class:"flex items-center text-slate-600"},Y={key:0,class:"prose prose-slate max-w-none mb-6"},Z={class:"text-slate-600 leading-relaxed"},ee={class:"bg-slate-50 rounded-2xl p-6 lg:w-80"},te={class:"space-y-3 text-sm"},se={class:"flex justify-between"},oe={class:"font-medium"},re={class:"flex justify-between"},le={class:"font-medium"},ne={class:"flex justify-between"},ae={class:"font-medium uppercase"},ie={key:0,class:"flex justify-between"},de={class:"mt-6 space-y-3"},ce=["href"],ue={key:1,class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 overflow-hidden"},me={class:"p-6"},he={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},fe={class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve=["d"],xe={class:"flex-1 min-w-0"},we={class:"font-medium text-slate-800 group-hover:text-indigo-600 transition-colors duration-200 line-clamp-1"},pe={class:"text-sm text-slate-500 capitalize"},ye={__name:"Show",props:{auth:Object,resource:Object,related:Array},setup(s){const c=s;c.auth?.user;const d=g(!1),j=g(0),p=o=>{o.preventDefault(),d.value=!0,setTimeout(()=>{d.value=!1},3e3)},y=o=>{const t=[{key:"s",ctrl:!0},{key:"a",ctrl:!0},{key:"p",ctrl:!0},{key:"c",ctrl:!0},{key:"u",ctrl:!0},{key:"i",ctrl:!0,shift:!0},{key:"j",ctrl:!0,shift:!0},{key:"k",ctrl:!0,shift:!0},{key:"F12"}],r={key:o.key.toLowerCase(),ctrl:o.ctrlKey,shift:o.shiftKey,alt:o.altKey};t.some(m=>r.key===m.key&&r.ctrl===(m.ctrl||!1)&&r.shift===(m.shift||!1)&&r.alt===(m.alt||!1))&&(o.preventDefault(),d.value=!0,setTimeout(()=>{d.value=!1},3e3))},z=()=>{j.value++,d.value=!0,setTimeout(()=>{d.value=!1},3e3),fetch(route("library.stream",{resource:c.resource.id,download:1})).catch(()=>{})},u=()=>{window.getSelection&&window.getSelection().removeAllRanges()},b=o=>{const t={book:"M12 6.253v13.447m0-13.447l6.818-4.757M12 6.253l-6.818-4.757m6.818 4.757l-.547 4.197",past_paper:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",document:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",video:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z",audio:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M9 17a1 1 0 01-1-1V8a1 1 0 011-1h1.5a1 1 0 01.707.293L13 9h3a1 1 0 011 1v6a1 1 0 01-1 1h-3l-1.793 1.793A1 1 0 019 17z"};return t[o]||t.document},k=o=>{const t={book:"from-blue-500 to-indigo-600",past_paper:"from-green-500 to-emerald-600",document:"from-purple-500 to-violet-600",video:"from-red-500 to-rose-600",audio:"from-yellow-500 to-orange-600"};return t[o]||t.document},C=o=>{if(!o)return"Unknown";const t=["B","KB","MB","GB"],r=Math.floor(Math.log(o)/Math.log(1024));return Math.round(o/Math.pow(1024,r)*100)/100+" "+t[r]};return B(()=>{if(c.resource.is_protected){document.addEventListener("contextmenu",p),document.addEventListener("keydown",y),document.addEventListener("selectstart",u),document.addEventListener("dragstart",u),document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.body.style.mozUserSelect="none",document.body.style.msUserSelect="none";const o=document.createElement("style");o.textContent=`
            .protected-content * {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                -webkit-tap-highlight-color: transparent;
            }
        `,document.head.appendChild(o)}}),V(()=>{c.resource.is_protected&&(document.removeEventListener("contextmenu",p),document.removeEventListener("keydown",y),document.removeEventListener("selectstart",u),document.removeEventListener("dragstart",u),document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.body.style.mozUserSelect="",document.body.style.msUserSelect="")}),(o,t)=>(l(),n(M,null,[h(f(S),{title:s.resource.title},null,8,["title"]),h(D,{title:s.resource.title,subtitle:s.resource.subject?.name||"Digital Resource"},{default:v(()=>[e("div",{class:x(["max-w-6xl mx-auto space-y-6",s.resource.is_protected?"protected-content":""])},[d.value?(l(),n("div",H,[...t[0]||(t[0]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})]),e("span",{class:"font-semibold"},"Content Protected!")],-1),e("p",{class:"text-sm mt-1"},"Downloads and copying are not allowed",-1)])])):i("",!0),e("div",U,[e("div",{class:x(["h-48 bg-gradient-to-br",k(s.resource.type),"flex items-center justify-center relative"])},[(l(),n("svg",A,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:b(s.resource.type)},null,8,R)])),e("div",T,[h(f(_),{href:o.route("library.index"),class:"p-2 bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 rounded-lg transition-colors duration-200"},{default:v(()=>[...t[1]||(t[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"])]),e("div",K,[e("span",N,a(s.resource.type.replace("_"," ")),1)])],2),e("div",P,[e("div",I,[e("div",G,[e("h1",O,a(s.resource.title),1),e("div",W,[s.resource.subject?(l(),n("div",$,[e("span",q,a(s.resource.subject.name),1)])):i("",!0),s.resource.grade_level?(l(),n("div",J,[t[2]||(t[2]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13.447m0-13.447l6.818-4.757M12 6.253l-6.818-4.757m6.818 4.757l-.547 4.197"})],-1)),e("span",null,"Grade "+a(s.resource.grade_level),1)])):i("",!0),s.resource.year?(l(),n("div",Q,[t[3]||(t[3]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4h.5a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h.5z"})],-1)),e("span",null,a(s.resource.year),1)])):i("",!0),s.resource.exam_board?(l(),n("div",X,[t[4]||(t[4]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1)),e("span",null,a(s.resource.exam_board),1)])):i("",!0)]),s.resource.description?(l(),n("div",Y,[e("p",Z,a(s.resource.description),1)])):i("",!0)]),e("div",ee,[t[12]||(t[12]=e("h3",{class:"font-semibold text-slate-800 mb-4"},"Resource Information",-1)),e("div",te,[e("div",se,[t[5]||(t[5]=e("span",{class:"text-slate-600"},"File Size:",-1)),e("span",oe,a(C(s.resource.file_size)),1)]),e("div",re,[t[6]||(t[6]=e("span",{class:"text-slate-600"},"Views:",-1)),e("span",le,a(s.resource.view_count.toLocaleString()),1)]),e("div",ne,[t[7]||(t[7]=e("span",{class:"text-slate-600"},"File Type:",-1)),e("span",ae,a(s.resource.file_type),1)]),s.resource.is_protected?(l(),n("div",ie,[...t[8]||(t[8]=[e("span",{class:"text-slate-600"},"Protection:",-1),e("span",{class:"flex items-center text-green-600"},[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})]),w(" Enabled ")],-1)])])):i("",!0)]),e("div",de,[e("a",{href:o.route("library.stream",s.resource.id),target:"_blank",class:"w-full px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center"},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),w(" View Resource ",-1)])],8,ce),e("button",{onClick:z,class:"w-full px-6 py-3 bg-slate-300 text-slate-500 rounded-2xl font-semibold cursor-not-allowed flex items-center justify-center"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-4-4m4 4l4-4m-4-6h0a2 2 0 002 2v0a2 2 0 002-2v0a2 2 0 00-2-2h-4a2 2 0 00-2 2v0a2 2 0 002 2z"})],-1),w(" Download (Protected) ",-1)])]),t[11]||(t[11]=e("p",{class:"text-xs text-center text-slate-500"}," Downloads are disabled for content protection ",-1))])])])])]),s.related.length>0?(l(),n("div",ue,[t[13]||(t[13]=e("div",{class:"p-6 border-b border-slate-200/50"},[e("h2",{class:"text-xl font-bold text-slate-800"},"Related Resources")],-1)),e("div",me,[e("div",he,[(l(!0),n(M,null,L(s.related,r=>(l(),E(f(_),{key:r.id,href:o.route("library.show",r.id),class:"flex items-center p-4 bg-slate-50 rounded-2xl hover:bg-slate-100 transition-colors duration-200 group"},{default:v(()=>[e("div",{class:x(["w-12 h-12 rounded-xl bg-gradient-to-br",k(r.type),"flex items-center justify-center mr-4 flex-shrink-0"])},[(l(),n("svg",fe,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:b(r.type)},null,8,ve)]))],2),e("div",xe,[e("h3",we,a(r.title),1),e("p",pe,a(r.type.replace("_"," ")),1)])]),_:2},1032,["href"]))),128))])])])):i("",!0)],2)]),_:1},8,["title","subtitle"])],64))}},Me=F(ye,[["__scopeId","data-v-5c8638d3"]]);export{Me as default};
