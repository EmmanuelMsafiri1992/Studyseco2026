import{p as D,r as p,z as N,c as o,o as a,a as _,u as r,h as B,w as V,b as t,q as M,j as n,d as i,v as f,t as d,F as b,f as g,g as v,e as T,y as h,l as L,i as R}from"./app-1vYdlown.js";import{_ as E}from"./DashboardLayout-pUIs1nb4.js";const O={class:"max-w-4xl mx-auto"},q={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"md:col-span-2"},$={key:0,class:"text-red-600 text-sm mt-1"},z={class:"md:col-span-2"},I={key:0,class:"text-red-600 text-sm mt-1"},K=["value"],W={key:0,class:"text-red-600 text-sm mt-1"},H=["value"],J={key:0,class:"text-red-600 text-sm mt-1"},Q={class:"flex space-x-2"},X=["value"],Z={key:0,class:"text-red-600 text-sm mt-1"},ee=["value"],te={key:0,class:"text-red-600 text-sm mt-1"},se={key:0,class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re=["max"],oe={key:0,class:"text-red-600 text-sm mt-1"},ae=["value"],de={key:0,class:"text-red-600 text-sm mt-1"},ne={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue={key:0,class:"text-red-600 text-sm mt-1"},me={key:1,class:"mt-4"},pe=["src"],be={key:0,class:"text-red-600 text-sm mt-1"},ce={key:1,class:"mt-4"},xe=["src"],fe={class:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6"},ge={class:"space-y-6"},ve={class:"flex items-center space-x-3"},ye={key:0,class:"space-y-4 p-4 bg-slate-50 rounded-xl"},we={class:"flex items-center space-x-3"},ke={class:"flex items-center space-x-3"},_e={class:"flex items-center justify-between"},he=["disabled"],Ce={key:0},Ue={key:1},Fe={__name:"Create",props:{auth:Object,subjects:Array,types:Object,categories:Array,gradeLevels:Array,examBoards:Array},setup(c){const s=D({title:"",description:"",type:"",category:"",subject_id:"",grade_level:"",exam_board:"",year:new Date().getFullYear(),file:null,thumbnail:null,access_permissions:{roles:[],users:[]},is_protected:!1,protection_settings:{prevent_download:!1,watermark:!1,time_limit:null}}),y=p(null),k=p(null),x=p(""),w=p(!1),j=u=>{const e=u.target.files[0];if(e){if(s.file=e,e.type.startsWith("image/")){const l=new FileReader;l.onload=m=>{y.value=m.target.result},l.readAsDataURL(e)}else y.value=null;s.title||(s.title=e.name.replace(/\.[^/.]+$/,""))}},F=u=>{const e=u.target.files[0];if(e){s.thumbnail=e;const l=new FileReader;l.onload=m=>{k.value=m.target.result},l.readAsDataURL(e)}},C=()=>{x.value.trim()&&(s.category=x.value.trim(),x.value="",w.value=!1)},P=()=>{s.post(route("admin.library.store"),{onSuccess:()=>{}})},U=p(!1),A=p(!1);N(()=>s.type,u=>{U.value=u==="past_paper",A.value=u==="book"});const S=u=>({book:"ðŸ“š",past_paper:"ðŸ“„",document:"ðŸ“‹",video:"ðŸŽ¥",audio:"ðŸŽµ",presentation:"ðŸ“Š"})[u]||"ðŸ“";return(u,e)=>(a(),o(b,null,[_(r(B),{title:"Add New Resource"}),_(E,{title:"Add New Resource",subtitle:"Upload books, papers, and educational materials"},{default:V(()=>[t("div",O,[t("form",{onSubmit:M(P,["prevent"]),class:"space-y-8"},[t("div",q,[e[24]||(e[24]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ“š"),t("h3",{class:"text-lg font-semibold text-slate-900"},"Basic Information")],-1)),t("div",G,[t("div",Y,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Title *",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r(s).title=l),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource title..."},null,512),[[f,r(s).title]]),r(s).errors.title?(a(),o("div",$,d(r(s).errors.title),1)):n("",!0)]),t("div",z,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),i(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>r(s).description=l),rows:"4",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource description..."},null,512),[[f,r(s).description]]),r(s).errors.description?(a(),o("div",I,d(r(s).errors.description),1)):n("",!0)]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Type *",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>r(s).type=l),required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[16]||(e[16]=t("option",{value:""},"Select type...",-1)),(a(!0),o(b,null,g(c.types,(l,m)=>(a(),o("option",{key:m,value:m},d(S(m))+" "+d(l),9,K))),128))],512),[[v,r(s).type]]),r(s).errors.type?(a(),o("div",W,d(r(s).errors.type),1)):n("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Subject",-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>r(s).subject_id=l),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[18]||(e[18]=t("option",{value:""},"Select subject...",-1)),(a(!0),o(b,null,g(c.subjects,l=>(a(),o("option",{key:l.id,value:l.id},d(l.name),9,H))),128))],512),[[v,r(s).subject_id]]),r(s).errors.subject_id?(a(),o("div",J,d(r(s).errors.subject_id),1)):n("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Category",-1)),t("div",Q,[w.value?i((a(),o("input",{key:1,"onUpdate:modelValue":e[5]||(e[5]=l=>x.value=l),type:"text",placeholder:"New category name...",class:"flex-1 px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyup:T(C,["enter"])},null,544)),[[f,x.value]]):i((a(),o("select",{key:0,"onUpdate:modelValue":e[4]||(e[4]=l=>r(s).category=l),class:"flex-1 px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[20]||(e[20]=t("option",{value:""},"Select category...",-1)),(a(!0),o(b,null,g(c.categories,l=>(a(),o("option",{key:l,value:l},d(l),9,X))),128))],512)),[[v,r(s).category]]),w.value?(a(),o("button",{key:3,type:"button",onClick:C,class:"px-4 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700"}," Add ")):(a(),o("button",{key:2,type:"button",onClick:e[6]||(e[6]=l=>w.value=!0),class:"px-4 py-3 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200"}," New "))]),r(s).errors.category?(a(),o("div",Z,d(r(s).errors.category),1)):n("",!0)]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Grade Level",-1)),i(t("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>r(s).grade_level=l),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[22]||(e[22]=t("option",{value:""},"Select grade level...",-1)),(a(!0),o(b,null,g(c.gradeLevels,l=>(a(),o("option",{key:l,value:l}," Grade "+d(l),9,ee))),128))],512),[[v,r(s).grade_level]]),r(s).errors.grade_level?(a(),o("div",te,d(r(s).errors.grade_level),1)):n("",!0)])])]),U.value?(a(),o("div",se,[e[28]||(e[28]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ“„"),t("h3",{class:"text-lg font-semibold text-slate-900"},"Past Paper Details")],-1)),t("div",le,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Year",-1)),i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>r(s).year=l),type:"number",min:"2000",max:new Date().getFullYear()+1,class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,re),[[f,r(s).year]]),r(s).errors.year?(a(),o("div",oe,d(r(s).errors.year),1)):n("",!0)]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Exam Board",-1)),i(t("select",{"onUpdate:modelValue":e[9]||(e[9]=l=>r(s).exam_board=l),class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e[26]||(e[26]=t("option",{value:""},"Select exam board...",-1)),(a(!0),o(b,null,g(c.examBoards,l=>(a(),o("option",{key:l,value:l},d(l),9,ae))),128))],512),[[v,r(s).exam_board]]),r(s).errors.exam_board?(a(),o("div",de,d(r(s).errors.exam_board),1)):n("",!0)])])])):n("",!0),t("div",ne,[e[33]||(e[33]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ“Ž"),t("h3",{class:"text-lg font-semibold text-slate-900"},"File Upload")],-1)),t("div",ie,[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Main File",-1)),t("input",{type:"file",onChange:j,accept:".pdf,.doc,.docx,.ppt,.pptx,.mp4,.mp3,.jpg,.jpeg,.png",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,32),e[30]||(e[30]=t("p",{class:"text-sm text-slate-500 mt-1"},"Max size: 1GB. Supported formats: PDF, DOC, PPT, MP4, MP3, images",-1)),r(s).errors.file?(a(),o("div",ue,d(r(s).errors.file),1)):n("",!0),y.value?(a(),o("div",me,[t("img",{src:y.value,alt:"File preview",class:"max-w-xs h-32 object-cover rounded-lg border border-slate-200"},null,8,pe)])):n("",!0)]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Thumbnail (Optional)",-1)),t("input",{type:"file",onChange:F,accept:"image/*",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,32),e[32]||(e[32]=t("p",{class:"text-sm text-slate-500 mt-1"},"Upload a custom thumbnail image",-1)),r(s).errors.thumbnail?(a(),o("div",be,d(r(s).errors.thumbnail),1)):n("",!0),k.value?(a(),o("div",ce,[t("img",{src:k.value,alt:"Thumbnail preview",class:"max-w-xs h-32 object-cover rounded-lg border border-slate-200"},null,8,xe)])):n("",!0)])])]),t("div",fe,[e[38]||(e[38]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("span",{class:"text-2xl"},"ðŸ”’"),t("h3",{class:"text-lg font-semibold text-slate-900"},"Access & Protection Settings")],-1)),t("div",ge,[t("div",ve,[i(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>r(s).is_protected=l),type:"checkbox",id:"is_protected",class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,512),[[h,r(s).is_protected]]),e[34]||(e[34]=t("label",{for:"is_protected",class:"text-sm font-medium text-slate-700"}," Enable protection settings ",-1))]),r(s).is_protected?(a(),o("div",ye,[t("div",we,[i(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>r(s).protection_settings.prevent_download=l),type:"checkbox",id:"prevent_download",class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,512),[[h,r(s).protection_settings.prevent_download]]),e[35]||(e[35]=t("label",{for:"prevent_download",class:"text-sm text-slate-700"}," Prevent downloads (view only) ",-1))]),t("div",ke,[i(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>r(s).protection_settings.watermark=l),type:"checkbox",id:"watermark",class:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"},null,512),[[h,r(s).protection_settings.watermark]]),e[36]||(e[36]=t("label",{for:"watermark",class:"text-sm text-slate-700"}," Add watermark ",-1))]),t("div",null,[e[37]||(e[37]=t("label",{for:"time_limit",class:"block text-sm font-medium text-slate-700 mb-2"}," Access time limit (minutes) ",-1)),i(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>r(s).protection_settings.time_limit=l),type:"number",id:"time_limit",min:"0",placeholder:"Leave blank for unlimited",class:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[f,r(s).protection_settings.time_limit]])])])):n("",!0)])]),t("div",_e,[_(r(L),{href:u.route("admin.library.index"),class:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors"},{default:V(()=>[...e[39]||(e[39]=[R(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:r(s).processing,class:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 transition-colors"},[r(s).processing?(a(),o("span",Ce,"Creating...")):(a(),o("span",Ue,"Create Resource"))],8,he)])],32)])]),_:1})],64))}};export{Fe as default};
