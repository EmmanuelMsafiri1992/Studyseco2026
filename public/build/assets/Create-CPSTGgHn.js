import{p as $,r as y,x as v,c as r,o as i,a as _,u as o,h as D,w as S,j as d,b as e,l as U,i as w,F as f,f as k,d as g,y as M,t as a,n as x,q as j,v as A}from"./app-BLMHNAP5.js";import{_ as R}from"./DashboardLayout-Cgi-9x6o.js";const F={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},z={class:"max-w-4xl mx-auto"},I={key:0,class:"mb-6 p-6 bg-amber-50 border border-amber-200 rounded-2xl"},J={class:"bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-slate-200/50 max-w-5xl mx-auto"},q={class:"flex items-center justify-between mb-4"},E={key:0,class:"mb-4 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg"},Y={key:1,class:"mb-6"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},H=["id","value","onChange"],K=["for"],Q={class:"flex-1"},W={class:"flex items-center space-x-3"},X={class:"text-xl"},Z={class:"font-medium text-slate-800 text-sm"},ee={class:"text-xs text-slate-500"},te={key:0,class:"mt-2 p-2 bg-red-50 rounded-lg border border-red-200"},se={class:"text-sm text-red-600"},ne={class:"space-y-4"},oe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},le={class:"space-y-1"},re=["onClick"],ie={class:"flex justify-between items-center"},ae={class:"font-medium text-slate-800"},de={class:"font-bold text-indigo-600"},ce={key:0,class:"mt-1 text-xs text-red-600"},ue={class:"space-y-1"},me=["onClick"],pe={class:"font-medium text-slate-800 flex-1"},be={key:0,class:"w-3 h-3 bg-indigo-500 rounded-full"},fe={key:0,class:"mt-1 text-xs text-red-600"},ge={class:"space-y-2"},xe={key:0,class:"mt-1 text-xs text-red-600"},he={class:"border border-slate-300 rounded-lg p-2 text-center"},ye={key:0,class:"mb-1"},ve=["src"],_e={class:"bg-slate-50/50 rounded-lg p-4"},we={class:"space-y-3"},ke={class:"flex items-start space-x-3"},je={for:"terms_accepted",class:"text-sm text-slate-700"},Pe={class:"flex items-start space-x-3"},Ce={key:0,class:"bg-slate-50/50 rounded-lg p-3"},Se={class:"flex items-center justify-between"},Me={class:"flex-1"},Ne={class:"text-sm font-semibold text-slate-800 mb-1"},Ue={class:"text-xs text-slate-600 space-y-1"},Ae={class:"w-4 h-4 bg-indigo-500 text-white rounded-full flex items-center justify-center text-xs font-bold mt-0.5 flex-shrink-0"},Be={class:"flex gap-2 ml-4"},Le=["disabled"],Oe={key:0},Te={key:1},Ve={class:"flex items-center justify-between mb-6"},$e={class:"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-slate-200"},Fe={__name:"Create",props:{auth:Object,hasPendingPayment:Boolean,paymentMethods:Array,accessDurations:Array,availableSubjects:Array,enrollment:Object,isUpgrade:Boolean},setup(u){const c=u;c.auth?.user,console.log("Available subjects from backend:",{count:c.availableSubjects?.length||0,ids:c.availableSubjects?.map(l=>l.id)||[],subjects:c.availableSubjects});const s=$({payment_method:"",amount:"",reference_number:"",proof_screenshot:null,access_duration_id:null,selected_subjects:[],upgrade:c.isUpgrade||!1,terms_accepted:!1,conduct_agreed:!1}),P=y(null),h=y(null),b=y(!1),p=y(!1);v(()=>s.selected_subjects.map(l=>parseInt(l)).filter(l=>!isNaN(l))),v(()=>c.accessDurations.find(l=>l.id===s.access_duration_id));const B=l=>{const t=[];return l.instructions&&t.push(l.instructions),l.account_details&&t.push(l.account_details),t.push("Take a screenshot of your payment confirmation as proof"),t.length>0?t:["Complete payment using this method","Upload proof of payment"]},N=v(()=>c.paymentMethods),C=v(()=>N.value.find(l=>l.code===s.payment_method)),L=()=>{P.value.click()},O=()=>{const l=P.value.files[0];if(!l)return;const t=new FileReader;t.onload=n=>{h.value=n.target.result},t.readAsDataURL(l),s.proof_screenshot=l},T=()=>{if(!s.payment_method){alert("Please select a payment method");return}if(!s.access_duration_id){alert("Please select an access duration");return}if((c.isUpgrade||s.upgrade)&&s.selected_subjects.length===0){alert("Please select at least one subject for your premium account");return}if(!s.amount){alert("Please select an access duration to see the amount");return}if(!s.reference_number||s.reference_number.trim()===""){alert("Please enter a payment reference number");return}if(!s.terms_accepted){alert("Please read and accept the payment terms and conditions");return}if(!s.conduct_agreed){alert("Please agree to the community conduct guidelines");return}const l=[...new Set(s.selected_subjects.filter(t=>t!=null))].map(t=>parseInt(t));s.selected_subjects=l,console.log("Final form data before submission:",{payment_method:s.payment_method,access_duration_id:s.access_duration_id,selected_subjects:s.selected_subjects,selected_subjects_array:[...s.selected_subjects],selected_subjects_types:s.selected_subjects.map(t=>typeof t),amount:s.amount,upgrade:s.upgrade,reference_number:s.reference_number}),b.value=!0,s.post(route("payments.store"),{onSuccess:t=>{b.value=!1,console.log("Payment submitted successfully")},onError:t=>{b.value=!1,console.error("Payment errors:",t),console.log("Form data being sent:",{payment_method:s.payment_method,access_duration_id:s.access_duration_id,selected_subjects:s.selected_subjects,amount:s.amount,upgrade:s.upgrade,reference_number:s.reference_number,proof_screenshot:s.proof_screenshot?"File selected":"No file"}),t.selected_subjects?alert("Subject selection error: "+JSON.stringify(t.selected_subjects)):t.payment_method?alert("Payment method error: "+JSON.stringify(t.payment_method)):t.access_duration_id?alert("Access duration error: "+JSON.stringify(t.access_duration_id)):t.amount?alert("Amount error: "+JSON.stringify(t.amount)):t.reference_number?alert("Reference number error: "+JSON.stringify(t.reference_number)):t.proof_screenshot?alert("Proof screenshot error: "+JSON.stringify(t.proof_screenshot)):t.error?alert("Error: "+JSON.stringify(t.error)):alert("Validation errors: "+JSON.stringify(t))},onFinish:()=>{b.value=!1}})},V=l=>{s.access_duration_id=l.id,s.amount=l.price.toString()};return(l,t)=>(i(),r(f,null,[_(o(D),{title:"Submit Payment"}),_(R,{title:"Submit Payment",subtitle:"Make payment for system access"},{default:S(()=>[b.value?(i(),r("div",F,[...t[11]||(t[11]=[e("div",{class:"bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-slate-200/50 max-w-md w-full mx-4 text-center"},[e("div",{class:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),e("h3",{class:"text-xl font-bold text-slate-800 mb-2"},"Processing Payment..."),e("p",{class:"text-slate-600"},"Please wait while we process your payment submission.")],-1)])])):d("",!0),e("div",z,[u.hasPendingPayment?(i(),r("div",I,[...t[12]||(t[12]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),e("div",null,[e("h3",{class:"font-semibold text-amber-800"},"Payment Under Review"),e("p",{class:"text-sm text-amber-700"},"You have a payment awaiting verification. Please check your payment history for updates.")])],-1)])])):d("",!0),e("div",J,[e("div",q,[t[14]||(t[14]=e("h1",{class:"text-xl font-bold text-slate-800"},"Make Payment",-1)),_(o(U),{href:l.route("payments.index"),class:"text-sm px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition-all duration-200"},{default:S(()=>[...t[13]||(t[13]=[w(" Payment History ",-1)])]),_:1},8,["href"])]),c.isUpgrade?(i(),r("div",E,[...t[15]||(t[15]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])]),e("div",null,[e("h3",{class:"font-semibold text-purple-800"},"Upgrading to Premium"),e("p",{class:"text-sm text-purple-700"},"Select subjects and duration for your premium account")])],-1)])])):d("",!0),c.isUpgrade||u.enrollment?.is_trial&&u.availableSubjects?.length>0?(i(),r("div",Y,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold text-slate-700 mb-3"},"ðŸ“š Select Subjects",-1)),e("div",G,[(i(!0),r(f,null,k(u.availableSubjects,n=>(i(),r("div",{key:n.id,class:"relative"},[g(e("input",{type:"checkbox",id:`subject-${n.id}`,value:n.id,"onUpdate:modelValue":t[0]||(t[0]=m=>o(s).selected_subjects=m),class:"sr-only peer",onChange:m=>console.log("Subject selected:",n.id,"Current selection:",o(s).selected_subjects)},null,40,H),[[M,o(s).selected_subjects]]),e("label",{for:`subject-${n.id}`,class:"flex items-center p-3 border-2 border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 peer-checked:border-indigo-500 peer-checked:bg-indigo-50 transition-all duration-200"},[e("div",Q,[e("div",W,[e("span",X,a(n.icon),1),e("div",null,[e("h4",Z,a(n.name),1),e("p",ee,a(n.department),1)])])]),e("div",{class:x(["w-4 h-4 border-2 rounded flex items-center justify-center transition-all duration-200",o(s).selected_subjects.includes(n.id)?"border-indigo-500 bg-indigo-500":"border-slate-300"])},[(i(),r("svg",{class:x(["w-2 h-2 text-white transition-opacity duration-200",o(s).selected_subjects.includes(n.id)?"opacity-100":"opacity-0"]),fill:"currentColor",viewBox:"0 0 20 20"},[...t[16]||(t[16]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])],2))],2)],8,K)]))),128))]),o(s).errors.selected_subjects?(i(),r("div",te,[e("p",se,a(o(s).errors.selected_subjects),1)])):d("",!0)])):d("",!0),e("div",ne,[e("div",oe,[e("div",null,[t[18]||(t[18]=e("h3",{class:"text-sm font-semibold text-slate-700 mb-2"},"ðŸ“… Access Duration",-1)),e("div",le,[(i(!0),r(f,null,k(u.accessDurations,n=>(i(),r("div",{key:n.id,onClick:m=>V(n),class:x(["p-2 rounded-lg border cursor-pointer transition-all text-sm",o(s).access_duration_id===n.id?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"])},[e("div",ie,[e("span",ae,a(n.name),1),e("span",de,a(n.formatted_price),1)])],10,re))),128))]),o(s).errors.access_duration_id?(i(),r("div",ce,a(o(s).errors.access_duration_id),1)):d("",!0)]),e("div",null,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-slate-700 mb-2"},"ðŸ’³ Payment Method",-1)),e("div",ue,[(i(!0),r(f,null,k(N.value,n=>(i(),r("div",{key:n.code,onClick:j(m=>o(s).payment_method=n.code,["prevent"]),class:x(["p-2 rounded-lg border cursor-pointer transition-all flex items-center space-x-2 text-sm",o(s).payment_method===n.code?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"])},[e("div",{class:x(["w-6 h-6 rounded flex items-center justify-center text-white text-xs",n.color||"bg-indigo-500"])},a(n.icon||"ðŸ’³"),3),e("span",pe,a(n.name),1),o(s).payment_method===n.code?(i(),r("div",be)):d("",!0)],10,me))),128))]),o(s).errors.payment_method?(i(),r("div",fe,a(o(s).errors.payment_method),1)):d("",!0)]),e("div",null,[t[20]||(t[20]=e("h3",{class:"text-sm font-semibold text-slate-700 mb-2"},"ðŸ“ Payment Details",-1)),e("div",ge,[e("div",null,[g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o(s).amount=n),type:"text",readonly:"",placeholder:"Amount",class:"w-full bg-slate-100 px-3 py-2 rounded-lg text-sm font-semibold border-0"},null,512),[[A,o(s).amount]])]),e("div",null,[g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o(s).reference_number=n),type:"text",placeholder:"Reference Number *",class:"w-full bg-white px-3 py-2 rounded-lg text-sm border border-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-400",required:""},null,512),[[A,o(s).reference_number]]),o(s).errors.reference_number?(i(),r("div",xe,a(o(s).errors.reference_number),1)):d("",!0)]),e("div",he,[h.value?(i(),r("div",ye,[e("img",{src:h.value,alt:"Preview",class:"w-12 h-12 object-cover rounded mx-auto"},null,8,ve)])):d("",!0),e("button",{type:"button",onClick:j(L,["prevent"]),class:"text-xs px-3 py-1 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded transition-colors"},a(h.value?"Change Proof":"Upload Proof"),1),e("input",{ref_key:"screenshotInput",ref:P,type:"file",class:"hidden",onChange:O,accept:"image/*"},null,544)])])])]),e("div",_e,[t[24]||(t[24]=e("h4",{class:"text-sm font-semibold text-slate-800 mb-3"},"Terms and Conditions",-1)),e("div",we,[e("div",ke,[g(e("input",{type:"checkbox",id:"terms_accepted","onUpdate:modelValue":t[3]||(t[3]=n=>o(s).terms_accepted=n),class:"mt-0.5 w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[M,o(s).terms_accepted]]),e("label",je,[t[21]||(t[21]=w(" I agree to the ",-1)),e("button",{type:"button",onClick:t[4]||(t[4]=n=>p.value=!0),class:"text-indigo-600 hover:text-indigo-800 underline"}," payment terms and conditions "),t[22]||(t[22]=w(" including refund policy (14-day cancellation window) ",-1))])]),e("div",Pe,[g(e("input",{type:"checkbox",id:"conduct_agreed","onUpdate:modelValue":t[5]||(t[5]=n=>o(s).conduct_agreed=n),class:"mt-0.5 w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[M,o(s).conduct_agreed]]),t[23]||(t[23]=e("label",{for:"conduct_agreed",class:"text-sm text-slate-700"}," I agree to maintain respectful conduct in system interactions, community discussions, and understand that access will be granted within 24-48 hours after payment approval ",-1))])])]),C.value?(i(),r("div",Ce,[e("div",Se,[e("div",Me,[e("h4",Ne,a(C.value.name)+" Instructions",1),e("div",Ue,[(i(!0),r(f,null,k(B(C.value),(n,m)=>(i(),r("div",{key:m,class:"flex items-start space-x-1"},[e("span",Ae,a(m+1),1),e("span",null,a(n),1)]))),128))])]),e("div",Be,[_(o(U),{href:l.route("payments.index"),class:"px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg text-sm transition-all duration-200"},{default:S(()=>[...t[25]||(t[25]=[w(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"button",onClick:j(T,["prevent"]),disabled:o(s).processing||!o(s).payment_method||!o(s).access_duration_id||u.hasPendingPayment||(c.isUpgrade||o(s).upgrade)&&o(s).selected_subjects.length===0||!o(s).terms_accepted||!o(s).conduct_agreed,class:"px-6 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg text-sm hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[o(s).processing?(i(),r("span",Oe,"Submitting...")):(i(),r("span",Te,"Submit Payment"))],8,Le)])])])):d("",!0)])])]),p.value?(i(),r("div",{key:1,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:t[10]||(t[10]=n=>p.value=!1)},[e("div",{class:"bg-white rounded-2xl p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:t[9]||(t[9]=j(()=>{},["stop"]))},[e("div",Ve,[t[27]||(t[27]=e("h2",{class:"text-2xl font-bold text-slate-800"},"Payment Terms and Conditions",-1)),e("button",{onClick:t[6]||(t[6]=n=>p.value=!1),class:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-colors"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t[28]||(t[28]=e("div",{class:"prose prose-sm max-w-none space-y-6"},[e("section",null,[e("h3",{class:"text-lg font-semibold text-slate-800 mb-3"},"ðŸ“‹ Payment Terms"),e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},[e("ul",{class:"space-y-2 text-sm text-slate-700"},[e("li",null,"â€¢ Payment must be completed before accessing premium features"),e("li",null,"â€¢ Your account will be upgraded to Premium once payment is verified"),e("li",null,"â€¢ Access will be granted within 24-48 hours after admin approval"),e("li",null,"â€¢ All prices are final and include applicable fees")])])]),e("section",null,[e("h3",{class:"text-lg font-semibold text-slate-800 mb-3"},"ðŸ’¸ Refund Policy"),e("div",{class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4"},[e("div",{class:"flex items-start space-x-3"},[e("div",{class:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])]),e("div",null,[e("p",{class:"font-medium text-green-800 mb-2"},"14-Day Money-Back Guarantee"),e("ul",{class:"space-y-1 text-sm text-green-700"},[e("li",null,"â€¢ You can cancel and request a full refund within 14 days of enrollment with premium account"),e("li",null,"â€¢ Refunds are only available during the first 14 days from the day of premium enrollment"),e("li",null,"â€¢ After 14 days, no refunds or cancellations will be processed"),e("li",null,"â€¢ Refund requests must be submitted through our support system")])])])])]),e("section",null,[e("h3",{class:"text-lg font-semibold text-slate-800 mb-3"},"ðŸ‘¥ Community Guidelines"),e("div",{class:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4"},[e("ul",{class:"space-y-2 text-sm text-slate-700"},[e("li",null,"â€¢ Be respectful and kind to other students and teachers in all interactions"),e("li",null,"â€¢ Maintain professional conduct in groups and community discussions"),e("li",null,"â€¢ No harassment, bullying, or inappropriate behavior will be tolerated"),e("li",null,"â€¢ Respect intellectual property - no unauthorized downloading or sharing of materials")])])]),e("section",null,[e("h3",{class:"text-lg font-semibold text-slate-800 mb-3"},"âš ï¸ Prohibited Activities"),e("div",{class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4"},[e("p",{class:"text-sm text-red-800 font-medium mb-2"},"The following activities may result in account termination:"),e("ul",{class:"space-y-1 text-sm text-red-700"},[e("li",null,"â€¢ Attempting to bypass payment methods or hack the system"),e("li",null,"â€¢ Taking unauthorized screenshots or downloading videos"),e("li",null,"â€¢ Sharing account credentials with others"),e("li",null,"â€¢ Using the platform for illegal or unethical purposes"),e("li",null,"â€¢ Violating any terms of service or community guidelines")])])]),e("section",null,[e("h3",{class:"text-lg font-semibold text-slate-800 mb-3"},"ðŸŽ“ School Registration & Exams"),e("div",{class:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4"},[e("ul",{class:"space-y-2 text-sm text-slate-700"},[e("li",null,"â€¢ Once your school selection is approved, you will receive contact details for a student representative"),e("li",null,"â€¢ You are responsible for contacting the school directly regarding exam dates and arrangements"),e("li",null,"â€¢ The platform provides learning materials but exam registration is handled separately by schools"),e("li",null,"â€¢ Failure to write exams due to your own actions will be recorded in the system")])])])],-1)),e("div",$e,[e("button",{onClick:t[7]||(t[7]=n=>p.value=!1),class:"px-6 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg transition-colors"}," Close "),e("button",{onClick:t[8]||(t[8]=n=>{o(s).terms_accepted=!0,p.value=!1}),class:"px-6 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all duration-200"}," Accept Terms ")])])])):d("",!0)]),_:1})],64))}};export{Fe as default};
