import{r as w,p as h,c as o,o as r,a as b,u as a,h as B,w as f,b as e,j as i,l as j,i as v,t as s,n as p,F as y,f as A,d as E,v as S}from"./app--fhtQyYk.js";import{_ as F}from"./DashboardLayout-DwXMIeFU.js";const L={class:"mb-6"},$={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},M={class:"lg:col-span-2 space-y-6"},T={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"text-slate-900 font-medium"},_={class:"text-slate-900"},U={class:"text-slate-900"},H={class:"text-slate-900"},I={class:"md:col-span-2"},O={class:"text-slate-900"},q={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"text-slate-900"},K={key:0},Q={class:"text-slate-900"},W={class:"text-slate-900"},X={key:1},Y={class:"text-slate-900 font-medium"},Z={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},te={key:0,class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"text-slate-900"},ne={class:"text-slate-900 font-mono"},oe={class:"text-slate-900 font-medium"},re={key:0,class:"mt-4"},ae={class:"p-4 bg-slate-50 rounded-2xl"},ie=["href"],de={class:"space-y-6"},me={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},ue={class:"space-y-3"},xe={key:2,class:"p-4 bg-slate-100 rounded-2xl text-center text-slate-600"},ce={class:"text-sm"},be={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-6"},ge={class:"space-y-3 text-sm"},fe={class:"flex justify-between"},ve={class:"text-slate-900"},pe={key:0,class:"flex justify-between"},ye={class:"text-slate-900"},ke={key:1,class:"mt-4"},we={class:"text-slate-900 text-sm bg-slate-100 p-3 rounded-2xl"},he={key:2,class:"mt-4"},je={class:"text-slate-900 text-sm bg-red-50 p-3 rounded-2xl"},Ae={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ee={class:"bg-white rounded-3xl p-6 max-w-md w-full mx-4"},Se={class:"text-sm text-gray-600 mb-6"},Ce={class:"flex justify-end space-x-4"},De=["disabled"],Ne={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Pe={class:"bg-white rounded-3xl p-6 max-w-md w-full mx-4"},Re={class:"text-sm text-gray-600 mb-4"},Be={class:"mb-4"},Fe={class:"mb-4"},Le={class:"flex justify-end space-x-4"},$e=["disabled"],Ve={__name:"Show",props:{enrollment:Object,subjectNames:Array},setup(l){const u=l,x=w(!1),c=w(!1),g=h({}),m=h({admin_notes:"",rejection_reason:""}),C=()=>{g.patch(route("admin.enrollments.approve",u.enrollment.id),{onSuccess:()=>{x.value=!1}})},D=()=>{m.patch(route("admin.enrollments.reject",u.enrollment.id),{onSuccess:()=>{c.value=!1}})},N=d=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"})[d]||"bg-gray-100 text-gray-800",P=d=>({pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[d]||"bg-gray-100 text-gray-800",k=(d,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0}).format(d),R=()=>{try{return route("admin.enrollments.payment-proof",u.enrollment.id)}catch{return`/admin/enrollments/${u.enrollment.id}/payment-proof`}};return(d,t)=>(r(),o(y,null,[b(a(B),{title:`Enrollment - ${l.enrollment.name}`},null,8,["title"]),b(F,{title:`Enrollment Details - ${l.enrollment.name}`,subtitle:"Review enrollment information and manage approval"},{default:f(()=>[e("div",L,[b(a(j),{href:d.route("admin.enrollments.index"),class:"inline-flex items-center text-sm text-slate-600 hover:text-slate-800"},{default:f(()=>[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),v(" Back to Enrollments ",-1)])]),_:1},8,["href"])]),e("div",$,[e("div",M,[e("div",T,[t[12]||(t[12]=e("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Student Information",-1)),e("div",V,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-600"},"Full Name",-1)),e("p",z,s(l.enrollment.name),1)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-600"},"Email Address",-1)),e("p",_,s(l.enrollment.email),1)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-600"},"Phone Number",-1)),e("p",U,s(l.enrollment.phone),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-slate-600"},"Country",-1)),e("p",H,s(l.enrollment.country),1)]),e("div",I,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-slate-600"},"Address",-1)),e("p",O,s(l.enrollment.address),1)])])]),e("div",q,[t[19]||(t[19]=e("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Enrollment Details",-1)),e("div",G,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-600"},"Enrollment Type",-1)),e("span",{class:p(["inline-flex px-3 py-1 text-xs font-semibold rounded-full",l.enrollment.is_trial?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"])},s(l.enrollment.is_trial?"Free Trial":"Paid"),3)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-slate-600"},"Status",-1)),e("span",{class:p([N(l.enrollment.status),"inline-flex px-3 py-1 text-xs font-semibold rounded-full capitalize"])},s(l.enrollment.status),3)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-slate-600"},"Enrollment Date",-1)),e("p",J,s(new Date(l.enrollment.created_at).toLocaleDateString()),1)]),l.enrollment.approved_at?(r(),o("div",K,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-600"},"Approved Date",-1)),e("p",Q,s(new Date(l.enrollment.approved_at).toLocaleDateString()),1)])):i("",!0),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-600"},"Access Expires",-1)),e("p",W,s(new Date(l.enrollment.access_expires_at).toLocaleDateString()),1)]),l.enrollment.is_trial?i("",!0):(r(),o("div",X,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-600"},"Total Amount",-1)),e("p",Y,s(k(l.enrollment.total_amount,l.enrollment.currency)),1)]))])]),e("div",Z,[t[20]||(t[20]=e("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Selected Subjects",-1)),e("div",ee,[(r(!0),o(y,null,A(l.subjectNames,n=>(r(),o("div",{key:n,class:"px-3 py-2 bg-slate-100 rounded-2xl text-sm text-slate-700"},s(n),1))),128))])]),!l.enrollment.is_trial&&l.enrollment.payments&&l.enrollment.payments.length>0?(r(),o("div",te,[t[27]||(t[27]=e("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Payment Information",-1)),(r(!0),o(y,null,A(l.enrollment.payments,n=>(r(),o("div",{key:n.id,class:"mb-4 last:mb-0"},[e("div",le,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-slate-600"},"Payment Method",-1)),e("p",se,s(n.payment_method?.name||"N/A"),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-slate-600"},"Payment Status",-1)),e("span",{class:p([P(n.status),"inline-flex px-3 py-1 text-xs font-semibold rounded-full capitalize"])},s(n.status),3)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-600"},"Reference Number",-1)),e("p",ne,s(n.reference_number||"N/A"),1)]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-slate-600"},"Amount",-1)),e("p",oe,s(k(n.amount,n.currency)),1)])]),n.payment_proof_path||l.enrollment.payment_proof_path?(r(),o("div",re,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-slate-600 mb-2"},"Payment Proof",-1)),e("div",ae,[e("a",{href:R(),target:"_blank",class:"inline-flex items-center text-indigo-600 hover:text-indigo-800"},[...t[25]||(t[25]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1),v(" View Payment Proof ",-1)])],8,ie)])])):i("",!0)]))),128))])):i("",!0)]),e("div",de,[e("div",me,[t[29]||(t[29]=e("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Actions",-1)),e("div",ue,[b(a(j),{href:d.route("admin.enrollments.edit",l.enrollment.id),class:"w-full bg-indigo-500 text-white px-4 py-3 rounded-2xl font-medium hover:bg-indigo-600 transition-colors flex items-center justify-center"},{default:f(()=>[...t[28]||(t[28]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),v(" Edit Enrollment ",-1)])]),_:1},8,["href"]),l.enrollment.status==="pending"?(r(),o("button",{key:0,onClick:t[0]||(t[0]=n=>x.value=!0),class:"w-full bg-green-500 text-white px-4 py-3 rounded-2xl font-medium hover:bg-green-600 transition-colors"}," Approve Enrollment ")):i("",!0),l.enrollment.status==="pending"?(r(),o("button",{key:1,onClick:t[1]||(t[1]=n=>c.value=!0),class:"w-full bg-red-500 text-white px-4 py-3 rounded-2xl font-medium hover:bg-red-600 transition-colors"}," Reject Enrollment ")):i("",!0),l.enrollment.status!=="pending"?(r(),o("div",xe,[e("p",ce," This enrollment has been "+s(l.enrollment.status)+". ",1)])):i("",!0)])]),e("div",be,[t[34]||(t[34]=e("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Status History",-1)),e("div",ge,[e("div",fe,[t[30]||(t[30]=e("span",{class:"text-slate-600"},"Created",-1)),e("span",ve,s(new Date(l.enrollment.created_at).toLocaleDateString()),1)]),l.enrollment.approved_at?(r(),o("div",pe,[t[31]||(t[31]=e("span",{class:"text-slate-600"},"Approved",-1)),e("span",ye,s(new Date(l.enrollment.approved_at).toLocaleDateString()),1)])):i("",!0),l.enrollment.admin_notes?(r(),o("div",ke,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-slate-600 mb-1"},"Admin Notes",-1)),e("p",we,s(l.enrollment.admin_notes),1)])):i("",!0),l.enrollment.rejection_reason?(r(),o("div",he,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-slate-600 mb-1"},"Rejection Reason",-1)),e("p",je,s(l.enrollment.rejection_reason),1)])):i("",!0)])])])]),x.value?(r(),o("div",Ae,[e("div",Ee,[t[35]||(t[35]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Approve Enrollment",-1)),e("p",Se,' Are you sure you want to approve "'+s(l.enrollment.name)+`"'s enrollment? This will create a user account and send them login credentials. `,1),e("div",Ce,[e("button",{onClick:t[2]||(t[2]=n=>x.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-2xl hover:bg-gray-200 transition-colors"}," Cancel "),e("button",{onClick:C,disabled:a(g).processing,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-2xl hover:bg-green-700 transition-colors disabled:opacity-50"},s(a(g).processing?"Approving...":"Approve Enrollment"),9,De)])])])):i("",!0),c.value?(r(),o("div",Ne,[e("div",Pe,[t[38]||(t[38]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Reject Enrollment",-1)),e("p",Re,' Are you sure you want to reject "'+s(l.enrollment.name)+`"'s enrollment? `,1),e("div",Be,[t[36]||(t[36]=e("label",{for:"rejection_reason",class:"block text-sm font-medium text-gray-700 mb-2"}," Rejection Reason * ",-1)),E(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=n=>a(m).rejection_reason=n),id:"rejection_reason",rows:"3",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"Please provide a reason for rejection...",required:""},null,512),[[S,a(m).rejection_reason]])]),e("div",Fe,[t[37]||(t[37]=e("label",{for:"admin_notes",class:"block text-sm font-medium text-gray-700 mb-2"}," Admin Notes (Optional) ",-1)),E(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=n=>a(m).admin_notes=n),id:"admin_notes",rows:"2",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200",placeholder:"Additional notes..."},null,512),[[S,a(m).admin_notes]])]),e("div",Le,[e("button",{onClick:t[5]||(t[5]=n=>c.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-2xl hover:bg-gray-200 transition-colors"}," Cancel "),e("button",{onClick:D,disabled:a(m).processing||!a(m).rejection_reason,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-2xl hover:bg-red-700 transition-colors disabled:opacity-50"},s(a(m).processing?"Rejecting...":"Reject Enrollment"),9,$e)])])])):i("",!0)]),_:1},8,["title"])],64))}};export{Ve as default};
