import{r as c,s as I,z as Z,B as m,c as r,j as v,o as l,b as e,t as d,E as F,n as y,d as M,y as ee,i as L,v as N,F as A,f as S,g as te,a as se,q as oe,k as le,w as re,u as ae,l as ne}from"./app-qZFDf0Ah.js";const ie={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},de={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0"},ue={class:"relative inline-block w-full max-w-4xl overflow-hidden text-left align-bottom transition-all transform bg-white rounded-2xl shadow-xl sm:my-8 sm:align-middle"},ce={class:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-600 to-indigo-600"},ve={class:"flex items-center justify-between"},pe={class:"flex items-center space-x-3"},ge={class:"text-sm text-white/80"},he={class:"px-6 py-6 max-h-[70vh] overflow-y-auto"},xe={key:0,class:"p-4 bg-amber-50 border border-amber-200 rounded-xl mb-6"},be={key:1,class:"p-4 bg-blue-50 border border-blue-200 rounded-xl mb-6"},fe={key:2,class:"p-4 bg-red-50 border border-red-200 rounded-xl mb-6"},me={class:"flex items-start space-x-3"},ye={class:"flex-1"},we={class:"text-red-700"},ke={key:3,class:"p-4 bg-green-50 border border-green-200 rounded-xl mb-6"},_e={class:"flex items-center space-x-3"},Ce={class:"text-green-700"},Me={key:4,class:"mb-6 p-4 bg-gray-50 rounded-xl"},Ve={class:"flex items-center justify-between"},$e={class:"text-lg font-bold text-purple-600"},je={class:"flex items-center justify-between"},Be={class:"flex items-center space-x-3"},ze={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ae={class:"relative inline-flex items-center cursor-pointer"},Ge={key:5,class:"space-y-6"},He={class:"mt-1 text-xs text-gray-500"},Pe={class:"grid grid-cols-4 gap-3 max-h-48 overflow-y-auto"},Ee=["onClick"],Ie=["src","alt"],Ne={key:1,class:"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-1 flex items-center justify-center"},Se={class:"text-xs font-medium text-gray-700 truncate"},Fe={key:0,class:"text-sm text-gray-500 text-center py-4"},Ue={class:"flex space-x-2 mb-3"},Te=["value"],De={class:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto"},qe=["onClick"],Ye={class:"font-medium text-gray-700 text-sm"},Oe={class:"text-xs text-gray-500"},Re={key:0,class:"text-sm text-gray-500 text-center py-4"},We={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-end space-x-3"},Ke=["disabled"],Je={key:0,class:"flex items-center space-x-2"},Qe={key:1},Xe={__name:"HeyGenVideoGenerator",props:{lesson:Object,show:Boolean},emits:["close","generated"],setup(n,{emit:_}){const i=n,w=_,V=c(!1),k=c(!1),p=c(null),b=c(null),u=c(""),o=c(null),g=c(null),x=c(!0),G=c([]),$=c([]),H=c(null),C=c(!1),j=c(""),B=c(""),z=c(""),T=I(()=>{let s=G.value;if(j.value){const t=j.value.toLowerCase();s=s.filter(a=>a.avatar_name?.toLowerCase().includes(t)||a.avatar_id?.toLowerCase().includes(t))}return s.slice(0,20)}),D=I(()=>{let s=$.value;if(z.value&&(s=s.filter(t=>t.language===z.value)),B.value){const t=B.value.toLowerCase();s=s.filter(a=>a.voice_name?.toLowerCase().includes(t)||a.voice_id?.toLowerCase().includes(t))}return s.slice(0,20)}),q=I(()=>{const s=new Set($.value.map(t=>t.language).filter(Boolean));return Array.from(s).sort()}),f=c(null);let h=null;Z(async()=>{await Y(),C.value&&(await Promise.all([O(),R(),W()]),i.lesson&&(u.value=i.lesson.heygen_script||"",o.value=i.lesson.heygen_avatar_id||null,g.value=i.lesson.heygen_voice_id||null,(i.lesson.heygen_status==="processing"||i.lesson.heygen_status==="pending")&&P()))});const Y=async()=>{try{const s=await m.get(route("heygen.status"));C.value=s.data.configured}catch{C.value=!1}},O=async()=>{try{const s=await m.get(route("heygen.avatars"));G.value=s.data.avatars||[]}catch(s){console.error("Error loading avatars:",s)}},R=async()=>{try{const s=await m.get(route("heygen.voices"));$.value=s.data.voices||[]}catch(s){console.error("Error loading voices:",s)}},W=async()=>{try{const s=await m.get(route("heygen.credits"));H.value=s.data.credits}catch(s){console.error("Error loading credits:",s)}},K=async()=>{if(!u.value.trim()){p.value="Please enter a script for the video";return}if(!o.value){p.value="Please select an avatar";return}if(!g.value){p.value="Please select a voice";return}k.value=!0,p.value=null,b.value=null;try{const s=await m.post(route("heygen.generate",i.lesson.id),{script:u.value,avatar_id:o.value,voice_id:g.value,test_mode:x.value});s.data.success?(b.value=s.data.message,P()):p.value=s.data.error||"Failed to start video generation"}catch(s){p.value=s.response?.data?.error||"Failed to generate video"}finally{k.value=!1}},P=()=>{h&&clearInterval(h),U(),h=setInterval(U,5e3)},U=async()=>{try{const s=await m.get(route("heygen.generation-status",i.lesson.id));f.value=s.data.heygen,s.data.heygen.status==="completed"?(clearInterval(h),h=null,b.value="Video generated successfully!",w("generated",s.data)):s.data.heygen.status==="failed"&&(clearInterval(h),h=null,p.value=s.data.heygen.error||"Video generation failed")}catch(s){console.error("Error polling status:",s)}},J=async()=>{try{await m.post(route("heygen.cancel",i.lesson.id)),h&&(clearInterval(h),h=null),f.value=null,b.value=null}catch(s){p.value=s.response?.data?.error||"Failed to cancel generation"}},Q=async()=>{try{const s=await m.post(route("heygen.retry",i.lesson.id));s.data.success&&(b.value=s.data.message,P())}catch(s){p.value=s.response?.data?.error||"Failed to retry generation"}},E=()=>{h&&clearInterval(h),w("close")};return(s,t)=>n.show?(l(),r("div",ie,[e("div",de,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:E}),e("div",ue,[e("div",ce,[e("div",ve,[e("div",pe,[t[6]||(t[6]=e("div",{class:"p-2 bg-white/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1)),e("div",null,[t[5]||(t[5]=e("h3",{class:"text-lg font-bold text-white"},"Generate AI Video",-1)),e("p",ge,'Create an avatar video for "'+d(n.lesson?.title)+'"',1)])]),e("button",{onClick:E,class:"p-2 text-white/80 hover:text-white rounded-lg hover:bg-white/10"},[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",he,[C.value?v("",!0):(l(),r("div",xe,[...t[8]||(t[8]=[F('<div class="flex items-start space-x-3"><svg class="w-5 h-5 text-amber-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><h4 class="font-semibold text-amber-800">HeyGen API Not Configured</h4><p class="text-sm text-amber-700 mt-1"> Please add your HeyGen API key to the .env file: <code class="bg-amber-100 px-2 py-0.5 rounded">HEYGEN_API_KEY=your_api_key</code></p></div></div>',1)])])),f.value&&(f.value.status==="pending"||f.value.status==="processing")?(l(),r("div",be,[e("div",{class:"flex items-center space-x-3"},[t[9]||(t[9]=F('<div class="animate-spin"><svg class="w-6 h-6 text-blue-500" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><div class="flex-1"><h4 class="font-semibold text-blue-800">Video Generation in Progress</h4><p class="text-sm text-blue-600">This may take a few minutes. You can close this modal and check back later.</p></div>',2)),e("button",{onClick:J,class:"px-3 py-1 text-sm bg-white border border-blue-300 rounded-lg hover:bg-blue-50"}," Cancel ")])])):v("",!0),p.value?(l(),r("div",fe,[e("div",me,[t[10]||(t[10]=e("svg",{class:"w-5 h-5 text-red-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",ye,[e("p",we,d(p.value),1)]),f.value?.status==="failed"?(l(),r("button",{key:0,onClick:Q,class:"px-3 py-1 text-sm bg-red-100 border border-red-300 rounded-lg hover:bg-red-200"}," Retry ")):v("",!0)])])):v("",!0),b.value?(l(),r("div",ke,[e("div",_e,[t[11]||(t[11]=e("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("p",Ce,d(b.value),1)])])):v("",!0),H.value?(l(),r("div",Me,[e("div",Ve,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-gray-700"},"Remaining Credits",-1)),e("span",$e,d(H.value.remaining_quota||"N/A"),1)])])):v("",!0),e("div",{class:y(["mb-6 p-4 rounded-xl",x.value?"bg-amber-50 border border-amber-200":"bg-green-50 border border-green-200"])},[e("div",je,[e("div",Be,[e("div",{class:y(x.value?"text-amber-500":"text-green-500")},[x.value?(l(),r("svg",ze,[...t[13]||(t[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},null,-1)])])):(l(),r("svg",Le,[...t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],2),e("div",null,[e("h4",{class:y(["font-semibold",x.value?"text-amber-800":"text-green-800"])},d(x.value?"Test Mode (Free)":"Production Mode (Uses Credits)"),3),e("p",{class:y(["text-sm",x.value?"text-amber-600":"text-green-600"])},d(x.value?"Video will have a watermark but won't use credits":"Full quality video, will consume credits"),3)])]),e("label",Ae,[M(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>x.value=a),class:"sr-only peer"},null,512),[[ee,x.value]]),t[15]||(t[15]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"},null,-1))])])],2),C.value?(l(),r("div",Ge,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[L(" Lesson Script "),e("span",{class:"text-red-500"},"*")],-1)),M(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),rows:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Write the script that the avatar will speak. Be clear and concise for best results..."},null,512),[[N,u.value]]),e("p",He,d(u.value.length)+" characters",1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[L(" Select Avatar "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>j.value=a),type:"text",class:"w-full px-4 py-2 mb-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Search avatars..."},null,512),[[N,j.value]]),e("div",Pe,[(l(!0),r(A,null,S(T.value,a=>(l(),r("button",{key:a.avatar_id,onClick:X=>o.value=a.avatar_id,class:y(["p-2 border-2 rounded-xl text-center transition-all duration-200",o.value===a.avatar_id?"border-purple-500 bg-purple-50 ring-2 ring-purple-200":"border-gray-200 hover:border-purple-300"])},[a.preview_image_url?(l(),r("img",{key:0,src:a.preview_image_url,alt:a.avatar_name,class:"w-16 h-16 object-cover rounded-lg mx-auto mb-1"},null,8,Ie)):(l(),r("div",Ne,[...t[17]||(t[17]=[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])])),e("p",Se,d(a.avatar_name||a.avatar_id),1)],10,Ee))),128))]),G.value.length===0&&!V.value?(l(),r("p",Fe," No avatars available. Check your HeyGen account. ")):v("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[L(" Select Voice "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ue,[M(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>B.value=a),type:"text",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Search voices..."},null,512),[[N,B.value]]),M(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>z.value=a),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},[t[19]||(t[19]=e("option",{value:""},"All Languages",-1)),(l(!0),r(A,null,S(q.value,a=>(l(),r("option",{key:a,value:a},d(a),9,Te))),128))],512),[[te,z.value]])]),e("div",De,[(l(!0),r(A,null,S(D.value,a=>(l(),r("button",{key:a.voice_id,onClick:X=>g.value=a.voice_id,class:y(["p-3 border-2 rounded-xl text-left transition-all duration-200",g.value===a.voice_id?"border-purple-500 bg-purple-50 ring-2 ring-purple-200":"border-gray-200 hover:border-purple-300"])},[e("p",Ye,d(a.voice_name||a.voice_id),1),e("p",Oe,d(a.language)+" - "+d(a.gender||"Unknown"),1)],10,qe))),128))]),$.value.length===0&&!V.value?(l(),r("p",Re," No voices available. Check your HeyGen account. ")):v("",!0)])])):v("",!0)]),e("div",We,[e("button",{onClick:E,class:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors duration-200"}," Cancel "),C.value?(l(),r("button",{key:0,onClick:K,disabled:k.value||!u.value.trim()||!o.value||!g.value||f.value?.status==="processing",class:y(["px-6 py-2 font-semibold rounded-xl transition-all duration-200",k.value||!u.value.trim()||!o.value||!g.value||f.value?.status==="processing"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700 shadow-lg hover:shadow-xl"])},[k.value?(l(),r("span",Je,[...t[21]||(t[21]=[e("svg",{class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"Generating...",-1)])])):(l(),r("span",Qe,d(x.value?"Generate Test Video":"Generate Video"),1))],10,Ke)):v("",!0)])])])])):v("",!0)}},Ze={class:"bg-white rounded-3xl shadow-lg border border-slate-200/50 overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-105 group"},et={class:"relative h-48 bg-gradient-to-br from-slate-100 to-slate-200"},tt={key:0,class:"relative w-full h-full"},st={key:1,class:"w-full h-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center"},ot={class:"absolute top-4 left-4 flex flex-col space-y-1"},lt={key:0,class:"px-2 py-1 bg-green-500 text-white text-xs font-semibold rounded-full"},rt={key:1,class:"px-2 py-1 bg-amber-500 text-white text-xs font-semibold rounded-full"},at={key:2,class:"px-2 py-1 bg-purple-500 text-white text-xs font-semibold rounded-full flex items-center space-x-1"},nt={key:3,class:"px-2 py-1 bg-red-500 text-white text-xs font-semibold rounded-full"},it={key:2,class:"absolute top-4 right-4 bg-black/60 backdrop-blur-sm text-white text-xs font-semibold px-2 py-1 rounded-full"},dt={key:3,class:"absolute bottom-4 right-4"},ut={class:"relative"},ct={class:"flex items-center space-x-2"},vt=["d"],pt={class:"p-6"},gt={class:"mb-4"},ht={class:"text-lg font-bold text-slate-800 mb-2 line-clamp-2"},xt={key:0,class:"text-sm text-slate-600 line-clamp-3"},bt={class:"flex items-center justify-between text-xs text-slate-500 mb-4"},ft={key:0},mt={key:1},yt={class:"flex items-center justify-between pt-4 border-t border-slate-200/50"},wt={key:1,class:"text-sm text-slate-400"},kt={key:2,class:"text-sm text-slate-400"},_t={class:"flex items-center space-x-2"},Ct={key:0,class:"group relative"},Mt={class:"absolute bottom-full right-0 mb-2 w-64 bg-slate-800 text-white text-xs rounded-lg py-2 px-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-20"},$t={__name:"LessonCard",props:{lesson:Object,canManage:Boolean},setup(n){const _=n,i=c(!1),w=c(!1),V=()=>{i.value=!1,w.value=!0},k=u=>{w.value=!1,location.reload()},p=async()=>{try{const u=_.lesson.is_published?"lessons.unpublish":"lessons.publish",o=await axios.patch(route(u,_.lesson.id));o.data.success&&(_.lesson.is_published=o.data.lesson.is_published)}catch(u){console.error("Error toggling publish status:",u),alert("Error updating lesson status. Please try again.")}},b=async()=>{if(confirm("Are you sure you want to delete this lesson? This action cannot be undone."))try{(await axios.delete(route("lessons.destroy",_.lesson.id))).data.success&&location.reload()}catch(u){console.error("Error deleting lesson:",u),alert("Error deleting lesson. Please try again.")}};return(u,o)=>(l(),r(A,null,[e("div",Ze,[e("div",et,[n.lesson.video_path?(l(),r("div",tt,[...o[6]||(o[6]=[F('<div class="w-full h-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center"><svg class="w-16 h-16 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l.646.647a1 1 0 00.707.293h.354a1 1 0 01.707.293l.646.647a1 1 0 00.707.293H16.586a1 1 0 00.707-.293L18 11.586A1 1 0 0018 10H17"></path></svg></div><div class="absolute inset-0 flex items-center justify-center bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"><div class="w-16 h-16 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center shadow-lg"><svg class="w-8 h-8 text-indigo-600 ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></div></div>',2)])])):(l(),r("div",st,[...o[7]||(o[7]=[e("div",{class:"text-center"},[e("svg",{class:"w-12 h-12 text-slate-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]),e("p",{class:"text-xs text-slate-500"},"No video uploaded")],-1)])])),e("div",ot,[n.lesson.is_published?(l(),r("span",lt," Published ")):(l(),r("span",rt," Draft ")),n.lesson.heygen_status==="processing"||n.lesson.heygen_status==="pending"?(l(),r("span",at,[...o[8]||(o[8]=[e("svg",{class:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),e("span",null,"AI Generating",-1)])])):n.lesson.heygen_status==="failed"?(l(),r("span",nt," AI Failed ")):v("",!0)]),n.lesson.duration_minutes?(l(),r("div",it,d(n.lesson.formatted_duration||n.lesson.duration_minutes+"m"),1)):v("",!0),n.canManage?(l(),r("div",dt,[e("div",ut,[e("button",{onClick:o[0]||(o[0]=g=>i.value=!i.value),class:"p-2 bg-white/90 backdrop-blur-sm rounded-full shadow-lg hover:bg-white transition-all duration-200"},[...o[9]||(o[9]=[e("svg",{class:"w-4 h-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)])]),i.value?(l(),r("div",{key:0,onClick:o[3]||(o[3]=oe(()=>{},["stop"])),class:"absolute bottom-full right-0 mb-2 w-48 bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-slate-200/50 py-2 z-10"},[e("button",{onClick:o[1]||(o[1]=g=>{p(),i.value=!1}),class:"w-full text-left px-4 py-2 text-sm hover:bg-slate-100/70 transition-colors duration-150"},[e("div",ct,[(l(),r("svg",{class:y(["w-4 h-4",n.lesson.is_published?"text-amber-600":"text-green-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:n.lesson.is_published?"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21":"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,8,vt)],2)),e("span",null,d(n.lesson.is_published?"Unpublish":"Publish"),1)])]),o[12]||(o[12]=e("button",{class:"w-full text-left px-4 py-2 text-sm hover:bg-slate-100/70 transition-colors duration-150 text-blue-600"},[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]),e("span",null,"Edit Lesson")])],-1)),e("button",{onClick:V,class:"w-full text-left px-4 py-2 text-sm hover:bg-purple-50 transition-colors duration-150 text-purple-600"},[...o[10]||(o[10]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),e("span",null,"Generate AI Video")],-1)])]),e("button",{onClick:o[2]||(o[2]=g=>{b(),i.value=!1}),class:"w-full text-left px-4 py-2 text-sm hover:bg-red-50 transition-colors duration-150 text-red-600"},[...o[11]||(o[11]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),e("span",null,"Delete")],-1)])])])):v("",!0)])])):v("",!0)]),e("div",pt,[e("div",gt,[e("h3",ht,d(n.lesson.title),1),n.lesson.description?(l(),r("p",xt,d(n.lesson.description),1)):v("",!0)]),e("div",bt,[n.lesson.video_filename?(l(),r("span",ft,d(n.lesson.video_filename),1)):(l(),r("span",mt,"No video file"))]),e("div",yt,[n.lesson.video_path&&n.lesson.is_published?(l(),le(ae(ne),{key:0,href:u.route("lessons.show",n.lesson.id),class:"flex items-center space-x-2 text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors duration-200"},{default:re(()=>[...o[13]||(o[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l.646.647a1 1 0 00.707.293h.354a1 1 0 01.707.293l.646.647a1 1 0 00.707.293H16.586a1 1 0 00.707-.293L18 11.586A1 1 0 0018 10H17"})],-1),e("span",null,"Watch Now",-1)])]),_:1},8,["href"])):n.lesson.video_path?(l(),r("span",kt,"Unpublished")):(l(),r("span",wt,"No video available")),e("div",_t,[n.lesson.notes?(l(),r("div",Ct,[o[15]||(o[15]=e("svg",{class:"w-4 h-4 text-slate-400 hover:text-slate-600 cursor-help",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",Mt,[L(d(n.lesson.notes)+" ",1),o[14]||(o[14]=e("div",{class:"absolute top-full right-6 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-800"},null,-1))])])):v("",!0)])])])]),i.value?(l(),r("div",{key:0,onClick:o[4]||(o[4]=g=>i.value=!1),class:"fixed inset-0 z-5"})):v("",!0),se(Xe,{show:w.value,lesson:n.lesson,onClose:o[5]||(o[5]=g=>w.value=!1),onGenerated:k},null,8,["show","lesson"])],64))}};export{$t as default};
