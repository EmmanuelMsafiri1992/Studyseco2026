import{p as P,c as l,o as i,a as y,u as s,h as U,w as g,b as t,l as k,q as V,j as d,d as a,g as b,t as u,v as x,F as f,f as h,y as C,i as O}from"./app-qZFDf0Ah.js";import{_ as M}from"./DashboardLayout-jaqNmyqo.js";const B={class:"space-y-6"},S={class:"flex items-center space-x-4"},q={class:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-slate-200/50 p-8"},E={class:"space-y-6"},A={key:0,class:"text-red-500 text-sm mt-1"},H={key:0,class:"text-red-500 text-sm mt-1"},N={key:0,class:"text-red-500 text-sm mt-1"},T=["value"],F={key:0,class:"text-red-500 text-sm mt-1"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={key:0,class:"text-red-500 text-sm mt-1"},D={class:"flex items-center pt-6"},G={key:0},R={class:"space-y-3"},z=["onUpdate:modelValue","placeholder"],Q=["onClick"],W={key:0,class:"text-red-500 text-sm mt-1"},I={key:1},J={key:0,class:"text-red-500 text-sm mt-1"},K={class:"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-gray-200"},X=["disabled"],Y={key:0,class:"flex items-center space-x-2"},Z={key:1},et={__name:"Edit",props:{auth:Object,post:Object,subjects:Array},setup(c){const n=c;n.auth?.user;const e=P({type:n.post.type,title:n.post.title||"",content:n.post.content,subject_id:n.post.subject_id||"",priority:n.post.priority||"medium",is_anonymous:n.post.is_anonymous||!1,tags:n.post.tags||[],poll_options:n.post.poll_options||[],poll_expires_at:n.post.poll_expires_at||""}),_=()=>{e.poll_options.push("")},w=p=>{e.poll_options.splice(p,1)},j=()=>{e.patch(route("community.update",n.post.id),{onSuccess:()=>{},onError:p=>{console.error("Update post errors:",p)}})};return(p,o)=>(i(),l(f,null,[y(s(U),{title:"Edit Post"}),y(M,{title:"Edit Post",subtitle:"Update your community post"},{default:g(()=>[t("div",B,[t("div",S,[y(s(k),{href:p.route("community.show",c.post.id),class:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-2xl transition-all duration-200"},{default:g(()=>[...o[7]||(o[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),t("span",null,"Back to Post",-1)])]),_:1},8,["href"])]),t("div",q,[t("form",{onSubmit:V(j,["prevent"])},[t("div",E,[t("div",null,[o[9]||(o[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Post Type",-1)),a(t("select",{"onUpdate:modelValue":o[0]||(o[0]=r=>s(e).type=r),class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...o[8]||(o[8]=[t("option",{value:"post"},"General Post",-1),t("option",{value:"question"},"Question",-1),t("option",{value:"resource"},"Resource Share",-1),t("option",{value:"announcement"},"Announcement",-1)])],512),[[b,s(e).type]]),s(e).errors.type?(i(),l("div",A,u(s(e).errors.type),1)):d("",!0)]),t("div",null,[o[10]||(o[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Title (Optional)",-1)),a(t("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>s(e).title=r),type:"text",class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Give your post a title..."},null,512),[[x,s(e).title]]),s(e).errors.title?(i(),l("div",H,u(s(e).errors.title),1)):d("",!0)]),t("div",null,[o[11]||(o[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Content*",-1)),a(t("textarea",{"onUpdate:modelValue":o[2]||(o[2]=r=>s(e).content=r),rows:"8",required:"",class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500 resize-none transition-all duration-200",placeholder:"What's on your mind? Share your thoughts, ask a question, or help others..."},null,512),[[x,s(e).content]]),s(e).errors.content?(i(),l("div",N,u(s(e).errors.content),1)):d("",!0)]),t("div",null,[o[13]||(o[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Related Subject (Optional)",-1)),a(t("select",{"onUpdate:modelValue":o[3]||(o[3]=r=>s(e).subject_id=r),class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[o[12]||(o[12]=t("option",{value:""},"Select a subject...",-1)),(i(!0),l(f,null,h(c.subjects,r=>(i(),l("option",{key:r.id,value:r.id},u(r.name),9,T))),128))],512),[[b,s(e).subject_id]]),s(e).errors.subject_id?(i(),l("div",F,u(s(e).errors.subject_id),1)):d("",!0)]),t("div",L,[t("div",null,[o[15]||(o[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Priority",-1)),a(t("select",{"onUpdate:modelValue":o[4]||(o[4]=r=>s(e).priority=r),class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...o[14]||(o[14]=[t("option",{value:"low"},"Low",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"high"},"High",-1),t("option",{value:"urgent"},"Urgent",-1)])],512),[[b,s(e).priority]]),s(e).errors.priority?(i(),l("div",$,u(s(e).errors.priority),1)):d("",!0)]),t("div",D,[a(t("input",{"onUpdate:modelValue":o[5]||(o[5]=r=>s(e).is_anonymous=r),type:"checkbox",id:"anonymous",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[C,s(e).is_anonymous]]),o[16]||(o[16]=t("label",{for:"anonymous",class:"ml-3 block text-sm text-gray-700"}," Post anonymously ",-1))])]),s(e).type==="question"?(i(),l("div",G,[o[19]||(o[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Poll Options (Optional)",-1)),t("div",R,[(i(!0),l(f,null,h(s(e).poll_options,(r,m)=>(i(),l("div",{key:m,class:"flex items-center space-x-3"},[a(t("input",{"onUpdate:modelValue":v=>s(e).poll_options[m]=v,type:"text",class:"flex-1 border-gray-300 rounded-xl focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:`Option ${m+1}`},null,8,z),[[x,s(e).poll_options[m]]]),t("button",{type:"button",onClick:v=>w(m),class:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200"},[...o[17]||(o[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Q)]))),128)),s(e).poll_options.length<10?(i(),l("button",{key:0,type:"button",onClick:_,class:"inline-flex items-center space-x-2 text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors duration-200"},[...o[18]||(o[18]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),t("span",null,"Add Poll Option",-1)])])):d("",!0)]),s(e).errors.poll_options?(i(),l("div",W,u(s(e).errors.poll_options),1)):d("",!0)])):d("",!0),s(e).type==="question"&&s(e).poll_options.length>0?(i(),l("div",I,[o[20]||(o[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Poll Expires At (Optional)",-1)),a(t("input",{"onUpdate:modelValue":o[6]||(o[6]=r=>s(e).poll_expires_at=r),type:"datetime-local",class:"w-full border-gray-300 rounded-2xl focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[x,s(e).poll_expires_at]]),s(e).errors.poll_expires_at?(i(),l("div",J,u(s(e).errors.poll_expires_at),1)):d("",!0)])):d("",!0)]),t("div",K,[y(s(k),{href:p.route("community.show",c.post.id),class:"px-6 py-3 border border-gray-300 rounded-2xl text-gray-700 hover:bg-gray-50 font-medium transition-all duration-200"},{default:g(()=>[...o[21]||(o[21]=[O(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:s(e).processing,class:"px-8 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[s(e).processing?(i(),l("span",Y,[...o[22]||(o[22]=[t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),t("span",null,"Updating...",-1)])])):(i(),l("span",Z,"Update Post"))],8,X)])],32)])])]),_:1})],64))}};export{et as default};
