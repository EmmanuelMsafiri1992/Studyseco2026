import{r as v,p as A,c as a,o as d,a as S,u as r,h as O,w as h,b as t,j as m,t as n,F as p,f as _,n as j,k as C,l as T,i as B,q as M,d as N,g as D,m as z}from"./app-pY9rZ_j6.js";import{_ as H}from"./DashboardLayout-9D_-jepo.js";const P={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},R={class:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200"},G={class:"flex items-center justify-between"},I={class:"text-2xl font-bold text-slate-900"},J={class:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200"},K={class:"flex items-center justify-between"},Q={class:"text-2xl font-bold text-green-600"},W={class:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200"},X={class:"flex items-center justify-between"},Y={class:"text-2xl font-bold text-red-600"},Z={class:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200"},tt={class:"flex items-center justify-between"},et={class:"text-2xl font-bold text-slate-900"},st={class:"flex items-center justify-between mb-6"},nt={class:"flex items-center space-x-4"},lt={class:"text-sm text-slate-600"},ot={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},it={class:"overflow-x-auto"},dt={class:"w-full"},at={class:"bg-slate-50"},rt={class:"px-6 py-3 text-left"},ut=["checked","indeterminate"],ct={class:"divide-y divide-slate-200"},xt={class:"px-6 py-4"},gt=["checked","onChange"],mt={class:"px-6 py-4"},pt={class:"flex items-center"},bt={class:"w-10 h-10 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold text-sm mr-3"},ft={class:"text-sm font-medium text-slate-900"},vt={class:"text-sm text-slate-500"},ht={class:"px-6 py-4 whitespace-nowrap"},_t={class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},yt={class:"px-6 py-4 whitespace-nowrap"},wt={class:"px-6 py-4 whitespace-nowrap text-sm text-slate-500"},kt={class:"px-6 py-4 whitespace-nowrap"},At={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},St={class:"flex items-center space-x-2"},jt=["onClick"],Ct=["onClick"],Tt={class:"px-6 py-4 border-t border-slate-200"},Bt={class:"flex items-center justify-between"},Mt={class:"text-sm text-slate-700"},Nt={class:"flex items-center space-x-2"},Dt={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},Lt={class:"bg-white rounded-2xl p-8 shadow-2xl border border-slate-200 max-w-md w-full mx-4"},Ut={class:"flex items-center justify-between mb-6"},Vt={class:"text-xl font-bold text-slate-900"},$t={class:"p-3 bg-slate-50 rounded-lg"},Ft={class:"font-medium"},Et={class:"text-sm text-slate-600"},qt=["value"],Ot={class:"flex justify-end space-x-4"},zt=["disabled"],Ht={class:"p-3 bg-slate-50 rounded-lg"},Pt={class:"font-medium"},Rt=["value"],Gt={class:"flex justify-end space-x-4"},It=["disabled"],Qt={__name:"Index",props:{enrollments:Object,tutors:Array,stats:Object},setup(o){const L=o,b=v(!1),i=v([]),c=v(null),u=A({enrollment_id:null,tutor_id:""}),x=A({enrollment_ids:[],tutor_id:""}),y=(l=null)=>{c.value=l,l?(u.enrollment_id=l.id,u.tutor_id=l.assigned_tutor_id||""):(u.reset(),x.enrollment_ids=i.value),b.value=!0},g=()=>{b.value=!1,u.reset(),x.reset(),c.value=null},w=()=>{c.value?u.post(route("admin.tutor-assignments.assign"),{onSuccess:()=>{g()}}):x.post(route("admin.tutor-assignments.bulk-assign"),{onSuccess:()=>{g(),i.value=[]}})},U=l=>{confirm(`Are you sure you want to unassign the tutor from ${l.user?.name||l.name}?`)&&z.post(route("admin.tutor-assignments.unassign"),{enrollment_id:l.id})},V=l=>{const e=i.value.indexOf(l);e>-1?i.value.splice(e,1):i.value.push(l)},$=()=>{const l=L.enrollments?.data||[];i.value.length===l.length?i.value=[]:i.value=l.map(e=>e.id)},F=l=>l.assigned_tutor?.name||"Not Assigned",E=l=>l?new Date(l).toLocaleDateString():"Never",f=l=>l.user?.name||l.name||"Unknown Student",q=l=>l.selected_subjects?.length||0;return(l,e)=>(d(),a(p,null,[S(r(O),{title:"Tutor Assignments"}),S(H,{title:"Tutor Assignments",subtitle:"Manage teacher-student assignments and tutoring relationships"},{default:h(()=>[t("div",P,[t("div",R,[t("div",G,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-slate-600"},"Total Students",-1)),t("p",I,n(o.stats.total_students?.toLocaleString()||0),1)]),e[4]||(e[4]=t("div",{class:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center"},[t("span",{class:"text-2xl"},"ðŸ‘¨â€ðŸŽ“")],-1))])]),t("div",J,[t("div",K,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-slate-600"},"Assigned Students",-1)),t("p",Q,n(o.stats.assigned_students?.toLocaleString()||0),1)]),e[6]||(e[6]=t("div",{class:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center"},[t("span",{class:"text-2xl"},"âœ…")],-1))])]),t("div",W,[t("div",X,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-slate-600"},"Unassigned Students",-1)),t("p",Y,n(o.stats.unassigned_students?.toLocaleString()||0),1)]),e[8]||(e[8]=t("div",{class:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center"},[t("span",{class:"text-2xl"},"âŒ")],-1))])]),t("div",Z,[t("div",tt,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-slate-600"},"Available Tutors",-1)),t("p",et,n(o.stats.total_tutors?.toLocaleString()||0),1)]),e[10]||(e[10]=t("div",{class:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center"},[t("span",{class:"text-2xl"},"ðŸ‘©â€ðŸ«")],-1))])])]),t("div",st,[t("div",nt,[i.value.length>0?(d(),a("button",{key:0,onClick:e[0]||(e[0]=s=>y()),class:"px-4 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors flex items-center space-x-2"},[e[11]||(e[11]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),t("span",null,"Bulk Assign ("+n(i.value.length)+")",1)])):m("",!0)]),t("div",lt,n(o.enrollments.total)+" total enrollments ",1)]),t("div",ot,[e[20]||(e[20]=t("div",{class:"px-6 py-4 border-b border-slate-200"},[t("h3",{class:"text-lg font-semibold text-slate-900"},"Student-Tutor Assignments")],-1)),t("div",it,[t("table",dt,[t("thead",at,[t("tr",null,[t("th",rt,[t("input",{type:"checkbox",checked:i.value.length===(o.enrollments?.data?.length||0)&&(o.enrollments?.data?.length||0)>0,indeterminate:i.value.length>0&&i.value.length<(o.enrollments?.data?.length||0),onChange:$,class:"rounded border-slate-300"},null,40,ut)]),e[12]||(e[12]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"},"Student",-1)),e[13]||(e[13]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"},"Subjects",-1)),e[14]||(e[14]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"},"Assigned Tutor",-1)),e[15]||(e[15]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"},"Assignment Date",-1)),e[16]||(e[16]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"},"Access Status",-1)),e[17]||(e[17]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"},"Actions",-1))])]),t("tbody",ct,[(d(!0),a(p,null,_(o.enrollments?.data||[],s=>(d(),a("tr",{key:s.id,class:"hover:bg-slate-50"},[t("td",xt,[t("input",{type:"checkbox",checked:i.value.includes(s.id),onChange:k=>V(s.id),class:"rounded border-slate-300"},null,40,gt)]),t("td",mt,[t("div",pt,[t("div",bt,n(f(s).charAt(0).toUpperCase()),1),t("div",null,[t("div",ft,n(f(s)),1),t("div",vt,n(s.email),1)])])]),t("td",ht,[t("span",_t,n(q(s))+" subjects ",1)]),t("td",yt,[t("span",{class:j(["px-2 py-1 text-xs font-medium rounded-full",s.assigned_tutor?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(F(s)),3)]),t("td",wt,n(E(s.tutor_assigned_at)),1),t("td",kt,[t("span",{class:j(["px-2 py-1 text-xs font-medium rounded-full",s.is_access_expired?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},n(s.is_access_expired?"Expired":"Active"),3)]),t("td",At,[t("div",St,[t("button",{onClick:k=>y(s),class:"text-indigo-600 hover:text-indigo-900"},n(s.assigned_tutor?"Reassign":"Assign"),9,jt),s.assigned_tutor?(d(),a("button",{key:0,onClick:k=>U(s),class:"text-red-600 hover:text-red-900"}," Unassign ",8,Ct)):m("",!0)])])]))),128))])])]),t("div",Tt,[t("div",Bt,[t("div",Mt," Showing "+n(o.enrollments?.from||0)+" to "+n(o.enrollments?.to||0)+" of "+n(o.enrollments?.total||0)+" results ",1),t("div",Nt,[o.enrollments?.prev_page_url?(d(),C(r(T),{key:0,href:o.enrollments.prev_page_url,class:"px-3 py-1 bg-slate-200 text-slate-700 rounded hover:bg-slate-300 transition-colors"},{default:h(()=>[...e[18]||(e[18]=[B(" Previous ",-1)])]),_:1},8,["href"])):m("",!0),o.enrollments?.next_page_url?(d(),C(r(T),{key:1,href:o.enrollments.next_page_url,class:"px-3 py-1 bg-slate-200 text-slate-700 rounded hover:bg-slate-300 transition-colors"},{default:h(()=>[...e[19]||(e[19]=[B(" Next ",-1)])]),_:1},8,["href"])):m("",!0)])])])]),b.value?(d(),a("div",Dt,[t("div",Lt,[t("div",Ut,[t("h3",Vt,n(c.value?"Assign Tutor":"Bulk Assign Tutor"),1),t("button",{onClick:g,class:"text-slate-400 hover:text-slate-600"},[...e[21]||(e[21]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c.value?(d(),a("form",{key:0,onSubmit:M(w,["prevent"]),class:"space-y-6"},[t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Student",-1)),t("div",$t,[t("div",Ft,n(f(c.value)),1),t("div",Et,n(c.value.email),1)])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Assign Tutor",-1)),N(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>r(u).tutor_id=s),required:"",class:"w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[e[23]||(e[23]=t("option",{value:""},"Select a tutor",-1)),(d(!0),a(p,null,_(o.tutors,s=>(d(),a("option",{key:s.id,value:s.id},n(s.name)+" - "+n(s.email),9,qt))),128))],512),[[D,r(u).tutor_id]])]),t("div",Ot,[t("button",{type:"button",onClick:g,class:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors"}," Cancel "),t("button",{type:"submit",disabled:r(u).processing,class:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50"},n(r(u).processing?"Assigning...":"Assign Tutor"),9,zt)])],32)):(d(),a("form",{key:1,onSubmit:M(w,["prevent"]),class:"space-y-6"},[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Selected Students",-1)),t("div",Ht,[t("div",Pt,n(i.value.length)+" students selected",1)])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Assign Tutor",-1)),N(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r(x).tutor_id=s),required:"",class:"w-full rounded-lg border-slate-300 focus:border-indigo-500 focus:ring-indigo-500"},[e[26]||(e[26]=t("option",{value:""},"Select a tutor",-1)),(d(!0),a(p,null,_(o.tutors,s=>(d(),a("option",{key:s.id,value:s.id},n(s.name)+" - "+n(s.email),9,Rt))),128))],512),[[D,r(x).tutor_id]])]),t("div",Gt,[t("button",{type:"button",onClick:g,class:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors"}," Cancel "),t("button",{type:"submit",disabled:r(x).processing,class:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50"},n(r(x).processing?"Assigning...":"Bulk Assign Tutor"),9,It)])],32))])])):m("",!0)]),_:1})],64))}};export{Qt as default};
