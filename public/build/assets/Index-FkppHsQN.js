import{r as h,x as _,c as n,o as r,a as v,u as a,h as j,w as d,b as e,d as k,v as B,k as f,j as g,F as b,f as y,t as l,g as L,l as m,i as V,m as A}from"./app-PgZLZy6T.js";import{_ as D}from"./DashboardLayout-Cf8-137X.js";const N={class:"bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-slate-200/50"},H={class:"flex flex-col md:flex-row gap-4 items-center justify-between"},z={class:"flex-1 max-w-md"},T={class:"relative"},F={class:"flex items-center space-x-4"},$=["value"],E={class:"space-y-4"},G={class:"text-sm text-slate-500 mt-1"},I={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},O={class:"relative h-40 bg-gray-100"},P=["src"],U={class:"absolute bottom-4 left-4 text-white"},q={class:"text-xl font-bold"},Q={class:"text-sm font-medium opacity-80"},W={class:"absolute top-4 right-4 bg-white/90 backdrop-blur text-slate-800 text-xs font-semibold px-3 py-1 rounded-full shadow"},Y={class:"p-6 flex-1 flex flex-col justify-between"},J={class:"mb-4"},K={class:"text-slate-600 text-sm mb-2 line-clamp-2"},R={class:"flex items-center justify-between mb-2"},X={class:"flex items-center space-x-2 text-sm text-slate-500"},Z={class:"flex items-center justify-between text-xs text-slate-400"},ee={key:0},te={class:"flex items-center justify-between pt-4 border-t border-slate-200/50"},se={key:3,class:"flex items-center space-x-2"},oe=["onClick"],le={key:1,class:"text-center p-12 bg-white/70 backdrop-blur-sm rounded-3xl shadow-lg border border-slate-200/50"},re={class:"px-6 py-4 border-t border-slate-200/50 bg-white/70 backdrop-blur-sm rounded-3xl shadow-xl flex items-center justify-between"},ae={class:"text-sm text-slate-600"},ue={__name:"Index",props:{auth:Object,subjects:Array},setup(C){const w=C,u=w.auth?.user||{name:"Guest",role:"guest",profile_photo_url:null},p=h(w.subjects||[]),i=h(""),x=h("all"),M=_(()=>["all",...new Set(p.value.map(t=>t.department))]),c=_(()=>p.value.filter(o=>{const t=o.name.toLowerCase().includes(i.value.toLowerCase())||o.code.toLowerCase().includes(i.value.toLowerCase())||o.description&&o.description.toLowerCase().includes(i.value.toLowerCase())||o.teacher_name&&o.teacher_name.toLowerCase().includes(i.value.toLowerCase()),s=x.value==="all"||o.department===x.value;return t&&s})),S=o=>{confirm(`Are you sure you want to delete "${o.name}"? This action cannot be undone and will permanently remove the subject and all its associated topics and lessons.`)&&A.delete(route("subjects.destroy",o.id),{onSuccess:()=>{const t=p.value.findIndex(s=>s.id===o.id);t!==-1&&p.value.splice(t,1)},onError:t=>{console.error("Failed to delete subject:",t),alert("Failed to delete subject. Please try again.")}})};return(o,t)=>(r(),n(b,null,[v(a(j),{title:"Academics"}),v(D,{title:"Academics Management",subtitle:"Explore and manage all subjects"},{default:d(()=>[e("div",N,[e("div",H,[e("div",z,[e("div",T,[k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),type:"text",placeholder:"Search subjects...",class:"w-full bg-slate-100/70 backdrop-blur-sm px-4 py-3 pl-10 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white transition-all duration-200"},null,512),[[B,i.value]]),t[2]||(t[2]=e("svg",{class:"absolute left-3 top-3.5 h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",F,[k(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),class:"bg-slate-100/70 px-4 py-3 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:bg-white appearance-none"},[t[3]||(t[3]=e("option",{value:"all"},"All Departments",-1)),(r(!0),n(b,null,y(M.value.slice(1),s=>(r(),n("option",{key:s,value:s},l(s),9,$))),128))],512),[[L,x.value]]),a(u)?.role==="admin"?(r(),f(a(m),{key:0,href:o.route("subjects.create"),class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-3 rounded-2xl font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1"},{default:d(()=>[...t[4]||(t[4]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",null,"Add Subject")],-1)])]),_:1},8,["href"])):g("",!0)])])]),e("div",E,[t[13]||(t[13]=e("h2",{class:"text-xl font-bold text-slate-800"},"All Subjects",-1)),e("p",G,l(c.value.length)+" subjects found",1),c.value.length>0?(r(),n("div",I,[(r(!0),n(b,null,y(c.value,s=>(r(),n("div",{key:s.id,class:"bg-white rounded-3xl shadow-xl border border-slate-200/50 overflow-hidden flex flex-col transition-all duration-300 hover:shadow-2xl hover:scale-105"},[e("div",O,[e("img",{src:s.cover_image?`/storage/${s.cover_image}`:"https://images.unsplash.com/photo-1542435503-956c469947f6?auto=format&fit=crop&q=80&w=300&h=160&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Subject Thumbnail",class:"object-cover w-full h-full"},null,8,P),t[5]||(t[5]=e("div",{class:"absolute bottom-0 left-0 bg-gradient-to-t from-black/60 to-transparent w-full h-1/2"},null,-1)),e("div",U,[e("h3",q,l(s.name),1),e("p",Q,l(s.department)+" - "+l(s.grade_level),1)]),e("div",W,l(s.credits)+" Credits ",1)]),e("div",Y,[e("div",J,[e("p",K,l(s.description||"No description available."),1),e("div",R,[e("div",X,[t[6]||(t[6]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",null,l(s.teacher_name||"No teacher assigned"),1)])]),e("div",Z,[e("span",null,l(s.topic_count||0)+" topics",1),e("span",null,l(s.lesson_count||0)+" lessons",1),s.total_duration?(r(),n("span",ee,l(Math.floor(s.total_duration/60))+"h "+l(s.total_duration%60)+"m",1)):g("",!0)])]),e("div",te,[a(u)?.role==="admin"||a(u)?.role==="teacher"?(r(),f(a(m),{key:0,href:o.route("subjects.show",s.id),class:"flex items-center space-x-2 text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors duration-200"},{default:d(()=>[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})],-1),e("span",null,"Manage Subject",-1)])]),_:2},1032,["href"])):a(u)?.role==="student"?(r(),f(a(m),{key:1,href:o.route("subjects.show",s.id),class:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white text-sm font-semibold rounded-xl hover:from-emerald-600 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"},{default:d(()=>[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})],-1),e("span",null,"Start Learning",-1)])]),_:2},1032,["href"])):(r(),f(a(m),{key:2,href:o.route("subjects.show",s.id),class:"text-slate-600 hover:text-slate-800 text-sm font-medium"},{default:d(()=>[...t[9]||(t[9]=[V("View Subject",-1)])]),_:2},1032,["href"])),a(u)?.role==="admin"?(r(),n("div",se,[v(a(m),{href:o.route("subjects.edit",s.id),class:"p-2 text-amber-600 hover:bg-amber-100 rounded-full transition-colors duration-150"},{default:d(()=>[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])]),_:2},1032,["href"]),e("button",{onClick:ne=>S(s),class:"p-2 text-red-600 hover:bg-red-100 rounded-full transition-colors duration-150"},[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,oe)])):g("",!0)])])]))),128))])):(r(),n("div",le,[...t[12]||(t[12]=[e("p",{class:"text-lg font-medium text-slate-500"},"No subjects found. Try adjusting your search or filters.",-1)])]))]),e("div",re,[e("p",ae,"Showing 1 to "+l(c.value.length)+" of "+l(c.value.length)+" results",1),t[14]||(t[14]=e("div",{class:"flex items-center space-x-2"},[e("button",{class:"px-3 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg transition-colors duration-150"},"Previous"),e("button",{class:"px-3 py-2 text-sm bg-indigo-100 text-indigo-700 rounded-lg"},"1"),e("button",{class:"px-3 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg transition-colors duration-150"},"2"),e("button",{class:"px-3 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg transition-colors duration-150"},"3"),e("button",{class:"px-3 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg transition-colors duration-150"},"Next")],-1))])]),_:1})],64))}};export{ue as default};
